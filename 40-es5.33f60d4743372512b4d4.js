!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(!e)return;if("string"==typeof e)return t(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,a)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[40],{2623:function(e,t,r){r.d(t,{OZ:function(){return l}});var n=r(7716),l=function(){function e(){a(this,e)}return o(e,[{key:"xmlToJson",value:function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a+=1){var r=e.attributes.item(a);t["@attributes"][r.nodeName]=r.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()&&1===e.childNodes.length&&3===e.childNodes[0].nodeType)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o+=1){var n=e.childNodes.item(o),l=n.nodeName;if(void 0===t[l])t[l]=this.xmlToJson(n);else{if(void 0===t[l].push){var i=t[l];t[l]=[],t[l].push(i)}t[l].push(this.xmlToJson(n))}}return t}}]),e}();l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l.ngInjectableDef=(0,n.Ez6)({factory:function(){return new l},token:l,providedIn:"root"})},9248:function(t,r,o){o.d(r,{T:function(){return c},B:function(){return u}});var n,l=o(7716),i=o(7817),s=o(9790),c=function e(t){return Object.keys(t).forEach(function(a){"#text"===a?delete t["#text"]:("object"==typeof t[a]&&(t[a]=e(t[a])),a.includes(":")&&(t[a.split(":")[1]]=t[a],delete t[a]))}),t},u=((n=function t(r,o){var n=this;a(this,t),this._tableService=r,this.translateService=o,this.currency="EUR",this.process=function(t){n._tableService.startSession();var a,r,o,l,i={},s={};if(t["S:Envelope"]){var u=(t=(t=t["S:Envelope"]["S:Body"])[Object.keys(t)[1]].return).customTemplateData.entry;Object.keys(u).forEach(function(e){return i[u[e].key]=u[e].value}),t=c(t["ns1:Dossier"])}else t["ns2:Dossiers"]&&(t=c(t["ns2:Dossiers"]["ns2:Dossier"]));n.translateService.use(t.Language||"en"),n.currency=t.Currency||"EUR",i.Name=t.Name,i.Description=t.Description,i.CreateDate=t.CreateDate,i.ChangeDate=t.ChangeDate,i.DamageDate=t.RepairOrder.DamageDate,r=(t.TradingData||{}).Dealership||{},o=(t.TradingData||{}).Expert||{},a=(t.TradingData||{}).Owner||{},s=t.Vehicle||{};try{n._tableService.addTable({title:"SeriesEquipment",rows:[{type:"header",cells:[{value:"Description"}]}].concat(e(s.Equipment.SeriesEquipment.EquipmentPosition.map(function(e){return{type:"row",cells:[{value:e.Description}]}})))})}catch(u){console.log("could not read Series Equipment")}try{n._tableService.addTable({title:"SpecialEquipment",rows:[{type:"header",cells:[{value:"Description"}]}].concat(e(s.Equipment.SeriesEquipment.EquipmentPosition.map(function(e){return{type:"row",cells:[{value:e.Description}]}})))})}catch(u){console.log("could not read Special Equipment")}s.Color=(s.Equipment||{}).Color,delete s.Equipment,n._tableService.switchPage();var p=(t.RepairCalculation||{}).RepairWages,d=(t.RepairCalculation||{}).CalcResultCommon||null;if(d){try{var v=(d.MaterialPositions||{}).MaterialPosition;v&&(v.length||(v=[v]),n._tableService.addTable({title:"SpareParts",rows:[{type:"header",cells:[{value:"PartNumber"},{value:"Description",width:40},{value:"ValuePerUnit"},{value:"Amount"},{value:"ValueTotalCorrected"}]}].concat(e(v.map(function(e){return{type:"row",cells:[{value:e.PartNumber},{value:e.Description,width:40},{value:e.ValuePerUnit},{value:e.Amount},{value:e.ValueTotalCorrected}]}})))}))}catch(u){console.log("could not read Material Positions")}try{var f=(d.AdditionalCostsPositions||{}).AdditionalCostsPosition;f&&(f.length||(f=[f]),f.forEach(function(e){e.ValueTotalCorrected||(e.ValueTotalCorrected=e.ValueTotal)}),n._tableService.addTable({title:"AdditionalCosts",rows:[{type:"header",cells:[{value:"Description",width:40},{value:"ValueTotalCorrected"}]}].concat(e(f.map(function(e){return{type:"row",cells:[{value:e.Description,width:40},{value:e.ValueTotalCorrected}]}})))}))}catch(u){console.log("could not read Additional Costs Positions")}try{var h=(d.LabourPositions||{}).LabourPosition;h&&(h.length||(h=[h]),n._tableService.addTable({title:"Labour",rows:[{type:"header",cells:[{value:"LabourPosId"},{value:"Description",width:40},{value:"WageLevel"},{value:"Duration"},{value:"ValueTotalCorrected"}]}].concat(e(h.map(function(e){return{type:"row",cells:[{value:e.LabourPosId},{value:e.Description,width:40},{value:e.WageLevel},{value:e.Duration},{value:e.ValueTotalCorrected}]}})))}))}catch(u){console.log("could not read Labour Positions")}try{var g=(d.LacquerPositions||{}).LacquerPosition;g&&(g.length||(g=[g]),g.forEach(function(e){e.WagePrice=(p.Lacquer||30)*e.Duration,e.WageLevel=e.LabourPosId}),n._tableService.addTable({title:"Lacquer",rows:[{type:"header",cells:[{value:"WageLevel"},{value:"Description",width:40},{value:"Material"},{value:"Duration"},{value:"WagePrice"},{value:"ValueTotalCorrected"}]}].concat(e(g.map(function(e){return{type:"row",cells:[{value:e.WageLevel},{value:e.Description,width:40},{value:e.Material},{value:e.Duration},{value:e.WagePrice},{value:e.ValueTotalCorrected}]}})))}))}catch(u){console.log("could not read Lacquer Positions")}try{var m=(d.DiscountPositions||{}).DiscountPosition;m&&(m.length||(m=[m]),n._tableService.addTable({title:"Discount",rows:[{type:"header",cells:[{value:"Description",width:40},{value:"BaseValue"},{value:"CorrectionPercentage"},{value:"ValueTotalCorrected"}]}].concat(e(m.map(function(e){return{type:"row",cells:[{value:e.Description,width:40},{value:e.BaseValue},{value:e.CorrectionPercentage},{value:e.CorrectionValue}]}})))}))}catch(u){console.log("could not read Discount Positions")}n._tableService.switchPage()}var b=(t.RepairCalculation||{}).CalculationSummary;if(b&&Object.keys(b).length>0){var y=b.AuxiliaryCosts;y&&n._tableService.addTable({title:"AdditionalCostsSum",price:y.TotalSum});try{var w=b.SparePartsCosts,C=0;w&&(C=w.TotalSum,n._tableService.addTable({title:"SumBlockSpareParts",price:C,rows:[{type:"header",cells:[{value:"Description",width:40},{value:"AllSum"},{value:"ConsumablesSurcharge"},{value:"ValueTotalCorrected"}]},{type:"row",cells:[{value:n.translateService.stream("SparePartsSum"),width:40,isAsync:!0},{value:w.AllSum},{value:w.ConsumablesSurcharge},{value:w.TotalSum}]}]}))}catch(w){console.log("could not read Spare Parts Summary")}try{if(b.LabourCosts){var P=b.LabourCosts.TotalSum;delete b.LabourCosts.TotalSum;var T=[];Object.keys(b.LabourCosts).forEach(function(e){return T.push(b.LabourCosts[e])}),n._tableService.addTable({title:"SumBlockWage",price:P,rows:[{type:"header",cells:[{value:"Description",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]}].concat(e(T.map(function(e){return{type:"row",cells:[{value:n.translateService.stream(e.Type),width:40,isAsync:!0},{value:e.Units},{value:e.PricePerUnit},{value:e.Price}]}})))})}}catch(w){console.log("could not read Labour Cost Summary")}try{if(b.LacquerCosts){var S=b.LacquerCosts.TotalSum,x=[],D=b.LacquerCosts.Wage;null!=D&&(x.push({type:"header",cells:[{value:"wageCost",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]}),x.push({type:"row",cells:[{value:n.translateService.stream("laquerWork"),width:40,isAsync:!0},{value:D.Unit},{value:D.PricePerUnit},{value:D.Price}]}));var L=b.LacquerCosts.Material;if(null!=L){x.push({type:"header",cells:[{value:"material",width:40},{value:"sumMaterialUnits"},{value:"materialUnitPrice"},{value:"ValueTotalCorrected"}]});var A=(L.LacquerConstants||{}).LacquerConstant;delete L.LacquerConstants;var q=b.LacquerCosts.Material.Overhauling;null!=q&&x.push({type:"row",cells:[{value:n.translateService.stream(q.Type),width:40,isAsync:!0},{value:q.Unit},{value:q.PricePerUnit},{value:q.Price}]});var O=b.LacquerCosts.Material.Replacement;if(null!=O&&x.push({type:"row",cells:[{value:n.translateService.stream(O.Type),width:40,isAsync:!0},{value:O.Unit},{value:O.PricePerUnit},{value:O.Price}]}),(b.LacquerCosts.Material.MaterialGroups||{}).LacquerMaterialGroupSummary){var _=b.LacquerCosts.Material.MaterialGroups.LacquerMaterialGroupSummary;null!=_&&(_.length||(_=[_]),x.push.apply(x,e(_.map(function(e){return{type:"row",cells:[{value:e.Name,width:40},{value:e.Unit},{value:e.PricePerUnit},{value:e.Price}]}}))))}null!=A&&x.push({type:"row",cells:[{value:A.Description,width:40},{value:"-"},{value:"-"},{value:A.Price}]})}n._tableService.addTable({title:"SumBlockLacquer",price:S,rows:x})}}catch(w){console.log("could not read Lacquer Cost Summary")}try{var M=[{type:"header",cells:[{value:"Description",width:40},{value:"TotalNetCosts"},{value:"TotalVAT"},{value:"TotalGrossCosts"}]}];M.push({type:"row",cells:[{value:n.translateService.stream("RepairCost"),width:40,isAsync:!0},{value:b.TotalNetCosts},{value:b.TotalVAT},{value:b.TotalGrossCosts}]}),b.TotalNetDiscount&&M.push({type:"row",cells:[{value:n.translateService.stream("Discount"),width:40,isAsync:!0},{value:b.TotalNetDiscount},{value:b.TotalVATDiscount},{value:b.TotalGrossDiscount}]}),b.TotalNetCorrected&&M.push({type:"row",cells:[{value:n.translateService.stream("CorrectedRepairCost"),width:40,isAsync:!0},{value:b.TotalNetCorrected},{value:b.TotalVATCorrected},{value:b.TotalGrossCorrected}]}),n._tableService.addTable({title:"CostSummary",price:b.TotalGrossCorrected||b.TotalGrossCosts,rows:M})}catch(w){console.log("could not read Final Summary")}}return l=n._tableService.endSession(),{additionalInfo:i,ownerInfo:a,dealerInfo:r,expertInfo:o,vehicleInfo:s,pages:l}}}).\u0275fac=function(e){return new(e||n)(l.LFG(i.L),l.LFG(s.sK))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n)},7817:function(e,t,r){r.d(t,{L:function(){return l}});var o,n=r(7716),l=((o=function e(){var t=this;a(this,e),this.maxRows=0,this.newTableRows=0,this.currentRow=0,this.tablesPerPage=[],this.startSession=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:33,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;t.pages=[],t.tablesPerPage=[],t.currentRow=0,t.maxRows=e,t.newTableRows=a},this.switchPage=function(){t.tablesPerPage&&t.pages.push(t.tablesPerPage),t.tablesPerPage=[],t.currentRow=0},this.endSession=function(){return t.tablesPerPage.length>0&&t.pages.push(t.tablesPerPage),t.pages},this.addTable=function(e){var a=e.rows?e.rows.length:2;if(t.currentRow+=t.newTableRows,t.currentRow+a<=t.maxRows)t.tablesPerPage.push(e),t.currentRow+=a,t.maxRows-t.currentRow<6&&(t.currentRow=0,t.pages.push(t.tablesPerPage),t.tablesPerPage=[]);else{var r=e.rows.splice(a-(t.currentRow+a-t.maxRows));t.tablesPerPage.push(e),t.currentRow=0,t.pages.push(t.tablesPerPage),t.tablesPerPage=[],t.addTable({rows:r,title:e.title,price:e.price})}}}).\u0275fac=function(e){return new(e||o)},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},1002:function(e,t,r){r.d(t,{K:function(){return y}});var o=r(7716),n=r(8583),l=r(9790),i=r(3729);function s(e,t){if(1&e&&(o.TgZ(0,"th",6),o._uU(1),o.ALo(2,"precision"),o.qZA()),2&e){var a=o.oxw(3);o.xp6(1),o.Oqu(o.xi3(2,1,a.data.price,2))}}function c(e,t){if(1&e&&(o.TgZ(0,"tr",4),o.TgZ(1,"th"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.YNc(4,s,3,4,"th",5),o.qZA()),2&e){var a=o.oxw(2);o.xp6(2),o.Oqu(o.lcZ(3,2,a.data.title)),o.xp6(2),o.Q6J("ngIf",a.data.price)}}function u(e,t){if(1&e&&(o.TgZ(0,"th"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e){var a=t.$implicit;o.Udp("flex-basis",a.width||0,"%"),o.xp6(1),o.hij(" ",o.lcZ(2,3,a.value)," ")}}function p(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"tr",8),o.YNc(2,u,3,5,"th",9),o.qZA(),o.BQk()),2&e){var a=o.oxw().$implicit;o.xp6(2),o.Q6J("ngForOf",a.cells)}}function d(e,t){if(1&e&&(o.ynx(0),o._uU(1),o.ALo(2,"precision"),o.ALo(3,"async"),o.BQk()),2&e){var a=o.oxw().$implicit;o.xp6(1),o.hij(" ",o.xi3(2,1,o.lcZ(3,4,a.value),2)," ")}}function v(e,t){if(1&e&&(o._uU(0),o.ALo(1,"precision")),2&e){var a=o.oxw().$implicit;o.hij(" ",o.xi3(1,1,a.value,2)," ")}}function f(e,t){if(1&e&&(o.TgZ(0,"td"),o.YNc(1,d,4,6,"ng-container",11),o.YNc(2,v,2,4,"ng-template",null,12,o.W1O),o.qZA()),2&e){var a=t.$implicit,r=o.MAs(3);o.Udp("flex-basis",a.width||0,"%"),o.xp6(1),o.Q6J("ngIf",a.isAsync)("ngIfElse",r)}}function h(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"tr",10),o.YNc(2,f,4,4,"td",9),o.qZA(),o.BQk()),2&e){var a=o.oxw().$implicit;o.xp6(2),o.Q6J("ngForOf",a.cells)}}function g(e,t){if(1&e&&(o.ynx(0),o.YNc(1,p,3,1,"ng-container",7),o.YNc(2,h,3,1,"ng-container",7),o.BQk()),2&e){var a=t.$implicit;o.xp6(1),o.Q6J("ngIf","header"==a.type),o.xp6(1),o.Q6J("ngIf","row"==a.type)}}function m(e,t){if(1&e&&(o.TgZ(0,"div",1),o.TgZ(1,"table"),o.YNc(2,c,5,4,"tr",2),o.YNc(3,g,3,2,"ng-container",3),o.qZA(),o.qZA()),2&e){var a=o.oxw();o.Q6J("ngClass",a.cssClass),o.xp6(2),o.Q6J("ngIf",a.data.title),o.xp6(1),o.Q6J("ngForOf",a.data.rows)}}var b,y=((b=function e(){a(this,e),this.data=null,this.cssClass=""}).\u0275fac=function(e){return new(e||b)},b.\u0275cmp=o.Xpm({type:b,selectors:[["imp-table-info"]],inputs:{data:"data",cssClass:"cssClass"},decls:1,vars:1,consts:[["style","margin-bottom: 10px;",3,"ngClass",4,"ngIf"],[2,"margin-bottom","10px",3,"ngClass"],["class","overview",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"overview"],["style","justify-content: end",4,"ngIf"],[2,"justify-content","end"],[4,"ngIf"],[1,"header"],[3,"flex-basis",4,"ngFor","ngForOf"],[1,"row"],[4,"ngIf","ngIfElse"],["sync",""]],template:function(e,t){1&e&&o.YNc(0,m,4,3,"div",0),2&e&&o.Q6J("ngIf",t.data)},directives:[n.O5,n.mk,n.sg],pipes:[l.X$,i.$,n.Ov],styles:["mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{border-bottom:0;background-color:#ffffe0;border:1px solid black;min-height:35px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{color:#000;font-size:12px;font-weight:600;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{border-left:1px solid black;border-right:1px solid black;border-bottom-color:#000;min-height:30px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{font-size:10px;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   .mat-column-Description[_ngcontent-%COMP%]{flex:1 1 40%}"],changeDetection:0}),b)},3729:function(e,t,r){r.d(t,{$:function(){return i},p:function(){return s}});var n,l=r(7716),i=((n=function(){function e(){a(this,e)}return o(e,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"string"==typeof e?isNaN(+e)?e:parseFloat(e).toFixed(t):"number"==typeof e?e.toFixed(t):"-"}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275pipe=l.Yjl({name:"precision",type:n,pure:!0}),n),s=function(){var e=function(){function e(){a(this,e),this.vehicleType={1:"car",3:"motorcycle",4:"truck"}}return o(e,[{key:"transform",value:function(e){return this.vehicleType[e]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=l.Yjl({name:"vehicleType",type:e,pure:!0}),e}()}}])}();