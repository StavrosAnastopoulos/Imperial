(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[569],{8552:function(module,__unused_webpack_exports,__webpack_require__){var _asyncToGenerator=__webpack_require__(1052).default,g;g=function(){return(()=>{"use strict";var __webpack_modules__=[,(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addLinkAttributes=function(t,{url:e,target:s,rel:i,enabled:a=!0}={}){(0,r.assert)(e&&"string"==typeof e,'addLinkAttributes: A valid "url" parameter must provided.');const o=(0,r.removeNullCharacters)(e);a?t.href=t.title=o:(t.href="",t.title=`Disabled: ${o}`,t.onclick=()=>!1);let l="";switch(s){case c.NONE:break;case c.SELF:l="_self";break;case c.BLANK:l="_blank";break;case c.PARENT:l="_parent";break;case c.TOP:l="_top"}t.target=l,t.rel="string"==typeof i?i:n},e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getFilenameFromUrl=function(t){const e=t.indexOf("#"),s=t.indexOf("?"),r=Math.min(e>0?e:t.length,s>0?s:t.length);return t.substring(t.lastIndexOf("/",r)+1,r)},e.getPdfFilenameFromUrl=function(t,e="document.pdf"){if("string"!=typeof t)return e;if(h(t))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let i=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(i&&(i=i[0],i.includes("%")))try{i=s.exec(decodeURIComponent(i))[0]}catch(a){}return i||e},e.isDataScheme=h,e.isFetchSupported=d,e.isPdfFile=function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},e.isValidFetchUrl=u,e.loadScript=function(t,e=!1){return new Promise((s,r)=>{const n=document.createElement("script");n.src=t,n.onload=function(t){e&&n.remove(),s(t)},n.onerror=function(){r(new Error(`Cannot load script at: ${n.src}`))},(document.head||document.documentElement).appendChild(n)})},e.StatTimer=e.RenderingCancelledException=e.PDFDateString=e.PageViewport=e.LinkTarget=e.DOMSVGFactory=e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.BaseCMapReaderFactory=e.BaseCanvasFactory=void 0;var r=s(2);const n="noopener noreferrer nofollow";e.DEFAULT_LINK_REL=n;const i="http://www.w3.org/2000/svg";class a{constructor(){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){(0,r.unreachable)("Abstract method `create` called.")}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}}e.BaseCanvasFactory=a,e.DOMCanvasFactory=class extends a{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._document.createElement("canvas"),r=s.getContext("2d");return s.width=t,s.height=e,{canvas:s,context:r}}};class o{constructor({baseUrl:t=null,isCompressed:e=!1}){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}fetch({name:t}){var e=this;return _asyncToGenerator(function*(){if(!e.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const s=e.baseUrl+t+(e.isCompressed?".bcmap":"");return e._fetchData(s,e.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE).catch(t=>{throw new Error(`Unable to load ${e.isCompressed?"binary ":""}CMap at: ${s}`)})})()}_fetchData(t,e){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o,e.DOMCMapReaderFactory=class extends o{_fetchData(t,e){var s=this;return d()&&u(t,document.baseURI)?fetch(t).then(function(){var t=_asyncToGenerator(function*(t){if(!t.ok)throw new Error(t.statusText);let n;return n=s.isCompressed?new Uint8Array(yield t.arrayBuffer()):(0,r.stringToBytes)(yield t.text()),{cMapData:n,compressionType:e}});return function(e){return t.apply(this,arguments)}}()):new Promise((s,n)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),this.isCompressed&&(i.responseType="arraybuffer"),i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(200===i.status||0===i.status){let t;if(this.isCompressed&&i.response?t=new Uint8Array(i.response):!this.isCompressed&&i.responseText&&(t=(0,r.stringToBytes)(i.responseText)),t)return void s({cMapData:t,compressionType:e})}n(new Error(i.statusText))}},i.send(null)})}},e.DOMSVGFactory=class{create(t,e){(0,r.assert)(t>0&&e>0,"Invalid SVG dimensions");const s=document.createElementNS(i,"svg:svg");return s.setAttribute("version","1.1"),s.setAttribute("width",t+"px"),s.setAttribute("height",e+"px"),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox","0 0 "+t+" "+e),s}createElement(t){return(0,r.assert)("string"==typeof t,"Invalid SVG element type"),document.createElementNS(i,t)}};class l{constructor({viewBox:t,scale:e,rotation:s,offsetX:r=0,offsetY:n=0,dontFlip:i=!1}){this.viewBox=t,this.scale=e,this.rotation=s,this.offsetX=r,this.offsetY=n;const a=(t[2]+t[0])/2,o=(t[3]+t[1])/2;let l,c,h,d,u,p,g,f;switch((s%=360)<0&&(s+=360),s){case 180:l=-1,c=0,h=0,d=1;break;case 90:l=0,c=1,h=1,d=0;break;case 270:l=0,c=-1,h=-1,d=0;break;case 0:l=1,c=0,h=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}i&&(h=-h,d=-d),0===l?(u=Math.abs(o-t[1])*e+r,p=Math.abs(a-t[0])*e+n,g=Math.abs(t[3]-t[1])*e,f=Math.abs(t[2]-t[0])*e):(u=Math.abs(a-t[0])*e+r,p=Math.abs(o-t[1])*e+n,g=Math.abs(t[2]-t[0])*e,f=Math.abs(t[3]-t[1])*e),this.transform=[l*e,c*e,h*e,d*e,u-l*e*a-h*e*o,p-c*e*a-d*e*o],this.width=g,this.height=f}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:n=!1}={}){return new l({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:s,offsetY:r,dontFlip:n})}convertToViewportPoint(t,e){return r.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=r.Util.applyTransform([t[0],t[1]],this.transform),s=r.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return r.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=l,e.RenderingCancelledException=class extends r.BaseException{constructor(t,e){super(t),this.type=e}};const c={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function h(t){const e=t.length;let s=0;for(;s<e&&""===t[s].trim();)s++;return"data:"===t.substring(s,s+5).toLowerCase()}function d(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function u(t,e){try{const{protocol:s}=e?new URL(t,e):new URL(t);return"http:"===s||"https:"===s}catch(s){return!1}}let p;e.LinkTarget=c,e.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(t){t in this.started&&(0,r.warn)(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,r.warn)(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const s of this.times){const t=s.name;t.length>e&&(e=t.length)}for(const s of this.times){const r=s.end-s.start;t.push(`${s.name.padEnd(e)} ${r}ms\n`)}return t.join("")}},e.PDFDateString=class{static toDateObject(t){if(!t||!(0,r.isString)(t))return null;p||(p=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=p.exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let i=parseInt(e[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===c?(a+=h,o+=d):"+"===c&&(a-=h,o-=d),new Date(Date.UTC(s,n,i,a,o,l))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arrayByteLength=u,e.arraysToBytes=function(t){const e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];let s=0;for(let i=0;i<e;i++)s+=u(t[i]);let r=0;const n=new Uint8Array(s);for(let i=0;i<e;i++){let e=t[i];e instanceof Uint8Array||(e="string"==typeof e?d(e):new Uint8Array(e));const s=e.byteLength;n.set(e,r),r+=s}return n},e.assert=o,e.bytesToString=function(t){o(null!==t&&"object"==typeof t&&void 0!==t.length,"Invalid argument for bytesToString");const e=t.length,s=8192;if(e<s)return String.fromCharCode.apply(null,t);const r=[];for(let n=0;n<e;n+=s){const i=Math.min(n+s,e),a=t.subarray(n,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")},e.createObjectURL=function(t,e="",s=!1){if(URL.createObjectURL&&!s)return URL.createObjectURL(new Blob([t],{type:e}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n=`data:${e};base64,`;for(let i=0,a=t.length;i<a;i+=3){const e=255&t[i],s=255&t[i+1],o=255&t[i+2];n+=r[e>>2]+r[(3&e)<<4|s>>4]+r[i+1<a?(15&s)<<2|o>>6:64]+r[i+2<a?63&o:64]}return n},e.createPromiseCapability=function(){const t=Object.create(null);let e=!1;return Object.defineProperty(t,"settled",{get:()=>e}),t.promise=new Promise(function(s,r){t.resolve=function(t){e=!0,s(t)},t.reject=function(t){e=!0,r(t)}}),t},e.createValidAbsoluteUrl=function(t,e){if(!t)return null;try{const s=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(s))return s}catch(s){}return null},e.escapeString=function(t){return t.replace(/([()\\\n\r])/g,t=>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`)},e.getModificationDate=function(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function(){return n},e.info=function(t){n>=r.INFOS&&console.log(`Info: ${t}`)},e.isArrayBuffer=function(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let s=0,r=t.length;s<r;s++)if(t[s]!==e[s])return!1;return!0},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.isBool=function(t){return"boolean"==typeof t},e.isNum=function(t){return"number"==typeof t},e.isSameOrigin=function(t,e){let s;try{if(s=new URL(t),!s.origin||"null"===s.origin)return!1}catch(n){return!1}const r=new URL(e,s);return s.origin===r.origin},e.isString=function(t){return"string"==typeof t},e.objectFromMap=function(t){const e=Object.create(null);for(const[s,r]of t)e[s]=r;return e},e.objectSize=function(t){return Object.keys(t).length},e.removeNullCharacters=function(t){return"string"!=typeof t?(i("The argument for removeNullCharacters must be a string."),t):t.replace(h,"")},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(n=t)},e.shadow=l,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=d,e.stringToPDFString=function(t){const e=t.length,s=[];if("\xfe"===t[0]&&"\xff"===t[1])for(let r=2;r<e;r+=2)s.push(String.fromCharCode(t.charCodeAt(r)<<8|t.charCodeAt(r+1)));else if("\xff"===t[0]&&"\xfe"===t[1])for(let r=2;r<e;r+=2)s.push(String.fromCharCode(t.charCodeAt(r+1)<<8|t.charCodeAt(r)));else for(let r=0;r<e;++r){const e=f[t.charCodeAt(r)];s.push(e?String.fromCharCode(e):t.charAt(r))}return s.join("")},e.stringToUTF16BEString=function(t){const e=["\xfe\xff"];for(let s=0,r=t.length;s<r;s++){const r=t.charCodeAt(s);e.push(String.fromCharCode(r>>8&255),String.fromCharCode(255&r))}return e.join("")},e.stringToUTF8String=function(t){return decodeURIComponent(escape(t))},e.unreachable=a,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=i,e.VerbosityLevel=e.Util=e.UNSUPPORTED_FEATURES=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.StreamType=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.IsLittleEndianCached=e.IsEvalSupportedCached=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,s(3),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"},e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const r={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=r,e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let n=r.WARNINGS;function i(t){n>=r.WARNINGS&&console.log(`Warning: ${t}`)}function a(t){throw new Error(t)}function o(t,e){t||a(e)}function l(t,e,s){return Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!1}),s}const c=function(){function t(e){this.constructor===t&&a("Cannot initialize BaseException."),this.message=e,this.name=this.constructor.name}return t.prototype=new Error,t.constructor=t,t}();e.BaseException=c,e.PasswordException=class extends c{constructor(t,e){super(t),this.code=e}},e.UnknownErrorException=class extends c{constructor(t,e){super(t),this.details=e}},e.InvalidPDFException=class extends c{},e.MissingPDFException=class extends c{},e.UnexpectedResponseException=class extends c{constructor(t,e){super(t),this.status=e}},e.FormatError=class extends c{},e.AbortException=class extends c{};const h=/\x00/g;function d(t){o("string"==typeof t,"Invalid argument for stringToBytes");const e=t.length,s=new Uint8Array(e);for(let r=0;r<e;++r)s[r]=255&t.charCodeAt(r);return s}function u(t){return void 0!==t.length?t.length:(o(void 0!==t.byteLength,"arrayByteLength - invalid argument."),t.byteLength)}e.IsLittleEndianCached={get value(){return l(this,"value",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}},e.IsEvalSupportedCached={get value(){return l(this,"value",function(){try{return new Function(""),!0}catch(t){return!1}}())}};const p=[...Array(256).keys()].map(t=>t.toString(16).padStart(2,"0"));class g{static makeHexColor(t,e,s){return`#${p[t]}${p[e]}${p[s]}`}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s]}static getAxialAlignedBoundingBox(t,e){const s=g.applyTransform(t,e),r=g.applyTransform(t.slice(2,4),e),n=g.applyTransform([t[0],t[3]],e),i=g.applyTransform([t[2],t[1]],e);return[Math.min(s[0],r[0],n[0],i[0]),Math.min(s[1],r[1],n[1],i[1]),Math.max(s[0],r[0],n[0],i[0]),Math.max(s[1],r[1],n[1],i[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],r=t[2]*e[1]+t[3]*e[3],n=(s+r)/2,i=Math.sqrt((s+r)**2-4*(s*r-(t[2]*e[0]+t[3]*e[2])*(t[0]*e[1]+t[1]*e[3])))/2,a=n-i||1;return[Math.sqrt(n+i||1),Math.sqrt(a)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){function s(t,e){return t-e}const r=[t[0],t[2],e[0],e[2]].sort(s),n=[t[1],t[3],e[1],e[3]].sort(s),i=[];return t=g.normalizeRect(t),e=g.normalizeRect(e),r[0]===t[0]&&r[1]===e[0]||r[0]===e[0]&&r[1]===t[0]?(i[0]=r[1],i[2]=r[2],n[0]===t[1]&&n[1]===e[1]||n[0]===e[1]&&n[1]===t[1]?(i[1]=n[1],i[3]=n[2],i):null):null}}e.Util=g;const f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364]},(t,e,s)=>{s(4)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const s=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=s},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_node_utils=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_api_compatibility=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const e=new PDFDocumentLoadingTask;let s;if("string"==typeof t||t instanceof URL)s={url:t};else if((0,_util.isArrayBuffer)(t))s={data:t};else if(t instanceof PDFDataRangeTransport)s={range:t};else{if("object"!=typeof t)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");s=t}const r=Object.create(null);let n=null,i=null;for(const l in s){const t=s[l];switch(l){case"url":if("undefined"!=typeof window)try{r[l]=new URL(t,window.location).href;continue}catch(o){(0,_util.warn)(`Cannot create valid URL: "${o}".`)}else if("string"==typeof t||t instanceof URL){r[l]=t.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":n=t;continue;case"worker":i=t;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&t instanceof Buffer)r[l]=new Uint8Array(t);else{if(t instanceof Uint8Array)break;if("string"==typeof t)r[l]=(0,_util.stringToBytes)(t);else if("object"!=typeof t||null===t||isNaN(t.length)){if(!(0,_util.isArrayBuffer)(t))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");r[l]=new Uint8Array(t)}else r[l]=new Uint8Array(t)}continue}r[l]=t}if(r.rangeChunkSize=r.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.fontExtraProperties=!0===r.fontExtraProperties,r.pdfBug=!0===r.pdfBug,r.enableXfa=!0===r.enableXfa,("string"!=typeof r.docBaseUrl||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),void 0===r.ownerDocument&&(r.ownerDocument=globalThis.document),"boolean"!=typeof r.disableRange&&(r.disableRange=!1),"boolean"!=typeof r.disableStream&&(r.disableStream=!1),"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!i){const t={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};i=t.port?PDFWorker.fromPort(t):new PDFWorker(t),e._worker=i}const a=e.docId;return i.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(i,r,n,a),s=new Promise(function(t){let e;n?e=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},n):r.data||(e=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),t(e)});return Promise.all([t,s]).then(function([t,s]){if(e.destroyed)throw new Error("Loading aborted");const n=new _message_handler.MessageHandler(a,t,i.port);n.postMessageTransfers=i.postMessageTransfers;const o=new WorkerTransport(n,e,s,r);e._transport=o,n.send("Ready",null)})}).catch(e._capability.reject),e}function _fetchDocument(t,e,s,r){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(s&&(e.length=s.length,e.initialData=s.initialData,e.progressiveDone=s.progressiveDone,e.contentDispositionFilename=s.contentDispositionFilename),t.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.9.359",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,postMessageTransfers:t.postMessageTransfers,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa}).then(function(e){if(t.destroyed)throw new Error("Worker was destroyed");return e}))}exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const PDFDocumentLoadingTask=function(){let t=0;return class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}}();class PDFDataRangeTransport{constructor(t,e,s=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}get isPureXfa(){return this._pdfInfo.isPureXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return arguments.length>0&&(0,_display_utils.deprecated)("saveDocument no longer accepts any options."),this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,s,r,n=!1){this._pageIndex=t,this._pageInfo=e,this._ownerDocument=r,this._transport=s,this._stats=n?new _display_utils.StatTimer:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:n=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:s,offsetY:r,dontFlip:n})}getAnnotations({intent:t=null}={}){return(!this._annotationsPromise||this._annotationsIntent!==t)&&(this._annotationsPromise=this._transport.getAnnotations(this._pageIndex,t),this._annotationsIntent=t),this._annotationsPromise}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){return this._xfaPromise||(this._xfaPromise=this._transport.getPageXfa(this._pageIndex))}render({canvasContext:t,viewport:e,intent:s="display",renderInteractiveForms:r=!1,transform:n=null,imageLayer:i=null,canvasFactory:a=null,background:o=null,includeAnnotationStorage:l=!1,optionalContentConfigPromise:c=null}){var h,d;void 0!==(null==(h=arguments[0])?void 0:h.annotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts an `annotationStorage` option, please use the `includeAnnotationStorage`-boolean instead."),l||(l=!!arguments[0].annotationStorage)),this._stats&&this._stats.time("Overall");const u="print"===s?"print":"display";this.pendingCleanup=!1,c||(c=this._transport.getOptionalContentConfig());let p=this._intentStates.get(u);p||(p=Object.create(null),this._intentStates.set(u,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const g=a||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),f=l?this._transport.annotationStorage.serializable:null;p.displayReadyCapability||(p.displayReadyCapability=(0,_util.createPromiseCapability)(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:u,renderInteractiveForms:!0===r,annotationStorage:f}));const m=t=>{p.renderTasks.delete(A),(this.cleanupAfterRender||"print"===u)&&(this.pendingCleanup=!0),this._tryCleanup(),t?(A.capability.reject(t),this._abortOperatorList({intentState:p,reason:t})):A.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},A=new InternalRenderTask({callback:m,params:{canvasContext:t,viewport:e,transform:n,imageLayer:i,background:o},objs:this.objs,commonObjs:this.commonObjs,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:g,useRequestAnimationFrame:"print"!==u,pdfBug:this._pdfBug});((d=p).renderTasks||(d.renderTasks=new Set)).add(A);const v=A.task;return Promise.all([p.displayReadyCapability.promise,c]).then(([t,e])=>{this.pendingCleanup?m():(this._stats&&this._stats.time("Rendering"),A.initializeGraphics({transparency:t,optionalContentConfig:e}),A.operatorListChanged())}).catch(m),v}getOperatorList(){const t="oplist";let e,s=this._intentStates.get(t);var r;return s||(s=Object.create(null),this._intentStates.set(t,s)),s.opListReadCapability||(e=Object.create(null),e.operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(e))},s.opListReadCapability=(0,_util.createPromiseCapability)(),((r=s).renderTasks||(r.renderTasks=new Set)).add(e),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:t})),s.opListReadCapability.promise}streamTextContent({normalizeWhitespace:t=!1,disableCombineTextItems:e=!1,includeMarkedContent:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===t,combineTextItems:!0!==e,includeMarkedContent:!0===s},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){const e=this.streamTextContent(t);return new Promise(function(t,s){const r=e.getReader(),n={items:[],styles:Object.create(null)};!function e(){r.read().then(function({value:s,done:r}){r?t(n):(Object.assign(n.styles,s.styles),n.items.push(...s.items),e())},s)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const t=[];for(const[e,s]of this._intentStates)if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==e)for(const r of s.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),this._annotationsPromise=null,this._jsActionsPromise=null,this._xfaPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:e,operatorList:s}of this._intentStates.values())if(e.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationsPromise=null,this._jsActionsPromise=null,this._xfaPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);!s||(this._stats&&this._stats.timeEnd("Page Request"),s.displayReadyCapability&&s.displayReadyCapability.resolve(t))}_renderPageChunk(t,e){for(let s=0,r=t.length;s<r;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList(t){(0,_util.assert)(t.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const e=this._transport.messageHandler.sendWithStream("GetOperatorList",t).getReader(),s=this._intentStates.get(t.intent);s.streamReader=e;const r=()=>{e.read().then(({value:t,done:e})=>{e?s.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,s),r())},t=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const t of s.renderTasks)t.operatorListChanged();this._tryCleanup()}if(s.displayReadyCapability)s.displayReadyCapability.reject(t);else{if(!s.opListReadCapability)throw t;s.opListReadCapability.reject(t)}}})};r()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if((0,_util.assert)(e instanceof Error||"object"==typeof e&&null!==e,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),t.streamReader){if(!s){if(t.renderTasks.size>0)return;if(e instanceof _display_utils.RenderingCancelledException)return void(t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:e,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(t.streamReader.cancel(new _util.AbortException(null==e?void 0:e.message)),t.streamReader=null,!this._transport.destroyed){for(const[e,s]of this._intentStates)if(s===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve(void 0)}postMessage(t,e){const s=new WeakMap,r={data:function t(r){var n;if("object"!=typeof r||null===r)return r;if(s.has(r))return s.get(r);let i,a;if((i=r.buffer)&&(0,_util.isArrayBuffer)(i))return a=(null==e?void 0:e.includes(i))?new r.constructor(i,r.byteOffset,r.byteLength):new r.constructor(r),s.set(r,a),a;if(r instanceof Map){a=new Map,s.set(r,a);for(const[e,s]of r)a.set(e,t(s));return a}if(r instanceof Set){a=new Set,s.set(r,a);for(const e of r)a.add(t(e));return a}if(r instanceof URL)throw new Error(`LoopbackPort.postMessage - cannot clone: ${r}`);a=Array.isArray(r)?[]:Object.create(null),s.set(r,a);for(const e in r){let s,i=r;for(;!(s=Object.getOwnPropertyDescriptor(i,e));)i=Object.getPrototypeOf(i);if(void 0!==s.value){if("function"==typeof s.value){if(null==(n=r.hasOwnProperty)?void 0:n.call(r,e))throw new Error(`LoopbackPort.postMessage - cannot clone: ${r[e]}`);continue}a[e]=t(s.value)}}return a}(t)};this._deferred.then(()=>{for(const t of this._listeners)t.call(this,r)})}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const s=this._listeners.indexOf(e);this._listeners.splice(s,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function(){var ee;const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document&&"currentScript"in document){const t=null==(ee=document.currentScript)?void 0:ee.src;t&&(fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){var t;let e;try{e=null==(t=globalThis.pdfjsWorker)?void 0:t.WorkerMessageHandler}catch(s){}return e||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler});return function(){return _ref2.apply(this,arguments)}}();return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(t){return URL.createObjectURL(new Blob(["importScripts('"+t+"');"]))}class PDFWorker{constructor({name:t=null,port:e=null,verbosity:s=(0,_util.getVerbosityLevel)()}={}){if(e&&pdfWorkerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=t,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=s,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return pdfWorkerPorts.set(e,this),void this._initializeFromPort(e);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let e=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,e)||(e=createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),s=new _message_handler.MessageHandler("main","worker",t),r=()=>{t.removeEventListener("error",n),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||r()};t.addEventListener("error",n),s.on("test",e=>{t.removeEventListener("error",n),this.destroyed?r():e?(this._messageHandler=s,this._port=t,this._webWorker=t,e.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),t.terminate())}),s.on("ready",e=>{if(t.removeEventListener("error",n),this.destroyed)r();else try{i()}catch(s){this._setupFakeWorker()}});const i=()=>{const t=new Uint8Array([this.postMessageTransfers?255:0]);try{s.send("test",t,[t.buffer])}catch(e){(0,_util.warn)("Cannot use postMessage transfers."),t[0]=0,s.send("test",t)}};return void i()}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const s="fake"+nextFakeWorkerId++,r=new _message_handler.MessageHandler(s+"_worker",s,e);t.setup(r,e);const n=new _message_handler.MessageHandler(s,s+"_worker",e);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(t.port)?pdfWorkerPorts.get(t.port):new PDFWorker(t)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(t,e,s,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:r.ownerDocument}),this._params=r,this.CMapReaderFactory=new r.CMapReaderFactory({baseUrl:r.cMapUrl,isCompressed:r.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.pageCache)s&&t.push(s._destroy());this.pageCache.length=0,this.pagePromises.length=0,this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then(function({value:t,done:s}){s?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}}),t.on("ReaderHeadersReady",t=>{const s=(0,_util.createPromiseCapability)(),r=this._fullReader;return r.headersReady.then(()=>{(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&e.onProgress&&e.onProgress(this._lastProgress),r.onProgress=t=>{e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}),s.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},s.reject),s.promise}),t.on("GetRangeReader",(t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(t.begin,t.end);s?(e.onPull=()=>{s.read().then(function({value:t,done:s}){s?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{s.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}):e.close()}),t.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,e._capability.resolve(new PDFDocumentProxy(t,this))}),t.on("DocException",function(t){let s;switch(t.name){case"PasswordException":s=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":s=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(t.message,t.details)}s instanceof Error||(0,_util.warn)("DocException - expected a valid Error."),e._capability.reject(s)}),t.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),e.onPassword){const r=t=>{this._passwordCapability.resolve({password:t})};try{e.onPassword(r,t.code)}catch(s){this._passwordCapability.reject(s)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),t.on("DataLoaded",t=>{e.onProgress&&e.onProgress({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),t.on("StartRenderPage",t=>{this.destroyed||this.pageCache[t.pageIndex]._startRenderPage(t.transparency,t.intent)}),t.on("commonobj",e=>{var s;if(this.destroyed)return;const[r,n,i]=e;if(!this.commonObjs.has(r))switch(n){case"Font":const e=this._params;if("error"in i){const t=i.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(r,t);break}let a=null;e.pdfBug&&(null==(s=globalThis.FontInspector)?void 0:s.enabled)&&(a={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}});const o=new _font_loader.FontFaceObject(i,{isEvalSupported:e.isEvalSupported,disableFontFace:e.disableFontFace,ignoreErrors:e.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:a});this.fontLoader.bind(o).catch(e=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!e.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(r,o)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${n}`)}}),t.on("obj",t=>{var e;if(this.destroyed)return;const[s,r,n,i]=t,a=this.pageCache[r];if(!a.objs.has(s))switch(n){case"Image":a.objs.resolve(s,i),(null==(e=null==i?void 0:i.data)?void 0:e.length)>8e6&&(a.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${n}`)}}),t.on("DocProgress",t=>{this.destroyed||e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",(t,e)=>{if(this.destroyed)return void e.error(new Error("Worker was destroyed"));let s=!1;e.onPull=()=>{s?e.close():(s=!0,this.CMapReaderFactory.fetch(t).then(function(t){e.enqueue(t,1,[t.cMapData.buffer])}).catch(function(t){e.error(t)}))}})}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request"));const e=t-1;if(e in this.pagePromises)return this.pagePromises[e];const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(t=>{if(this.destroyed)throw new Error("Transport destroyed");const s=new PDFPageProxy(e,t,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[e]=s,s});return this.pagePromises[e]=s,s}getPageIndex(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch(function(t){return Promise.reject(new Error(t))})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}saveDocument(){var t,e;return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(e=null==(t=this._fullReader)?void 0:t.filename)?e:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getPageXfa(t){return this.messageHandler.sendWithPromise("GetPageXfa",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>{var e,s,r,n;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:null!=(s=null==(e=this._fullReader)?void 0:e.filename)?s:null,contentLength:null!=(n=null==(r=this._fullReader)?void 0:r.contentLength)?n:null}})}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(t=!1){var e=this;return _asyncToGenerator(function*(){if(yield e.messageHandler.sendWithPromise("Cleanup",null),!e.destroyed){for(let t=0,s=e.pageCache.length;t<s;t++){const s=e.pageCache[t];if(s&&!s.cleanup())throw new Error(`startCleanup: Page ${t+1} is currently rendering.`)}e.commonObjs.clear(),t||e.fontLoader.clear(),e._hasJSActionsPromise=null}})()}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,disableFontFace:t.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(t,e=null){if(e)return this._ensureObj(t).capability.promise.then(e),null;const s=this._objs[t];if(!s||!s.resolved)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this._objs[t];return(null==e?void 0:e.resolved)||!1}resolve(t,e){const s=this._ensureObj(t);s.resolved=!0,s.data=e,s.capability.resolve(e)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(t){this._internalRenderTask=t,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function(){const t=new WeakSet;return class{constructor({callback:t,params:e,objs:s,commonObjs:r,operatorList:n,pageIndex:i,canvasFactory:a,useRequestAnimationFrame:o=!1,pdfBug:l=!1}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=r,this.operatorListIdx=null,this.operatorList=n,this._pageIndex=i,this.canvasFactory=a,this._pdfBug=l,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===o&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:s}){var r;if(this.cancelled)return;if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.add(this._canvas)}this._pdfBug&&(null==(r=globalThis.StepperManager)?void 0:r.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:a,imageLayer:o,background:l}=this.params;this.gfx=new _canvas.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,o,s),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return _asyncToGenerator(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),e._canvas&&t.delete(e._canvas),e.callback())))})()}}}(),version="2.9.359";exports.version=version;const build="e667c8cbc";exports.build=build},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=s(2);class n{constructor({docId:t,onUnsupportedFeature:e,ownerDocument:s=globalThis.document}){this.constructor===n&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=t,this._onUnsupportedFeature=e,this._document=s,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}insertRule(t){let e=this.styleElement;e||(e=this.styleElement=this._document.createElement("style"),e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(e));const s=e.sheet;s.insertRule(t,s.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(t){var e=this;return _asyncToGenerator(function*(){if(t.attached||t.missingFile)return;if(t.attached=!0,e.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){e.addNativeFontFace(s);try{yield s.loaded}catch(n){throw e._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const s=t.createFontFaceRule();if(s){if(e.insertRule(s),e.isSyncFontLoadingSupported)return;yield new Promise(r=>{const n=e._queueLoadingCallback(r);e._prepareFontLoadEvent([s],[t],n)})}})()}_queueLoadingCallback(t){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var t;return(0,r.shadow)(this,"isFontLoadingAPISupported",!!(null==(t=this._document)?void 0:t.fonts))}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(t,e,s){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let i;e.FontLoader=i,e.FontLoader=i=class extends n{constructor(t){super(t),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;if("undefined"==typeof navigator)t=!0;else{const e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==e?void 0:e[1])>=14&&(t=!0)}return(0,r.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingContext,s={id:"pdfjs-font-loading-"+e.nextRequestId++,done:!1,complete:function(){for((0,r.assert)(!s.done,"completeRequest() cannot be called twice."),s.done=!0;e.requests.length>0&&e.requests[0].done;){const t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(s),s}get _loadTestFont(){return(0,r.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e,s){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,s,r){return t.substring(0,e)+r+t.substring(e+s)}let a,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;const d=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=i(u,976,d.length,d);const p=1482184792;let g=n(u,16);for(a=0,o=d.length-3;a<o;a+=4)g=g-p+n(d,a)|0;a<d.length&&(g=g-p+n(d+"XXX",a)|0),u=i(u,16,4,(0,r.string32)(g));const f=`url(data:font/opentype;base64,${btoa(u)});`;this.insertRule(`@font-face {font-family:"${d}";src:${f}}`);const m=[];for(const r of e)m.push(r.loadedName);m.push(d);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const r of m){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=r,A.appendChild(t)}this._document.body.appendChild(A),function t(e,s){if(h++,h>30)return(0,r.warn)("Load test font never loaded."),void s();c.font="30px "+e,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?s():setTimeout(t.bind(null,e,s))}(d,()=>{this._document.body.removeChild(A),s.complete()})}},e.FontFaceObject=class{constructor(t,{isEvalSupported:e=!0,disableFontFace:s=!1,ignoreErrors:r=!1,onUnsupportedFeature:n,fontRegistry:i=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.isEvalSupported=!1!==e,this.disableFontFace=!0===s,this.ignoreErrors=!0===r,this._onUnsupportedFeature=n,this.fontRegistry=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=(0,r.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let s;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else s=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,e),s}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let s;try{s=t.get(this.loadedName+"_path_"+e)}catch(n){if(!this.ignoreErrors)throw n;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${n}".`),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&r.IsEvalSupportedCached.value){const t=[];for(const e of s){const s=void 0!==e.args?e.args.join(","):"";t.push("c.",e.cmd,"(",s,");\n")}return this.compiledGlyphs[e]=new Function("c","size",t.join(""))}return this.compiledGlyphs[e]=function(t,e){for(const r of s)"scale"===r.cmd&&(r.args=[e,-e]),t[r.cmd].apply(t,r.args)}}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeCMapReaderFactory=e.NodeCanvasFactory=void 0;var r=s(1),n=s(4),i=s(2);let a=class{constructor(){(0,i.unreachable)("Not implemented: NodeCanvasFactory")}};e.NodeCanvasFactory=a;let o=class{constructor(){(0,i.unreachable)("Not implemented: NodeCMapReaderFactory")}};e.NodeCMapReaderFactory=o,n.isNodeJS&&(e.NodeCanvasFactory=a=class extends r.BaseCanvasFactory{create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=__webpack_require__(3414).createCanvas(t,e);return{canvas:s,context:s.getContext("2d")}}},e.NodeCMapReaderFactory=o=class extends r.BaseCMapReaderFactory{_fetchData(t,e){return new Promise((s,r)=>{__webpack_require__(172).readFile(t,(t,n)=>{!t&&n?s({cMapData:new Uint8Array(n),compressionType:e}):r(new Error(t))})})}})},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationStorage=void 0;var r=s(2);e.AnnotationStorage=class{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(t,e){const s=this._storage.get(t);return void 0!==s?s:e}setValue(t,e){const s=this._storage.get(t);let r=!1;if(void 0!==s)for(const[n,i]of Object.entries(e))s[n]!==i&&(r=!0,s[n]=i);else this._storage.set(t,e),r=!0;r&&this._setModified()}getAll(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.apiCompatibilityParams=void 0;var r=s(4);const n=Object.create(null);r.isNodeJS&&(n.disableFontFace=!0);const i=Object.freeze(n);e.apiCompatibilityParams=i},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=s(2),n=s(11);const i=4096,a=16;function o(t){if(!t.mozCurrentTransform){t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._originalResetTransform=t.resetTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[];try{const e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"lineWidth");t._setLineWidth=e.set,t._getLineWidth=e.get,Object.defineProperty(t,"lineWidth",{set:function(t){this._setLineWidth(1.000001*t)},get:function(){return this._getLineWidth()}})}catch(e){}Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){const[t,e,s,r,n,i]=this._transformMatrix,a=t*r-e*s,o=e*s-t*r;return[r/a,e/o,s/o,t/a,(r*n-s*i)/o,(e*n-t*i)/a]}}),t.save=function(){const t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){const t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){const s=this._transformMatrix;s[4]=s[0]*t+s[2]*e+s[4],s[5]=s[1]*t+s[3]*e+s[5],this._originalTranslate(t,e)},t.scale=function(t,e){const s=this._transformMatrix;s[0]=s[0]*t,s[1]=s[1]*t,s[2]=s[2]*e,s[3]=s[3]*e,this._originalScale(t,e)},t.transform=function(e,s,r,n,i,a){const o=this._transformMatrix;this._transformMatrix=[o[0]*e+o[2]*s,o[1]*e+o[3]*s,o[0]*r+o[2]*n,o[1]*r+o[3]*n,o[0]*i+o[2]*a+o[4],o[1]*i+o[3]*a+o[5]],t._originalTransform(e,s,r,n,i,a)},t.setTransform=function(e,s,r,n,i,a){this._transformMatrix=[e,s,r,n,i,a],t._originalSetTransform(e,s,r,n,i,a)},t.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],t._originalResetTransform()},t.rotate=function(t){const e=Math.cos(t),s=Math.sin(t),r=this._transformMatrix;this._transformMatrix=[r[0]*e+r[2]*s,r[1]*e+r[3]*s,r[0]*-s+r[2]*e,r[1]*-s+r[3]*e,r[4],r[5]],this._originalRotate(t)}}}class l{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s,r){let n;return void 0!==this.cache[t]?(n=this.cache[t],this.canvasFactory.reset(n,e,s),n.context.setTransform(1,0,0,1,0,0)):(n=this.canvasFactory.create(e,s),this.cache[t]=n),r&&o(n.context),n}clear(){for(const t in this.cache)this.canvasFactory.destroy(this.cache[t]),delete this.cache[t]}}class c{constructor(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t,this.y=e}}const h=function(){function t(t,e,s=null){if("undefined"!=typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const n=e.height,i=e.width,o=n%a,l=(n-o)/a,c=0===o?l:l+1,h=t.createImageData(i,a);let d,u=0;const p=e.data,g=h.data;let f,m,A,v,b,_,C,y;if(s)switch(s.length){case 1:b=s[0],_=s[0],C=s[0],y=s[0];break;case 4:b=s[0],_=s[1],C=s[2],y=s[3]}if(e.kind===r.ImageKind.GRAYSCALE_1BPP){const e=p.byteLength,s=new Uint32Array(g.buffer,0,g.byteLength>>2),n=s.length,v=i+7>>3;let b=4294967295,_=r.IsLittleEndianCached.value?4278190080:255;for(y&&255===y[0]&&0===y[255]&&([b,_]=[_,b]),f=0;f<c;f++){for(A=f<l?a:o,d=0,m=0;m<A;m++){const t=e-u;let r=0;const n=t>v?i:8*t-7,a=-8&n;let o=0,l=0;for(;r<a;r+=8)l=p[u++],s[d++]=128&l?b:_,s[d++]=64&l?b:_,s[d++]=32&l?b:_,s[d++]=16&l?b:_,s[d++]=8&l?b:_,s[d++]=4&l?b:_,s[d++]=2&l?b:_,s[d++]=1&l?b:_;for(;r<n;r++)0===o&&(l=p[u++],o=128),s[d++]=l&o?b:_,o>>=1}for(;d<n;)s[d++]=0;t.putImageData(h,0,f*a)}}else if(e.kind===r.ImageKind.RGBA_32BPP){const e=!!(b||_||C);for(m=0,v=i*a*4,f=0;f<l;f++){if(g.set(p.subarray(u,u+v)),u+=v,e)for(let t=0;t<v;t+=4)b&&(g[t+0]=b[g[t+0]]),_&&(g[t+1]=_[g[t+1]]),C&&(g[t+2]=C[g[t+2]]);t.putImageData(h,0,m),m+=a}if(f<c){if(v=i*o*4,g.set(p.subarray(u,u+v)),e)for(let t=0;t<v;t+=4)b&&(g[t+0]=b[g[t+0]]),_&&(g[t+1]=_[g[t+1]]),C&&(g[t+2]=C[g[t+2]]);t.putImageData(h,0,m)}}else{if(e.kind!==r.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);{const e=!!(b||_||C);for(A=a,v=i*A,f=0;f<c;f++){for(f>=l&&(A=o,v=i*A),d=0,m=v;m--;)g[d++]=p[u++],g[d++]=p[u++],g[d++]=p[u++],g[d++]=255;if(e)for(let t=0;t<d;t+=4)b&&(g[t+0]=b[g[t+0]]),_&&(g[t+1]=_[g[t+1]]),C&&(g[t+2]=C[g[t+2]]);t.putImageData(h,0,f*a)}}}}function e(t,e){const s=e.height,r=e.width,n=s%a,i=(s-n)/a,o=0===n?i:i+1,l=t.createImageData(r,a);let c=0;const h=e.data,d=l.data;for(let u=0;u<o;u++){const e=u<i?a:n;let s=3;for(let t=0;t<e;t++){let t,e=0;for(let n=0;n<r;n++)e||(t=h[c++],e=128),d[s]=t&e?0:255,s+=4,e>>=1}t.putImageData(l,0,u*a)}}function s(t,e){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let r=0,n=s.length;r<n;r++){const n=s[r];void 0!==t[n]&&(e[n]=t[n])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function h(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function d(t,e,s,r){const n=t.length;for(let i=3;i<n;i+=4){const n=t[i];if(0===n)t[i-3]=e,t[i-2]=s,t[i-1]=r;else if(n<255){const a=255-n;t[i-3]=t[i-3]*n+e*a>>8,t[i-2]=t[i-2]*n+s*a>>8,t[i-1]=t[i-1]*n+r*a>>8}}}function u(t,e,s){const r=t.length;for(let n=3;n<r;n+=4)e[n]=e[n]*(s?s[t[n]]:t[n])*.00392156862745098|0}function p(t,e,s){const r=t.length;for(let n=3;n<r;n+=4){const r=77*t[n-3]+152*t[n-2]+28*t[n-1];e[n]=s?e[n]*s[r>>8]>>8:e[n]*r>>16}}function g(t,e,s){const r=e.canvas,n=e.context;t.setTransform(e.scaleX,0,0,e.scaleY,e.offsetX,e.offsetY),function(t,e,s,r,n,i,a){const o=!!i,l=o?i[0]:0,c=o?i[1]:0,h=o?i[2]:0;let g;g="Luminosity"===n?p:u;const f=Math.min(r,Math.ceil(1048576/s));for(let u=0;u<r;u+=f){const n=Math.min(f,r-u),i=t.getImageData(0,u,s,n),p=e.getImageData(0,u,s,n);o&&d(i.data,l,c,h),g(i.data,p.data,a),t.putImageData(p,0,u)}}(n,s,r.width,r.height,e.subtype,e.backdrop,e.transferMap),t.drawImage(r,0,0)}const f=["butt","round","square"],m=["miter","round","bevel"],A={},v={};class b{constructor(t,e,s,r,n,i){this.ctx=t,this.current=new c,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=r,this.imageLayer=n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=i,this.cachedCanvases=new l(this.canvasFactory),t&&o(t),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:r=null}){const n=this.ctx.canvas.width,i=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=r||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,n,i),this.ctx.restore(),s){const t=this.cachedCanvases.getCanvas("transparent",n,i,!0);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),h(this.ctx),t&&this.ctx.transform.apply(this.ctx,t),this.ctx.transform.apply(this.ctx,e.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(t,e,s,n){const i=t.argsArray,a=t.fnArray;let o=e||0;const l=i.length;if(l===o)return o;const c=l-o>10&&"function"==typeof s,h=c?Date.now()+15:0;let d=0;const u=this.commonObjs,p=this.objs;let g;for(;;){if(void 0!==n&&o===n.nextBreakPoint)return n.breakIt(o,s),o;if(g=a[o],g!==r.OPS.dependency)this[g].apply(this,i[o]);else for(const t of i[o]){const e=t.startsWith("g_")?u:p;if(!e.has(t))return e.get(t,s),o}if(o++,o===l)return o;if(c&&++d>10){if(Date.now()>h)return s(),o;d=0}}}endDrawing(){for(;this.stateStack.length||null!==this.current.activeSMask;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.imageLayer&&this.imageLayer.endLayout()}setLineWidth(t){this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=f[t]}setLineJoin(t){this.ctx.lineJoin=m[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;void 0!==s.setLineDash&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let e=0,s=t.length;e<s;e++){const s=t[e],r=s[1];switch(s[0]){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=s[1];break;case"ca":this.current.fillAlpha=s[1],this.ctx.globalAlpha=s[1];break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=r?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=r}}}beginSMaskGroup(){const t=this.current.activeSMask,e=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,t.canvas.width,t.canvas.height,!0),r=this.ctx,n=r.mozCurrentTransform;this.ctx.save();const i=e.context;i.scale(1/t.scaleX,1/t.scaleY),i.translate(-t.offsetX,-t.offsetY),i.transform.apply(i,n),t.startTransformInverse=i.mozCurrentTransformInverse,s(r,i),this.ctx=i,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}suspendSMaskGroup(){const t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),g(this.ctx,this.current.activeSMask,t),this.ctx.restore(),this.ctx.save(),s(t,this.ctx),this.current.resumeSMaskCtx=t;const e=r.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e),t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()}resumeSMaskGroup(){const t=this.ctx;this.ctx=this.current.resumeSMaskCtx,this.groupStack.push(t),this.groupLevel++}endSMaskGroup(){const t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),g(this.ctx,this.current.activeSMask,t),this.ctx.restore(),s(t,this.ctx);const e=r.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)}save(){this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.current.resumeSMaskCtx=null}restore(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null!==this.current.activeSMask&&(0===this.stateStack.length||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null):this.current.activeSMask=null}transform(t,e,s,r,n,i){this.ctx.transform(t,e,s,r,n,i),this._cachedGetSinglePixelWidth=null}constructPath(t,e){const s=this.ctx,n=this.current;let i=n.x,a=n.y;for(let o=0,l=0,c=t.length;o<c;o++)switch(0|t[o]){case r.OPS.rectangle:i=e[l++],a=e[l++];const t=e[l++],n=e[l++],o=i+t,c=a+n;s.moveTo(i,a),0===t||0===n?s.lineTo(o,c):(s.lineTo(o,a),s.lineTo(o,c),s.lineTo(i,c)),s.closePath();break;case r.OPS.moveTo:i=e[l++],a=e[l++],s.moveTo(i,a);break;case r.OPS.lineTo:i=e[l++],a=e[l++],s.lineTo(i,a);break;case r.OPS.curveTo:i=e[l+4],a=e[l+5],s.bezierCurveTo(e[l],e[l+1],e[l+2],e[l+3],i,a),l+=6;break;case r.OPS.curveTo2:s.bezierCurveTo(i,a,e[l],e[l+1],e[l+2],e[l+3]),i=e[l+2],a=e[l+3],l+=4;break;case r.OPS.curveTo3:i=e[l+2],a=e[l+3],s.bezierCurveTo(e[l],e[l+1],i,a,i,a),l+=4;break;case r.OPS.closePath:s.closePath()}n.setCurrentPoint(i,a)}closePath(){this.ctx.closePath()}stroke(t){t=void 0===t||t;const e=this.ctx,s=this.current.strokeColor;if(e.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"==typeof s&&(null==s?void 0:s.getPattern)){const t=this.getSinglePixelWidth();e.save(),e.strokeStyle=s.getPattern(e,this),e.lineWidth=Math.max(t,this.current.lineWidth),e.stroke(),e.restore()}else{const t=this.getSinglePixelWidth();t<0&&-t>=this.current.lineWidth?(e.save(),e.resetTransform(),e.lineWidth=Math.round(this._combinedScaleFactor),e.stroke(),e.restore()):(e.lineWidth=Math.max(t,this.current.lineWidth),e.stroke())}t&&this.consumePath(),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t){t=void 0===t||t;const e=this.ctx,s=this.current.fillColor;let r=!1;this.current.patternFill&&(e.save(),e.fillStyle=s.getPattern(e,this),r=!0),this.contentVisible&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath()}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=A}eoClip(){this.pendingClip=v}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(let s=0;s<t.length;s++){const r=t[s];e.setTransform.apply(e,r.transform),e.translate(r.x,r.y),r.addToPath(e,r.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||r.FONT_IDENTITY_MATRIX,(0===n.fontMatrix[0]||0===n.fontMatrix[3])&&(0,r.warn)("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;let i="normal";s.black?i="900":s.bold&&(i="bold");const a=s.italic?"italic":"normal",o=`"${s.loadedName||"sans-serif"}", ${s.fallbackName}`;let l=e;e<16?l=16:e>100&&(l=100),this.current.fontSizeScale=e/l,this.ctx.font=`${a} ${i} ${l}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,r,n,i){this.current.textMatrix=[t,e,s,r,n,i],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,n,i){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,d=c&r.TextRenderingMode.FILL_STROKE_MASK,u=!!(c&r.TextRenderingMode.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile;let g;(l.disableFontFace||u||p)&&(g=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||p?(a.save(),a.translate(e,s),a.beginPath(),g(a,h),n&&a.setTransform.apply(a,n),(d===r.TextRenderingMode.FILL||d===r.TextRenderingMode.FILL_STROKE)&&a.fill(),(d===r.TextRenderingMode.STROKE||d===r.TextRenderingMode.FILL_STROKE)&&(i&&(a.resetTransform(),a.lineWidth=Math.round(this._combinedScaleFactor)),a.stroke()),a.restore()):((d===r.TextRenderingMode.FILL||d===r.TextRenderingMode.FILL_STROKE)&&a.fillText(t,e,s),(d===r.TextRenderingMode.STROKE||d===r.TextRenderingMode.FILL_STROKE)&&(i?(a.save(),a.moveTo(e,s),a.resetTransform(),a.lineWidth=Math.round(this._combinedScaleFactor),a.strokeText(t,0,0),a.restore()):a.strokeText(t,e,s))),u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:a.mozCurrentTransform,x:e,y:s,fontSize:h,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){s=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(0===n)return;const i=this.ctx,a=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,h=e.textHScale*c,d=t.length,u=s.vertical,p=u?1:-1,g=s.defaultVMetrics,f=n*e.fontMatrix[0],m=e.textRenderingMode===r.TextRenderingMode.FILL&&!s.disableFontFace&&!e.patternFill;let A;if(i.save(),e.patternFill){i.save();const t=e.fillColor.getPattern(i,this);A=i.mozCurrentTransform,i.restore(),i.fillStyle=t}i.transform.apply(i,e.textMatrix),i.translate(e.x,e.y+e.textRise),i.scale(h,c>0?-1:1);let v=e.lineWidth,b=!1;const _=e.textMatrixScale;if(0===_||0===v){const t=e.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(t===r.TextRenderingMode.STROKE||t===r.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,v=this.getSinglePixelWidth(),b=v<0)}else v/=_;1!==a&&(i.scale(a,a),v/=a),i.lineWidth=v;let C,y=0;for(C=0;C<d;++C){const e=t[C];if((0,r.isNum)(e)){y+=p*e*n/1e3;continue}let h=!1;const d=(e.isSpace?l:0)+o,v=e.fontChar,_=e.accent;let x,S,w,P=e.width;if(u){const t=e.vmetric||g,s=-(e.vmetric?t[1]:.5*P)*f;P=t?-t[0]:P,x=s/a,S=(y+t[2]*f)/a}else x=y/a,S=0;if(s.remeasure&&P>0){const t=1e3*i.measureText(v).width/n*a;if(P<t&&this.isFontSubpixelAAEnabled){const e=P/t;h=!0,i.save(),i.scale(e,1),x/=e}else P!==t&&(x+=(P-t)/2e3*n/a)}this.contentVisible&&(e.isInFont||s.missingFile)&&(m&&!_?i.fillText(v,x,S):(this.paintChar(v,x,S,A,b),_&&this.paintChar(_.fontChar,x+n*_.offset.x/a,S-n*_.offset.y/a,A,b))),w=u?P*f-d*c:P*f+d*c,y+=w,h&&i.restore()}u?e.y-=y:e.x+=y*h,i.restore()}showType3Text(t){const e=this.ctx,s=this.current,n=s.font,i=s.fontSize,a=s.fontDirection,o=n.vertical?1:-1,l=s.charSpacing,c=s.wordSpacing,h=s.textHScale*a,d=s.fontMatrix||r.FONT_IDENTITY_MATRIX,u=t.length;let p,g,f,m;if(s.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==i){for(this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,s.textMatrix),e.translate(s.x,s.y),e.scale(h,a),p=0;p<u;++p){if(g=t[p],(0,r.isNum)(g)){m=o*g*i/1e3,this.ctx.translate(m,0),s.x+=m*h;continue}const a=(g.isSpace?c:0)+l,u=n.charProcOperatorList[g.operatorListId];u?(this.contentVisible&&(this.processingType3=g,this.save(),e.scale(i,i),e.transform.apply(e,d),this.executeOperatorList(u),this.restore()),f=r.Util.applyTransform([g.width,0],d)[0]*i+a,e.translate(f,0),s.x+=f*h):(0,r.warn)(`Type3 character "${g.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,r,n,i){this.ctx.rect(s,r,n-s,i-r),this.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const s=t[1],r=this.baseTransform||this.ctx.mozCurrentTransform.slice();e=new n.TilingPattern(t,s,this.ctx,{createCanvasGraphics:t=>new b(t,this.commonObjs,this.objs,this.canvasFactory)},r)}else e=(0,n.getShadingPattern)(t);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){const n=r.Util.makeHexColor(t,e,s);this.ctx.strokeStyle=n,this.current.strokeColor=n}setFillRGBColor(t,e,s){const n=r.Util.makeHexColor(t,e,s);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=(0,n.getShadingPattern)(t);e.fillStyle=s.getPattern(e,this,!0);const i=e.mozCurrentTransformInverse;if(i){const t=e.canvas,s=t.width,n=t.height,a=r.Util.applyTransform([0,0],i),o=r.Util.applyTransform([0,n],i),l=r.Util.applyTransform([s,0],i),c=r.Util.applyTransform([s,n],i),h=Math.min(a[0],o[0],l[0],c[0]),d=Math.min(a[1],o[1],l[1],c[1]),u=Math.max(a[0],o[0],l[0],c[0]),p=Math.max(a[1],o[1],l[1],c[1]);this.ctx.fillRect(h,d,u-h,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,e)&&(this.ctx.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save();const e=this.ctx;t.isolated||(0,r.info)("TODO: Support non-isolated groups."),t.knockout&&(0,r.warn)("Knockout groups not supported.");const n=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=r.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform);a=r.Util.intersect(a,[0,0,e.canvas.width,e.canvas.height])||[0,0,0,0];const o=Math.floor(a[0]),l=Math.floor(a[1]);let c=Math.max(Math.ceil(a[2])-o,1),h=Math.max(Math.ceil(a[3])-l,1),d=1,u=1;c>i&&(d=c/i,c=i),h>i&&(u=h/i,h=i);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(p,c,h,!0),f=g.context;f.scale(1/d,1/u),f.translate(-o,-l),f.transform.apply(f,n),t.smask?this.smaskStack.push({canvas:g.canvas,context:f,offsetX:o,offsetY:l,scaleX:d,scaleY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.scale(d,u)),s(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++,this.current.activeSMask=null}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(e.canvas,0,0),this.restore()}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(t,e,s){this.save(),h(this.ctx),this.current=new c,Array.isArray(t)&&4===t.length&&(this.ctx.rect(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.clip(),this.endPath()),this.transform.apply(this,e),this.transform.apply(this,s)}endAnnotation(){this.restore()}paintImageMaskXObject(t){if(!this.contentVisible)return;const s=this.ctx,r=t.width,n=t.height,i=this.current.fillColor,a=this.current.patternFill,o=this.processingType3;if(o&&void 0===o.compiled&&(o.compiled=r<=1e3&&n<=1e3?function(t){const e=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=t.width,r=t.height,n=s+1;let i,a,o,l;const c=new Uint8Array(n*(r+1)),h=s+7&-8,d=t.data,u=new Uint8Array(h*r);let p=0;for(i=0,a=d.length;i<a;i++){const t=d[i];let e=128;for(;e>0;)u[p++]=t&e?0:255,e>>=1}let g=0;for(p=0,0!==u[p]&&(c[0]=1,++g),o=1;o<s;o++)u[p]!==u[p+1]&&(c[o]=u[p]?2:1,++g),p++;for(0!==u[p]&&(c[o]=2,++g),i=1;i<r;i++){p=i*h,l=i*n,u[p-h]!==u[p]&&(c[l]=u[p]?1:8,++g);let t=(u[p]?4:0)+(u[p-h]?8:0);for(o=1;o<s;o++)t=(t>>2)+(u[p+1]?4:0)+(u[p-h+1]?8:0),e[t]&&(c[l+o]=e[t],++g),p++;if(u[p-h]!==u[p]&&(c[l+o]=u[p]?2:4,++g),g>1e3)return null}for(p=h*(r-1),l=i*n,0!==u[p]&&(c[l]=8,++g),o=1;o<s;o++)u[p]!==u[p+1]&&(c[l+o]=u[p]?4:8,++g),p++;if(0!==u[p]&&(c[l+o]=4,++g),g>1e3)return null;const f=new Int32Array([0,n,-1,0,-n,0,0,0,1]),m=[];for(i=0;g&&i<=r;i++){let t=i*n;const e=t+s;for(;t<e&&!c[t];)t++;if(t===e)continue;const r=[t%n,i],a=t;let o=c[t];do{const e=f[o];do{t+=e}while(!c[t]);const s=c[t];5!==s&&10!==s?(o=s,c[t]=0):(o=s&51*o>>4,c[t]&=o>>2|o<<2),r.push(t%n,t/n|0),c[t]||--g}while(a!==t);m.push(r),--i}return function(t){t.save(),t.scale(1/s,-1/r),t.translate(0,-r),t.beginPath();for(let e=0,s=m.length;e<s;e++){const s=m[e];t.moveTo(s[0],s[1]);for(let e=2,r=s.length;e<r;e+=2)t.lineTo(s[e],s[e+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:r,height:n}):null),null==o?void 0:o.compiled)return void o.compiled(s);const l=this.cachedCanvases.getCanvas("maskCanvas",r,n),c=l.context;c.save(),e(c,t),c.globalCompositeOperation="source-in",c.fillStyle=a?i.getPattern(c,this):i,c.fillRect(0,0,r,n),c.restore(),this.paintInlineImageXObject(l.canvas)}paintImageMaskXObjectRepeat(t,s,r=0,n=0,i,a){if(!this.contentVisible)return;const o=t.width,l=t.height,c=this.current.fillColor,h=this.current.patternFill,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),u=d.context;u.save(),e(u,t),u.globalCompositeOperation="source-in",u.fillStyle=h?c.getPattern(u,this):c,u.fillRect(0,0,o,l),u.restore();const p=this.ctx;for(let e=0,g=a.length;e<g;e+=2)p.save(),p.transform(s,r,n,i,a[e],a[e+1]),p.scale(1,-1),p.drawImage(d.canvas,0,0,o,l,0,-1,1,1),p.restore()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,n=this.current.patternFill;for(let i=0,a=t.length;i<a;i++){const a=t[i],o=a.width,l=a.height,c=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=c.context;h.save(),e(h,a),h.globalCompositeOperation="source-in",h.fillStyle=n?r.getPattern(h,this):r,h.fillRect(0,0,o,l),h.restore(),s.save(),s.transform.apply(s,a.transform),s.scale(1,-1),s.drawImage(c.canvas,0,0,o,l,0,-1,1,1),s.restore()}}paintImageXObject(t){if(!this.contentVisible)return;const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,r.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const i=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);if(!i)return void(0,r.warn)("Dependent image isn't ready yet");const a=i.width,o=i.height,l=[];for(let r=0,c=n.length;r<c;r+=2)l.push({transform:[e,0,0,s,n[r],n[r+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(i,l)}paintInlineImageXObject(e){if(!this.contentVisible)return;const s=e.width,r=e.height,n=this.ctx;this.save(),n.scale(1/s,-1/r);const i=n.mozCurrentTransformInverse;let a,o,l,c=Math.max(Math.hypot(i[0],i[1]),1),h=Math.max(Math.hypot(i[2],i[3]),1);"function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data?a=e:(o=this.cachedCanvases.getCanvas("inlineImage",s,r),l=o.context,t(l,e,this.current.transferMaps),a=o.canvas);let d=s,u=r,p="prescale1";for(;c>2&&d>1||h>2&&u>1;){let t=d,e=u;c>2&&d>1&&(t=Math.ceil(d/2),c/=d/t),h>2&&u>1&&(e=Math.ceil(u/2),h/=u/e),o=this.cachedCanvases.getCanvas(p,t,e),l=o.context,l.clearRect(0,0,t,e),l.drawImage(a,0,0,d,u,0,0,t,e),a=o.canvas,d=t,u=e,p="prescale1"===p?"prescale2":"prescale1"}if(n.drawImage(a,0,0,d,u,0,-r,s,r),this.imageLayer){const t=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:e,left:t[0],top:t[1],width:s/i[0],height:r/i[3]})}this.restore()}paintInlineImageXObjectGroup(e,s){if(!this.contentVisible)return;const r=this.ctx,n=e.width,i=e.height,a=this.cachedCanvases.getCanvas("inlineImage",n,i);t(a.context,e,this.current.transferMaps);for(let t=0,o=s.length;t<o;t++){const o=s[t];if(r.save(),r.transform.apply(r,o.transform),r.scale(1,-1),r.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,-1,1,1),this.imageLayer){const t=this.getCanvasPosition(o.x,o.y);this.imageLayer.appendImage({imgData:e,left:t[0],top:t[1],width:n,height:i})}r.restore()}}paintSolidColorImageMask(){!this.contentVisible||this.ctx.fillRect(0,0,1,1)}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){this.markedContentStack.push("OC"===t?{visible:this.optionalContentConfig.isVisible(e)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(){const t=this.ctx;this.pendingClip&&(this.pendingClip===v?t.clip("evenodd"):t.clip(),this.pendingClip=null),t.beginPath()}getSinglePixelWidth(){if(null===this._cachedGetSinglePixelWidth){const t=this.ctx.mozCurrentTransform,e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=t[0]**2+t[2]**2,r=t[1]**2+t[3]**2,n=Math.sqrt(Math.max(s,r))/e;this._cachedGetSinglePixelWidth=s!==r&&this._combinedScaleFactor*n>1?-this._combinedScaleFactor*n:e>Number.EPSILON?n:1}return this._cachedGetSinglePixelWidth}getCanvasPosition(t,e){const s=this.ctx.mozCurrentTransform;return[s[0]*t+s[2]*e+s[4],s[1]*t+s[3]*e+s[5]]}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const n in r.OPS)b.prototype[r.OPS[n]]=b.prototype[n];return b}();e.CanvasGraphics=h},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getShadingPattern=function(t){switch(t[0]){case"RadialAxial":return new l(t);case"Mesh":return new d(t);case"Dummy":return new u}throw new Error(`Unknown IR type: ${t[0]}`)},e.TilingPattern=void 0;var r=s(2);let n;function i(t){return"undefined"!=typeof DOMMatrix?new DOMMatrix(t):(n||(n=document.createElementNS("http://www.w3.org/2000/svg","svg")),n.createSVGMatrix(t))}function a(t,e){if(!e||"undefined"==typeof Path2D)return;const s=e[2]-e[0],r=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],s,r),t.clip(n)}class o{constructor(){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class l extends o{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this._matrix=t[8]}getPattern(t,e,s){const r=e.cachedCanvases.getCanvas("pattern",t.canvas.width,t.canvas.height,!0),n=r.context;let o;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.rect(0,0,n.canvas.width,n.canvas.height),s?n.setTransform.apply(n,t.mozCurrentTransform):(n.setTransform.apply(n,e.baseTransform),this._matrix&&n.transform.apply(n,this._matrix)),a(n,this._bbox),"axial"===this._type?o=n.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(o=n.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)o.addColorStop(i[0],i[1]);n.fillStyle=o,n.fill();const l=t.createPattern(r.canvas,"repeat");return l.setTransform(i(t.mozCurrentTransformInverse)),l}}function c(t,e,s,r,n,i,a,o){const l=e.coords,c=e.colors,h=t.data,d=4*t.width;let u;l[s+1]>l[r+1]&&(u=s,s=r,r=u,u=i,i=a,a=u),l[r+1]>l[n+1]&&(u=r,r=n,n=u,u=a,a=o,o=u),l[s+1]>l[r+1]&&(u=s,s=r,r=u,u=i,i=a,a=u);const p=(l[s]+e.offsetX)*e.scaleX,g=(l[s+1]+e.offsetY)*e.scaleY,f=(l[r]+e.offsetX)*e.scaleX,m=(l[r+1]+e.offsetY)*e.scaleY,A=(l[n]+e.offsetX)*e.scaleX,v=(l[n+1]+e.offsetY)*e.scaleY;if(g>=v)return;const b=c[i],_=c[i+1],C=c[i+2],y=c[a],x=c[a+1],S=c[a+2],w=c[o],P=c[o+1],k=c[o+2],R=Math.round(g),T=Math.round(v);let E,F,M,I,O,D,L,N;for(let q=R;q<=T;q++){if(q<m){let t;t=q<g?0:g===m?1:(g-q)/(g-m),E=p-(p-f)*t,F=b-(b-y)*t,M=_-(_-x)*t,I=C-(C-S)*t}else{let t;t=q>v?1:m===v?0:(m-q)/(m-v),E=f-(f-A)*t,F=y-(y-w)*t,M=x-(x-P)*t,I=S-(S-k)*t}let t;t=q<g?0:q>v?1:(g-q)/(g-v),O=p-(p-A)*t,D=b-(b-w)*t,L=_-(_-P)*t,N=C-(C-k)*t;const e=Math.round(Math.min(E,O)),s=Math.round(Math.max(E,O));let r=d*q+4*e;for(let n=e;n<=s;n++)t=(E-n)/(E-O),t<0?t=0:t>1&&(t=1),h[r++]=F-(F-D)*t|0,h[r++]=M-(M-L)*t|0,h[r++]=I-(I-N)*t|0,h[r++]=255}}function h(t,e,s){const r=e.coords,n=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,h=o-1;for(i=0;i<l;i++){let e=i*o;for(let i=0;i<h;i++,e++)c(t,s,r[e],r[e+1],r[e+o],n[e],n[e+1],n[e+o]),c(t,s,r[e+o+1],r[e+1],r[e+o],n[e+o+1],n[e+1],n[e+o])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)c(t,s,r[i],r[i+1],r[i+2],n[i],n[i+1],n[i+2]);break;default:throw new Error("illegal figure")}}class d extends o{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._matrix=t[6],this._bbox=t[7],this._background=t[8]}_createMeshCanvas(t,e,s){const r=Math.floor(this._bounds[0]),n=Math.floor(this._bounds[1]),i=Math.ceil(this._bounds[2])-r,a=Math.ceil(this._bounds[3])-n,o=Math.min(Math.ceil(Math.abs(i*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=i/o,d=a/l,u={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-n,scaleX:1/c,scaleY:1/d},p=s.getCanvas("mesh",o+4,l+4,!1),g=p.context,f=g.createImageData(o,l);if(e){const t=f.data;for(let s=0,r=t.length;s<r;s+=4)t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=255}for(const m of this._figures)h(f,m,u);return g.putImageData(f,2,2),{canvas:p.canvas,offsetX:r-2*c,offsetY:n-2*d,scaleX:c,scaleY:d}}getPattern(t,e,s){let n;if(a(t,this._bbox),s)n=r.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(n=r.Util.singularValueDecompose2dScale(e.baseTransform),this._matrix){const t=r.Util.singularValueDecompose2dScale(this._matrix);n=[n[0]*t[0],n[1]*t[1]]}const i=this._createMeshCanvas(n,s?null:this._background,e.cachedCanvases);return s||(t.setTransform.apply(t,e.baseTransform),this._matrix&&t.transform.apply(t,this._matrix)),t.translate(i.offsetX,i.offsetY),t.scale(i.scaleX,i.scaleY),t.createPattern(i.canvas,"no-repeat")}}class u extends o{getPattern(){return"hotpink"}}class p{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(t,e,s,r,n){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=s,this.canvasGraphicsFactory=r,this.baseTransform=n}createPatternCanvas(t){const e=this.operatorList,s=this.bbox,n=this.xstep,i=this.ystep,a=this.paintType,o=this.color,l=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+this.tilingType);const c=s[0],h=s[1],d=s[2],u=s[3],p=r.Util.singularValueDecompose2dScale(this.matrix),g=r.Util.singularValueDecompose2dScale(this.baseTransform),f=[p[0]*g[0],p[1]*g[1]],m=this.getSizeAndScale(n,this.ctx.canvas.width,f[0]),A=this.getSizeAndScale(i,this.ctx.canvas.height,f[1]),v=t.cachedCanvases.getCanvas("pattern",m.size,A.size,!0),b=l.createCanvasGraphics(v.context);return b.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(b,a,o),b.transform(m.scale,0,0,A.scale,0,0),this.clipBbox(b,s,c,h,d,u),b.baseTransform=b.ctx.mozCurrentTransform.slice(),b.executeOperatorList(e),b.endDrawing(),{canvas:v.canvas,scaleX:m.scale,scaleY:A.scale}}getSizeAndScale(t,e,s){t=Math.abs(t);const r=Math.max(p.MAX_PATTERN_SIZE,e);let n=Math.ceil(t*s);return n>=r?n=r:s=n/t,{scale:s,size:n}}clipBbox(t,e,s,r,n,i){Array.isArray(e)&&4===e.length&&(t.ctx.rect(s,r,n-s,i-r),t.clip(),t.endPath())}setFillAndStrokeStyleToContext(t,e,s){const n=t.ctx,i=t.current;switch(e){case 1:const t=this.ctx;n.fillStyle=t.fillStyle,n.strokeStyle=t.strokeStyle,i.fillColor=t.fillStyle,i.strokeColor=t.strokeStyle;break;case 2:const a=r.Util.makeHexColor(s[0],s[1],s[2]);n.fillStyle=a,n.strokeStyle=a,i.fillColor=a,i.strokeColor=a;break;default:throw new r.FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,s){let n=(t=this.ctx).mozCurrentTransformInverse;s||(n=r.Util.transform(n,e.baseTransform),this.matrix&&(n=r.Util.transform(n,this.matrix)));const a=this.createPatternCanvas(e);let o=i(n);o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}e.TilingPattern=p},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=void 0===s.workerPort?null:s.workerPort,s.workerSrc=void 0===s.workerSrc?"":s.workerSrc},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=s(2);function n(t){if("object"!=typeof t||null===t)return t;switch(t.name){case"AbortException":return new r.AbortException(t.message);case"MissingPDFException":return new r.MissingPDFException(t.message);case"UnexpectedResponseException":return new r.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new r.UnknownErrorException(t.message,t.details);default:return new r.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this._processStreamMessage(e);if(e.callback){const t=e.callbackId,s=this.callbackCapabilities[t];if(!s)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],1===e.callback)s.resolve(e.data);else{if(2!==e.callback)throw new Error("Unexpected callback case");s.reject(n(e.reason))}return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,i=e.sourceName;new Promise(function(t){t(r(e.data))}).then(function(r){s.postMessage({sourceName:t,targetName:i,callback:1,callbackId:e.callbackId,data:r})},function(r){s.postMessage({sourceName:t,targetName:i,callback:2,callbackId:e.callbackId,reason:n(r)})})}else e.streamId?this._createStreamSink(e):r(e.data)},s.addEventListener("message",this._onComObjOnMessage)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const n=this.callbackId++,i=(0,r.createPromiseCapability)();this.callbackCapabilities[n]=i;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},s)}catch(a){i.reject(a)}return i.promise}sendWithStream(t,e,s,i){const a=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:s=>{const n=(0,r.createPromiseCapability)();return this.streamControllers[a]={controller:s,startCall:n,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:o,targetName:l,action:t,streamId:a,data:e,desiredSize:s.desiredSize},i),n.promise},pull:t=>{const e=(0,r.createPromiseCapability)();return this.streamControllers[a].pullCall=e,c.postMessage({sourceName:o,targetName:l,stream:6,streamId:a,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,r.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,r.createPromiseCapability)();return this.streamControllers[a].cancelCall=e,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:1,streamId:a,reason:n(t)}),e.promise}},s)}_createStreamSink(t){const e=this,s=this.actionHandler[t.action],i=t.streamId,a=this.sourceName,o=t.sourceName,l=this.comObj,c={enqueue(t,s=1,n){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=s,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),e._postMessage({sourceName:a,targetName:o,stream:4,streamId:i,chunk:t},n)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:a,targetName:o,stream:3,streamId:i}),delete e.streamSinks[i])},error(t){(0,r.assert)(t instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:a,targetName:o,stream:5,streamId:i,reason:n(t)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[i]=c,new Promise(function(e){e(s(t.data,c))}).then(function(){l.postMessage({sourceName:a,targetName:o,stream:8,streamId:i,success:!0})},function(t){l.postMessage({sourceName:a,targetName:o,stream:8,streamId:i,reason:n(t)})})}_processStreamMessage(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,a=this.comObj;switch(t.stream){case 8:t.success?this.streamControllers[e].startCall.resolve():this.streamControllers[e].startCall.reject(n(t.reason));break;case 7:t.success?this.streamControllers[e].pullCall.resolve():this.streamControllers[e].pullCall.reject(n(t.reason));break;case 6:if(!this.streamSinks[e]){a.postMessage({sourceName:s,targetName:i,stream:7,streamId:e,success:!0});break}this.streamSinks[e].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[e].sinkCapability.resolve(),this.streamSinks[e].desiredSize=t.desiredSize;const{onPull:o}=this.streamSinks[t.streamId];new Promise(function(t){t(o&&o())}).then(function(){a.postMessage({sourceName:s,targetName:i,stream:7,streamId:e,success:!0})},function(t){a.postMessage({sourceName:s,targetName:i,stream:7,streamId:e,reason:n(t)})});break;case 4:if((0,r.assert)(this.streamControllers[e],"enqueue should have stream controller"),this.streamControllers[e].isClosed)break;this.streamControllers[e].controller.enqueue(t.chunk);break;case 3:if((0,r.assert)(this.streamControllers[e],"close should have stream controller"),this.streamControllers[e].isClosed)break;this.streamControllers[e].isClosed=!0,this.streamControllers[e].controller.close(),this._deleteStreamController(e);break;case 5:(0,r.assert)(this.streamControllers[e],"error should have stream controller"),this.streamControllers[e].controller.error(n(t.reason)),this._deleteStreamController(e);break;case 2:t.success?this.streamControllers[e].cancelCall.resolve():this.streamControllers[e].cancelCall.reject(n(t.reason)),this._deleteStreamController(e);break;case 1:if(!this.streamSinks[e])break;const{onCancel:l}=this.streamSinks[t.streamId];new Promise(function(e){e(l&&l(n(t.reason)))}).then(function(){a.postMessage({sourceName:s,targetName:i,stream:2,streamId:e,success:!0})},function(t){a.postMessage({sourceName:s,targetName:i,stream:2,streamId:e,reason:n(t)})}),this.streamSinks[e].sinkCapability.reject(n(t.reason)),this.streamSinks[e].isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(t){var e=this;return _asyncToGenerator(function*(){yield Promise.allSettled([e.streamControllers[t].startCall,e.streamControllers[t].pullCall,e.streamControllers[t].cancelCall].map(function(t){return t&&t.promise})),delete e.streamControllers[t]})()}_postMessage(t,e){e&&this.postMessageTransfers?this.comObj.postMessage(t,e):this.comObj.postMessage(t)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=s(2);e.Metadata=class{constructor({parsedData:t,rawData:e}){this._metadataMap=t,this._data=e}getRaw(){return this._data}get(t){var e;return null!=(e=this._metadataMap.get(t))?e:null}getAll(){return(0,r.objectFromMap)(this._metadataMap)}has(t){return this._metadataMap.has(t)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=s(2);class n{constructor(t,e){this.visible=!0,this.name=t,this.intent=e}}e.OptionalContentConfig=class{constructor(t){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==t){this.name=t.name,this.creator=t.creator,this._order=t.order;for(const e of t.groups)this._groups.set(e.id,new n(e.name,e.intent));if("OFF"===t.baseState)for(const t of this._groups)t.visible=!1;for(const e of t.on)this._groups.get(e).visible=!0;for(const e of t.off)this._groups.get(e).visible=!1}}_evaluateVisibilityExpression(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let n=1;n<e;n++){const e=t[n];let i;if(Array.isArray(e))i=this._evaluateVisibilityExpression(e);else{if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;i=this._groups.get(e).visible}switch(s){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return"And"===s}isVisible(t){if("OCG"===t.type)return this._groups.has(t.id)?this._groups.get(t.id).visible:((0,r.warn)(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this._evaluateVisibilityExpression(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(this._groups.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(!this._groups.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(!this._groups.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(this._groups.get(e).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,r.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){this._groups.has(t)?this._groups.get(t).visible=!!e:(0,r.warn)(`Optional content group not found: ${t}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,r.objectFromMap)(this._groups):null}getGroup(t){return this._groups.get(t)||null}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=s(2),n=s(1);e.PDFDataTransportStream=class{constructor(t,e){(0,r.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;const s=t.initialData;if((null==s?void 0:s.length)>0){const t=new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})}),this._pdfDataRangeTransport.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})}),this._pdfDataRangeTransport.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{const s=this._rangeReaders.some(function(s){return s._begin===t.begin&&(s._enqueue(e),!0)});(0,r.assert)(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return null!=(e=null==(t=this._fullRequestReader)?void 0:t._loaded)?e:0}_onProgress(t){if(void 0===t.total){const e=this._rangeReaders[0];(null==e?void 0:e.onProgress)&&e.onProgress({loaded:t.loaded})}else{const e=this._fullRequestReader;(null==e?void 0:e.onProgress)&&e.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new i(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new a(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}};class i{constructor(t,e,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=(0,n.isPdfFile)(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var t=this;return _asyncToGenerator(function*(){if(t._queuedChunks.length>0)return{value:t._queuedChunks.shift(),done:!1};if(t._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return t._requests.push(e),e.promise})()}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class a{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var t=this;return _asyncToGenerator(function*(){if(t._queuedChunk){const e=t._queuedChunk;return t._queuedChunk=null,{value:e,done:!1}}if(t._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return t._requests.push(e),e.promise})()}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var r=s(1),n=s(2),i=s(8),a=s(18);class o{static create(t){switch(t.data.annotationType){case n.AnnotationType.LINK:return new c(t);case n.AnnotationType.TEXT:return new h(t);case n.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new u(t);case"Btn":return t.data.radioButton?new g(t):t.data.checkBox?new p(t):new f(t);case"Ch":return new m(t)}return new d(t);case n.AnnotationType.POPUP:return new A(t);case n.AnnotationType.FREETEXT:return new b(t);case n.AnnotationType.LINE:return new _(t);case n.AnnotationType.SQUARE:return new C(t);case n.AnnotationType.CIRCLE:return new y(t);case n.AnnotationType.POLYLINE:return new x(t);case n.AnnotationType.CARET:return new w(t);case n.AnnotationType.INK:return new P(t);case n.AnnotationType.POLYGON:return new S(t);case n.AnnotationType.HIGHLIGHT:return new k(t);case n.AnnotationType.UNDERLINE:return new R(t);case n.AnnotationType.SQUIGGLY:return new T(t);case n.AnnotationType.STRIKEOUT:return new E(t);case n.AnnotationType.STAMP:return new F(t);case n.AnnotationType.FILEATTACHMENT:return new M(t);default:return new l(t)}}}class l{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._mouseState=t.mouseState,e&&(this.container=this._createContainer(s)),r&&(this.quadrilaterals=this._createQuadrilaterals(s))}_createContainer(t=!1){const e=this.data,s=this.page,r=this.viewport,i=document.createElement("section");let a=e.rect[2]-e.rect[0],o=e.rect[3]-e.rect[1];i.setAttribute("data-annotation-id",e.id);const l=n.Util.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]);if(i.style.transform=`matrix(${r.transform.join(",")})`,i.style.transformOrigin=`${-l[0]}px ${-l[1]}px`,!t&&e.borderStyle.width>0){i.style.borderWidth=`${e.borderStyle.width}px`,e.borderStyle.style!==n.AnnotationBorderStyleType.UNDERLINE&&(a-=2*e.borderStyle.width,o-=2*e.borderStyle.width);const t=e.borderStyle.horizontalCornerRadius,s=e.borderStyle.verticalCornerRadius;switch((t>0||s>0)&&(i.style.borderRadius=`${t}px / ${s}px`),e.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:i.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:i.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:i.style.borderBottomStyle="solid"}e.color?i.style.borderColor=n.Util.makeHexColor(0|e.color[0],0|e.color[1],0|e.color[2]):i.style.borderWidth=0}return i.style.left=`${l[0]}px`,i.style.top=`${l[1]}px`,i.style.width=`${a}px`,i.style.height=`${o}px`,i}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const e=[],s=this.data.rect;for(const r of this.data.quadPoints)this.data.rect=[r[2].x,r[2].y,r[1].x,r[1].y],e.push(this._createContainer(t));return this.data.rect=s,e}_createPopup(t,e){let s=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,s=this.quadrilaterals[0]),t||((t=document.createElement("div")).style.height=s.style.height,t.style.width=s.style.width,s.appendChild(t));const r=new v({container:s,trigger:t,color:e.color,title:e.title,modificationDate:e.modificationDate,contents:e.contents,hideWrapper:!0}).render();r.style.left=s.style.width,s.appendChild(r)}_renderQuadrilaterals(t){for(const e of this.quadrilaterals)e.className=t;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}}class c extends l{constructor(t){super(t,{isRenderable:!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"])),createQuadrilaterals:!0})}render(){const{data:t,linkService:e}=this,s=document.createElement("a");return t.url?(0,r.addLinkAttributes)(s,{url:t.url,target:t.newWindow?r.LinkTarget.BLANK:e.externalLinkTarget,rel:e.externalLinkRel,enabled:e.externalLinkEnabled}):t.action?this._bindNamedAction(s,t.action):t.dest?this._bindLink(s,t.dest):t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions?this._bindJSAction(s,t):this._bindLink(s,""),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((t,e)=>{const r=0===e?s:s.cloneNode();return t.appendChild(r),t}):(this.container.className="linkAnnotation",this.container.appendChild(s),this.container)}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&(t.className="internalLink")}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),t.className="internalLink"}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const n=s.get(r);!n||(t[n]=()=>{var t;return null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1})}t.className="internalLink"}}class h extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class d extends l{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){return navigator.platform.includes("Win")&&t.ctrlKey||navigator.platform.includes("Mac")&&t.metaKey}_setEventListener(t,e,s,r){e.includes("mouse")?t.addEventListener(e,t=>{var e;null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})}):t.addEventListener(e,t=>{var e;null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:t.target.checked}})})}_setEventListeners(t,e,s){var r;for(const[n,i]of e)("Action"===i||(null==(r=this.data.actions)?void 0:r[i]))&&this._setEventListener(t,n,i,s)}_dispatchEventFromSandbox(t,e){const s=(t,e,s)=>{const r=s.detail[t];s.target.style[e]=a.ColorConverters[`${r[0]}_HTML`](r.slice(1))},r={display:t=>{const e=t.detail.display%2==1;t.target.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:e,print:0===t.detail.display||3===t.detail.display})},print:t=>{this.annotationStorage.setValue(this.data.id,{print:t.detail.print})},hidden:t=>{t.target.style.visibility=t.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:t=>{t.detail.required?t.target.setAttribute("required",""):t.target.removeAttribute("required")},bgColor:t=>{s("bgColor","backgroundColor",t)},fillColor:t=>{s("fillColor","backgroundColor",t)},fgColor:t=>{s("fgColor","color",t)},textColor:t=>{s("textColor","color",t)},borderColor:t=>{s("borderColor","borderColor",t)},strokeColor:t=>{s("strokeColor","borderColor",t)}};for(const n of Object.keys(e.detail)){const s=t[n]||r[n];s&&s(e)}}}class u extends d{constructor(t){super(t,{isRenderable:t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,s,r){const n=this.annotationStorage;for(const i of document.getElementsByName(t.name))if(i!==t){i[e]=s;const t=Object.create(null);t[r]=s,n.setValue(i.getAttribute("id"),t)}}render(){var t;const e=this.annotationStorage,s=this.data.id;this.container.className="textWidgetAnnotation";let r=null;if(this.renderInteractiveForms){const n=e.getValue(s,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),i=n.valueAsString||n.value||"",a={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=i):(r=document.createElement("input"),r.type="text",r.setAttribute("value",i)),a.userValue=i,r.setAttribute("id",s),r.addEventListener("input",t=>{e.setValue(s,{value:t.target.value}),this.setPropertyOnSiblings(r,"value",t.target.value,"value")});let o=t=>{a.formattedValue&&(t.target.value=a.formattedValue),t.target.scrollLeft=0,a.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",t=>{a.userValue&&(t.target.value=a.userValue)}),r.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value(t){a.userValue=t.detail.value||"",e.setValue(s,{value:a.userValue.toString()}),a.formattedValue||(t.target.value=a.userValue)},valueAsString(t){a.formattedValue=t.detail.valueAsString||"",t.target!==document.activeElement&&(t.target.value=a.formattedValue),e.setValue(s,{formattedValue:a.formattedValue})},selRange(t){const[e,s]=t.detail.selRange;e>=0&&s<t.target.value.length&&t.target.setSelectionRange(e,s)}},t)}),r.addEventListener("keydown",t=>{var e;a.beforeInputValue=t.target.value;let r=-1;"Escape"===t.key?r=0:"Enter"===t.key?r=2:"Tab"===t.key&&(r=3),-1!==r&&(a.userValue=t.target.value,null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:t.target.value,willCommit:!0,commitKey:r,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))});const n=o;o=null,r.addEventListener("blur",t=>{var e;this._mouseState.isDown&&(a.userValue=t.target.value,null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:t.target.value,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})),n(t)}),r.addEventListener("mousedown",t=>{a.beforeInputValue=t.target.value,a.beforeInputSelectionRange=null}),r.addEventListener("keyup",t=>{t.target.selectionStart===t.target.selectionEnd&&(a.beforeInputSelectionRange=null)}),r.addEventListener("select",t=>{a.beforeInputSelectionRange=[t.target.selectionStart,t.target.selectionEnd]}),(null==(t=this.data.actions)?void 0:t.Keystroke)&&r.addEventListener("input",t=>{var e;let r=-1,n=-1;a.beforeInputSelectionRange&&([r,n]=a.beforeInputSelectionRange),null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:a.beforeInputValue,change:t.data,willCommit:!1,selStart:r,selEnd:n}})}),this._setEventListeners(r,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.value)}if(o&&r.addEventListener("blur",o),r.disabled=this.data.readOnly,r.name=this.data.fieldName,null!==this.data.maxLen&&(r.maxLength=this.data.maxLen),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;r.classList.add("comb"),r.style.letterSpacing=`calc(${t}px - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell";return this._setTextStyle(r),this.container.appendChild(r),this.container}_setTextStyle(t){const{fontSize:e,fontColor:s}=this.data.defaultAppearanceData,r=t.style;e&&(r.fontSize=`${e}px`),r.color=n.Util.makeHexColor(s[0],s[1],s[2]),null!==this.data.textAlignment&&(r.textAlign=["left","center","right"][this.data.textAlignment])}}class p extends d{constructor(t){super(t,{isRenderable:t.renderInteractiveForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let r=t.getValue(s,{value:e.fieldValue&&(e.exportValue&&e.exportValue===e.fieldValue||!e.exportValue&&"Off"!==e.fieldValue)}).value;"string"==typeof r&&(r="Off"!==r,t.setValue(s,{value:r})),this.container.className="buttonWidgetAnnotation checkBox";const n=document.createElement("input");return n.disabled=e.readOnly,n.type="checkbox",n.name=this.data.fieldName,r&&n.setAttribute("checked",!0),n.setAttribute("id",s),n.addEventListener("change",function(e){const r=e.target.name;for(const s of document.getElementsByName(r))s!==e.target&&(s.checked=!1,t.setValue(s.parentNode.getAttribute("data-annotation-id"),{value:!1}));t.setValue(s,{value:e.target.checked})}),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({value(e){e.target.checked="Off"!==e.detail.value,t.setValue(s,{value:e.target.checked})}},e)}),this._setEventListeners(n,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)),this.container.appendChild(n),this.container}}class g extends d{constructor(t){super(t,{isRenderable:t.renderInteractiveForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,e=this.data,s=e.id;let r=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;"string"==typeof r&&(r=r!==e.buttonValue,t.setValue(s,{value:r}));const n=document.createElement("input");if(n.disabled=e.readOnly,n.type="radio",n.name=e.fieldName,r&&n.setAttribute("checked",!0),n.setAttribute("id",s),n.addEventListener("change",function(e){const{target:r}=e;for(const s of document.getElementsByName(r.name))s!==r&&t.setValue(s.getAttribute("id"),{value:!1});t.setValue(s,{value:r.checked})}),this.enableScripting&&this.hasJSActions){const r=e.buttonValue;n.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({value(e){const n=r===e.detail.value;for(const r of document.getElementsByName(e.target.name)){const e=r.getAttribute("id");r.checked=e===s&&n,t.setValue(e,{value:r.checked})}}},e)}),this._setEventListeners(n,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}return this.container.appendChild(n),this.container}}class f extends c{render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),t}}class m extends d{constructor(t){super(t,{isRenderable:t.renderInteractiveForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,e=this.data.id;t.getValue(e,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});const s=document.createElement("select");s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.setAttribute("id",e),this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0));for(const i of this.data.options){const t=document.createElement("option");t.textContent=i.displayValue,t.value=i.exportValue,this.data.fieldValue.includes(i.exportValue)&&t.setAttribute("selected",!0),s.appendChild(t)}const r=(t,e)=>{const s=e?"value":"textContent",r=t.target.options;return t.target.multiple?Array.prototype.filter.call(r,t=>t.selected).map(t=>t[s]):-1===r.selectedIndex?null:r[r.selectedIndex][s]},n=t=>Array.prototype.map.call(t.target.options,t=>({displayValue:t.textContent,exportValue:t.value}));return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({value(n){const i=s.options,a=n.detail.value,o=new Set(Array.isArray(a)?a:[a]);Array.prototype.forEach.call(i,t=>{t.selected=o.has(t.value)}),t.setValue(e,{value:r(n,!0)})},multipleSelection(t){s.multiple=!0},remove(i){const a=s.options,o=i.detail.remove;a[o].selected=!1,s.remove(o),a.length>0&&-1===Array.prototype.findIndex.call(a,t=>t.selected)&&(a[0].selected=!0),t.setValue(e,{value:r(i,!0),items:n(i)})},clear(r){for(;0!==s.length;)s.remove(0);t.setValue(e,{value:null,items:[]})},insert(i){const{index:a,displayValue:o,exportValue:l}=i.detail.insert,c=document.createElement("option");c.textContent=o,c.value=l,s.insertBefore(c,s.children[a]),t.setValue(e,{value:r(i,!0),items:n(i)})},items(i){const{items:a}=i.detail;for(;0!==s.length;)s.remove(0);for(const t of a){const{displayValue:e,exportValue:r}=t,n=document.createElement("option");n.textContent=e,n.value=r,s.appendChild(n)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:r(i,!0),items:n(i)})},indices(s){const n=new Set(s.detail.indices);Array.prototype.forEach.call(s.target.options,(t,e)=>{t.selected=n.has(e)}),t.setValue(e,{value:r(s,!0)})},editable(t){t.target.disabled=!t.detail.editable}},i)}),s.addEventListener("input",s=>{var n;const i=r(s,!0),a=r(s,!1);t.setValue(e,{value:i}),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,changeEx:i,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],t=>t.target.checked)):s.addEventListener("input",function(s){t.setValue(e,{value:r(s)})}),this.container.appendChild(s),this.container}}class A extends l{constructor(t){super(t,{isRenderable:!(!t.data.title&&!t.data.contents)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const t=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===t.length)return this.container;const e=new v({container:this.container,trigger:Array.from(t),color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),s=this.page,r=n.Util.normalizeRect([this.data.parentRect[0],s.view[3]-this.data.parentRect[1]+s.view[1],this.data.parentRect[2],s.view[3]-this.data.parentRect[3]+s.view[1]]),i=r[0]+this.data.parentRect[2]-this.data.parentRect[0],a=r[1];return this.container.style.transformOrigin=`${-i}px ${-a}px`,this.container.style.left=`${i}px`,this.container.style.top=`${a}px`,this.container.appendChild(e.render()),this.container}}class v{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.modificationDate=t.modificationDate,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.hidden=!0;const e=document.createElement("div");e.className="popup";const s=this.color;s&&(e.style.backgroundColor=n.Util.makeHexColor(0|.7*(255-s[0])+s[0],0|.7*(255-s[1])+s[1],0|.7*(255-s[2])+s[2]));const i=document.createElement("h1");i.textContent=this.title,e.appendChild(i);const a=r.PDFDateString.toDateObject(this.modificationDate);if(a){const t=document.createElement("span");t.textContent="{{date}}, {{time}}",t.dataset.l10nId="annotation_date_string",t.dataset.l10nArgs=JSON.stringify({date:a.toLocaleDateString(),time:a.toLocaleTimeString()}),e.appendChild(t)}const o=this._formatContents(this.contents);e.appendChild(o),Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const r of this.trigger)r.addEventListener("click",this._toggle.bind(this)),r.addEventListener("mouseover",this._show.bind(this,!1)),r.addEventListener("mouseout",this._hide.bind(this,!1));return e.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(e),t}_formatContents(t){const e=document.createElement("p"),s=t.split(/(?:\r\n?|\n)/);for(let r=0,n=s.length;r<n;++r)e.appendChild(document.createTextNode(s[r])),r<n-1&&e.appendChild(document.createElement("br"));return e}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class b extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class _ extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,e=this.svgFactory.create(t.rect[2]-t.rect[0],t.rect[3]-t.rect[1]),s=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),e.appendChild(s),this.container.append(e),this._createPopup(s,t),this.container}}class C extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,e=t.rect[2]-t.rect[0],s=t.rect[3]-t.rect[1],r=this.svgFactory.create(e,s),n=t.borderStyle.width,i=this.svgFactory.createElement("svg:rect");return i.setAttribute("x",n/2),i.setAttribute("y",n/2),i.setAttribute("width",e-n),i.setAttribute("height",s-n),i.setAttribute("stroke-width",n||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),r.appendChild(i),this.container.append(r),this._createPopup(i,t),this.container}}class y extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,e=t.rect[2]-t.rect[0],s=t.rect[3]-t.rect[1],r=this.svgFactory.create(e,s),n=t.borderStyle.width,i=this.svgFactory.createElement("svg:ellipse");return i.setAttribute("cx",e/2),i.setAttribute("cy",s/2),i.setAttribute("rx",e/2-n/2),i.setAttribute("ry",s/2-n/2),i.setAttribute("stroke-width",n||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),r.appendChild(i),this.container.append(r),this._createPopup(i,t),this.container}}class x extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,e=this.svgFactory.create(t.rect[2]-t.rect[0],t.rect[3]-t.rect[1]);let s=[];for(const n of t.vertices)s.push(n.x-t.rect[0]+","+(t.rect[3]-n.y));s=s.join(" ");const r=this.svgFactory.createElement(this.svgElementName);return r.setAttribute("points",s),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","none"),e.appendChild(r),this.container.append(e),this._createPopup(r,t),this.container}}class S extends x{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class w extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,e=this.svgFactory.create(t.rect[2]-t.rect[0],t.rect[3]-t.rect[1]);for(const s of t.inkLists){let r=[];for(const e of s)r.push(`${e.x-t.rect[0]},${t.rect[3]-e.y}`);r=r.join(" ");const n=this.svgFactory.createElement(this.svgElementName);n.setAttribute("points",r),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","none"),this._createPopup(n,t),e.appendChild(n)}return this.container.append(e),this.container}}class k extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class R extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class T extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class E extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class F extends l{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.title||t.data.contents),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends l{constructor(t){var e;super(t,{isRenderable:!0});const{filename:s,content:i}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(s),this.content=i,null==(e=this.linkService.eventBus)||e.dispatch("fileattachmentannotation",{source:this,id:(0,n.stringToPDFString)(s),filename:s,content:i})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){var t;null==(t=this.downloadManager)||t.openOrDownloadData(this.container,this.content,this.filename)}}e.AnnotationLayer=class{static render(t){const e=[],s=[];for(const r of t.annotations)if(r){if(r.annotationType===n.AnnotationType.POPUP){s.push(r);continue}e.push(r)}s.length&&e.push(...s);for(const n of e){const e=o.create({data:n,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderInteractiveForms:!1!==t.renderInteractiveForms,svgFactory:new r.DOMSVGFactory,annotationStorage:t.annotationStorage||new i.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,mouseState:t.mouseState||{isDown:!1}});if(e.isRenderable){const s=e.render();if(n.hidden&&(s.style.visibility="hidden"),Array.isArray(s))for(const e of s)t.div.appendChild(e);else e instanceof A?t.div.prepend(s):t.div.appendChild(s)}}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;for(const s of t.annotations){const r=t.div.querySelectorAll(`[data-annotation-id="${s.id}"]`);if(r)for(const t of r)t.style.transform=e}t.div.hidden=!1}}},(t,e)=>{function s(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0,e.ColorConverters=class{static CMYK_G([t,e,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_HTML([t]){const e=s(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_HTML([t,e,r]){return`#${s(t)}${s(e)}${s(r)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([t,e,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,e+r)]}static CMYK_HTML(t){return this.RGB_HTML(this.CMYK_RGB(t))}static RGB_CMYK([t,e,s]){const r=1-t,n=1-e,i=1-s;return["CMYK",r,n,i,Math.min(r,n,i)]}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=function(t){const e=new d({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e};var r=s(2);const n=30,i=new Map,a=/^\s+$/g;function o(t,e,s,o){const l=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};t._textDivs.push(l);const h=r.Util.transform(t._viewport.transform,e.transform);let d=Math.atan2(h[1],h[0]);const u=s[e.fontName];u.vertical&&(d+=Math.PI/2);const p=Math.hypot(h[2],h[3]),g=p*function(t,e){const s=i.get(t);if(s)return s;e.save(),e.font=`30px ${t}`;const r=e.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){e.restore();const s=a/(a+o);return i.set(t,s),s}e.strokeStyle="red",e.clearRect(0,0,n,n),e.strokeText("g",0,0);let l=e.getImageData(0,0,n,n).data;o=0;for(let i=l.length-1-3;i>=0;i-=4)if(l[i]>0){o=Math.ceil(i/4/n);break}e.clearRect(0,0,n,n),e.strokeText("A",0,n),l=e.getImageData(0,0,n,n).data,a=0;for(let i=0,c=l.length;i<c;i+=4)if(l[i]>0){a=n-Math.floor(i/4/n);break}if(e.restore(),a){const e=a/(a+o);return i.set(t,e),e}return i.set(t,.8),.8}(u.fontFamily,o);let f,m;0===d?(f=h[4],m=h[5]-g):(f=h[4]+g*Math.sin(d),m=h[5]-g*Math.cos(d)),l.style.left=`${f}px`,l.style.top=`${m}px`,l.style.fontSize=`${p}px`,l.style.fontFamily=u.fontFamily,l.setAttribute("role","presentation"),l.textContent=e.str,l.dir=e.dir,t._fontInspectorEnabled&&(l.dataset.fontName=e.fontName),0!==d&&(c.angle=d*(180/Math.PI));let A=!1;if(e.str.length>1||t._enhanceTextSelection&&a.test(e.str))A=!0;else if(e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),s=Math.abs(e.transform[3]);t!==s&&Math.max(t,s)/Math.min(t,s)>1.5&&(A=!0)}if(A&&(c.canvasWidth=u.vertical?e.height*t._viewport.scale:e.width*t._viewport.scale),t._textDivProperties.set(l,c),t._textContentStream&&t._layoutText(l),t._enhanceTextSelection&&c.hasText){let s=1,n=0;0!==d&&(s=Math.cos(d),n=Math.sin(d));const i=(u.vertical?e.height:e.width)*t._viewport.scale,a=p;let o,c;0!==d?(o=[s,n,-n,s,f,m],c=r.Util.getAxialAlignedBoundingBox([0,0,i,a],o)):c=[f,m,f+i,m+a],t._bounds.push({left:c[0],top:c[1],right:c[2],bottom:c[3],div:l,size:[i,a],m:o})}}function l(t){if(t._canceled)return;const e=t._textDivs,s=t._capability,r=e.length;if(r>1e5)return t._renderingDone=!0,void s.resolve();if(!t._textContentStream)for(let n=0;n<r;n++)t._layoutText(e[n]);t._renderingDone=!0,s.resolve()}function c(t,e,s){let r=0;for(let n=0;n<s;n++){const s=t[e++];s>0&&(r=r?Math.min(s,r):s)}return r}function h(t,e){e.sort(function(t,e){return t.x1-e.x1||t.index-e.index});const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const r of e){let t=0;for(;t<s.length&&s[t].end<=r.y1;)t++;let e=s.length-1;for(;e>=0&&s[e].start>=r.y2;)e--;let n,i,a,o,l=-1/0;for(a=t;a<=e;a++){let t;n=s[a],i=n.boundary,t=i.x2>r.x1?i.index>r.index?i.x1New:r.x1:void 0===i.x2New?(i.x2+r.x1)/2:i.x2New,t>l&&(l=t)}for(r.x1New=l,a=t;a<=e;a++)n=s[a],i=n.boundary,void 0===i.x2New?i.x2>r.x1?i.index>r.index&&(i.x2New=i.x2):i.x2New=l:i.x2New>l&&(i.x2New=Math.max(l,i.x2));const c=[];let h=null;for(a=t;a<=e;a++){n=s[a],i=n.boundary;const t=i.x2>r.x2?i:r;h===t?c[c.length-1].end=n.end:(c.push({start:n.start,end:n.end,boundary:t}),h=t)}for(s[t].start<r.y1&&(c[0].start=r.y1,c.unshift({start:s[t].start,end:r.y1,boundary:s[t].boundary})),r.y2<s[e].end&&(c[c.length-1].end=r.y2,c.push({start:r.y2,end:s[e].end,boundary:s[e].boundary})),a=t;a<=e;a++){if(n=s[a],i=n.boundary,void 0!==i.x2New)continue;let r=!1;for(o=t-1;!r&&o>=0&&s[o].start>=i.y1;o--)r=s[o].boundary===i;for(o=e+1;!r&&o<s.length&&s[o].end<=i.y2;o++)r=s[o].boundary===i;for(o=0;!r&&o<c.length;o++)r=c[o].boundary===i;r||(i.x2New=l)}Array.prototype.splice.apply(s,[t,e-t+1].concat(c))}for(const r of s){const e=r.boundary;void 0===e.x2New&&(e.x2New=Math.max(t,e.x2))}}class d{constructor({textContent:t,textContentStream:e,container:s,viewport:n,textDivs:i,textContentItemsStr:a,enhanceTextSelection:o}){var l;this._textContent=t,this._textContentStream=e,this._container=s,this._document=s.ownerDocument,this._viewport=n,this._textDivs=i||[],this._textContentItemsStr=a||[],this._enhanceTextSelection=!!o,this._fontInspectorEnabled=!!(null==(l=globalThis.FontInspector)?void 0:l.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(t,e){for(let s=0,r=t.length;s<r;s++)if(void 0!==t[s].str)this._textContentItemsStr.push(t[s].str),o(this,t[s],e,this._layoutTextCtx);else if("beginMarkedContentProps"===t[s].type||"beginMarkedContent"===t[s].type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==t[s].id&&this._container.setAttribute("id",`${t[s].id}`),e.appendChild(this._container)}else"endMarkedContent"===t[s].type&&(this._container=this._container.parentNode)}_layoutText(t){const e=this._textDivProperties.get(t);let s="";if(0!==e.canvasWidth&&e.hasText){const{fontSize:r,fontFamily:n}=t.style;(r!==this._layoutTextLastFontSize||n!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${r} ${n}`,this._layoutTextLastFontSize=r,this._layoutTextLastFontFamily=n);const{width:i}=this._layoutTextCtx.measureText(t.textContent);i>0&&(e.scale=e.canvasWidth/i,s=`scaleX(${e.scale})`)}if(0!==e.angle&&(s=`rotate(${e.angle}deg) ${s}`),s.length>0&&(this._enhanceTextSelection&&(e.originalTransform=s),t.style.transform=s),e.hasText&&this._container.appendChild(t),e.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this._container.appendChild(t)}}_render(t=0){const e=(0,r.createPromiseCapability)();let s=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=n,i.mozOpaque=!0,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),e.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const t=()=>{this._reader.read().then(({value:r,done:n})=>{n?e.resolve():(Object.assign(s,r.styles),this._processItems(r.items,s),t())},e.reject)};this._reader=this._textContentStream.getReader(),t()}}e.promise.then(()=>{s=null,t?this._renderTimer=setTimeout(()=>{l(this),this._renderTimer=null},t):l(this)},this._capability.reject)}expandTextDivs(t=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function(t){const e=t._bounds,s=t._viewport,n=function(t,e,s){const r=s.map(function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}});h(t,r);const n=new Array(s.length);for(const i of r)n[i.index]={left:i.x1New,top:0,right:i.x2New,bottom:0};s.map(function(e,s){const i=n[s],a=r[s];a.x1=e.top,a.y1=t-i.right,a.x2=e.bottom,a.y2=t-i.left,a.index=s,a.x1New=void 0,a.x2New=void 0}),h(e,r);for(const i of r){const t=i.index;n[t].top=i.x1New,n[t].bottom=i.x2New}return n}(s.width,s.height,e);for(let i=0;i<n.length;i++){const s=e[i].div,a=t._textDivProperties.get(s);if(0===a.angle){a.paddingLeft=e[i].left-n[i].left,a.paddingTop=e[i].top-n[i].top,a.paddingRight=n[i].right-e[i].right,a.paddingBottom=n[i].bottom-e[i].bottom,t._textDivProperties.set(s,a);continue}const o=n[i],l=e[i],h=l.m,d=h[0],u=h[1],p=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],g=new Float64Array(64);for(let t=0,e=p.length;t<e;t++){const e=r.Util.applyTransform(p[t],h);g[t+0]=d&&(o.left-e[0])/d,g[t+4]=u&&(o.top-e[1])/u,g[t+8]=d&&(o.right-e[0])/d,g[t+12]=u&&(o.bottom-e[1])/u,g[t+16]=u&&(o.left-e[0])/-u,g[t+20]=d&&(o.top-e[1])/d,g[t+24]=u&&(o.right-e[0])/-u,g[t+28]=d&&(o.bottom-e[1])/d,g[t+32]=d&&(o.left-e[0])/-d,g[t+36]=u&&(o.top-e[1])/-u,g[t+40]=d&&(o.right-e[0])/-d,g[t+44]=u&&(o.bottom-e[1])/-u,g[t+48]=u&&(o.left-e[0])/u,g[t+52]=d&&(o.top-e[1])/-d,g[t+56]=u&&(o.right-e[0])/u,g[t+60]=d&&(o.bottom-e[1])/-d}const f=1+Math.min(Math.abs(d),Math.abs(u));a.paddingLeft=c(g,32,16)/f,a.paddingTop=c(g,48,16)/f,a.paddingRight=c(g,0,16)/f,a.paddingBottom=c(g,16,16)/f,t._textDivProperties.set(s,a)}}(this),this._bounds=null);const e=[],s=[];for(let r=0,n=this._textDivs.length;r<n;r++){const n=this._textDivs[r],i=this._textDivProperties.get(n);!i.hasText||(t?(e.length=0,s.length=0,i.originalTransform&&e.push(i.originalTransform),i.paddingTop>0?(s.push(`${i.paddingTop}px`),e.push(`translateY(${-i.paddingTop}px)`)):s.push(0),s.push(i.paddingRight>0?i.paddingRight/i.scale+"px":0),s.push(i.paddingBottom>0?`${i.paddingBottom}px`:0),i.paddingLeft>0?(s.push(i.paddingLeft/i.scale+"px"),e.push(`translateX(${-i.paddingLeft/i.scale}px)`)):s.push(0),n.style.padding=s.join(" "),e.length&&(n.style.transform=e.join(" "))):(n.style.padding=null,n.style.transform=i.originalTransform))}}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=s(2),n=s(1),i=s(4);let a=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=a;{let t=function(t){let e=[];const s=[];for(const r of t)"save"!==r.fn?"restore"===r.fn?e=s.pop():e.push(r):(e.push({fnId:92,fn:"group",items:[]}),s.push(e),e=e[e.length-1].items);return e},s=function(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let s=e.length-1;if("0"!==e[s])return e;do{s--}while("0"===e[s]);return e.substring(0,"."===e[s]?s:s+1)},o=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${s(t[0])} ${s(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const e=180*Math.acos(t[0])/Math.PI;return`rotate(${s(e)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${s(t[4])} ${s(t[5])})`;return`matrix(${s(t[0])} ${s(t[1])} ${s(t[2])} ${s(t[3])} ${s(t[4])} ${s(t[5])})`};const l={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/1999/xlink",d=["butt","round","square"],u=["miter","round","bevel"],p=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256);for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t=1&t?3988292384^t>>1&2147483647:t>>1&2147483647;e[r]=t}function s(t,s,r,n){let i=n;const a=s.length;r[i]=a>>24&255,r[i+1]=a>>16&255,r[i+2]=a>>8&255,r[i+3]=255&a,i+=4,r[i]=255&t.charCodeAt(0),r[i+1]=255&t.charCodeAt(1),r[i+2]=255&t.charCodeAt(2),r[i+3]=255&t.charCodeAt(3),i+=4,r.set(s,i),i+=s.length;const o=function(t,s,r){let n=-1;for(let i=s;i<r;i++)n=n>>>8^e[255&(n^t[i])];return-1^n}(r,n+4,i);r[i]=o>>24&255,r[i+1]=o>>16&255,r[i+2]=o>>8&255,r[i+3]=255&o}function n(t){let e=t.length;const s=65535,r=Math.ceil(e/s),n=new Uint8Array(2+e+5*r+4);let i=0;n[i++]=120,n[i++]=156;let a=0;for(;e>s;)n[i++]=0,n[i++]=255,n[i++]=255,n[i++]=0,n[i++]=0,n.set(t.subarray(a,a+s),i),i+=s,a+=s,e-=s;n[i++]=1,n[i++]=255&e,n[i++]=e>>8&255,n[i++]=255&~e,n[i++]=(65535&~e)>>8&255,n.set(t.subarray(a),i),i+=t.length-a;const o=function(t,e,s){let r=1,n=0;for(let i=0;i<s;++i)r=(r+(255&t[i]))%65521,n=(n+r)%65521;return n<<16|r}(t,0,t.length);return n[i++]=o>>24&255,n[i++]=o>>16&255,n[i++]=o>>8&255,n[i++]=255&o,n}return function(e,a,o){return function(e,a,o,l){const c=e.width,h=e.height;let d,u,p;const g=e.data;switch(a){case r.ImageKind.GRAYSCALE_1BPP:u=0,d=1,p=c+7>>3;break;case r.ImageKind.RGB_24BPP:u=2,d=8,p=3*c;break;case r.ImageKind.RGBA_32BPP:u=6,d=8,p=4*c;break;default:throw new Error("invalid format")}const f=new Uint8Array((1+p)*h);let m=0,A=0;for(let t=0;t<h;++t)f[m++]=0,f.set(g.subarray(A,A+p),m),A+=p,m+=p;if(a===r.ImageKind.GRAYSCALE_1BPP&&l){m=0;for(let t=0;t<h;t++){m++;for(let t=0;t<p;t++)f[m++]^=255}}const v=new Uint8Array([c>>24&255,c>>16&255,c>>8&255,255&c,h>>24&255,h>>16&255,h>>8&255,255&h,d,u,0,0,0]),b=function(t){if(!i.isNodeJS)return n(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);const s=__webpack_require__(2258).deflateSync(e,{level:9});return s instanceof Uint8Array?s:new Uint8Array(s)}catch(a){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+a)}return n(t)}(f),_=new Uint8Array(t.length+36+v.length+b.length);let C=0;return _.set(t,C),C+=t.length,s("IHDR",v,_,C),C+=12+v.length,s("IDATA",b,_,C),C+=12+b.length,s("IEND",new Uint8Array(0),_,C),(0,r.createObjectURL)(_,"image/png",o)}(e,void 0===e.kind?r.ImageKind.GRAYSCALE_1BPP:e.kind,a,o)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=l.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=l.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t,this.y=e}}let f=0,m=0,A=0;e.SVGGraphics=a=class{constructor(t,e,s=!1){this.svgFactory=new n.DOMSVGFactory,this.current=new g,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!s,this._operatorIdMapping=[];for(const n in r.OPS)this._operatorIdMapping[r.OPS[n]]=n}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,s=t.argsArray;for(let n=0,i=e.length;n<i;n++)if(e[n]===r.OPS.dependency)for(const t of s[n]){const e=t.startsWith("g_")?this.commonObjs:this.objs,s=new Promise(s=>{e.get(t,s)});this.current.dependencies.push(s)}return Promise.all(this.current.dependencies)}transform(t,e,s,n,i,a){this.transformMatrix=r.Util.transform(this.transformMatrix,[t,e,s,n,i,a]),this.tgrp=null}getSVG(t,e){this.viewport=e;const s=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),s))}convertOpList(e){const s=this._operatorIdMapping,r=e.argsArray,n=e.fnArray,i=[];for(let t=0,a=n.length;t<a;t++){const e=n[t];i.push({fnId:e,fn:s[e],args:r[t]})}return t(i)}executeOpTree(t){for(const e of t){const t=e.fn,s=e.args;switch(0|e.fnId){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(s);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case r.OPS.setFont:this.setFont(s);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(s[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(s[0],s[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(s[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(s[0]);break;case r.OPS.setHScale:this.setHScale(s[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case r.OPS.setTextRise:this.setTextRise(s[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(s[0]);break;case r.OPS.setLineWidth:this.setLineWidth(s[0]);break;case r.OPS.setLineJoin:this.setLineJoin(s[0]);break;case r.OPS.setLineCap:this.setLineCap(s[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(s[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(s);break;case r.OPS.setFillColorN:this.setFillColorN(s);break;case r.OPS.shadingFill:this.shadingFill(s[0]);break;case r.OPS.setDash:this.setDash(s[0],s[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(s[0]);break;case r.OPS.setFlatness:this.setFlatness(s[0]);break;case r.OPS.setGState:this.setGState(s[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(s[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case r.OPS.constructPath:this.constructPath(s[0],s[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,r.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,r,n,i,a){const o=this.current;o.textMatrix=o.lineMatrix=[t,e,r,n,i,a],o.textMatrixScale=Math.hypot(t,e),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${s(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",s(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.appendChild(o.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=r.IDENTITY_MATRIX,t.lineMatrix=r.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const r=this.current;r.x=r.lineX+=t,r.y=r.lineY+=e,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${s(r.fontSize)}px`),r.tspan.setAttributeNS(null,"y",s(-r.y))}showText(t){const e=this.current,n=e.font,i=e.fontSize;if(0===i)return;const a=e.fontSizeScale,h=e.charSpacing,d=e.wordSpacing,u=e.fontDirection,p=e.textHScale*u,g=n.vertical,f=g?1:-1,m=n.defaultVMetrics,A=i*e.fontMatrix[0];let v=0;for(const s of t){if(null===s){v+=u*d;continue}if((0,r.isNum)(s)){v+=f*s*i/1e3;continue}const t=(s.isSpace?d:0)+h,o=s.fontChar;let l,c,p,b=s.width;if(g){let t;const e=s.vmetric||m;t=s.vmetric?e[1]:.5*b,t=-t*A,b=e?-e[0]:b,l=t/a,c=(v+e[2]*A)/a}else l=v/a,c=0;(s.isInFont||n.missingFile)&&(e.xcoords.push(e.x+l),g&&e.ycoords.push(-e.y+c),e.tspan.textContent+=o),p=g?b*A-t*u:b*A+t*u,v+=p}e.tspan.setAttributeNS(null,"x",e.xcoords.map(s).join(" ")),e.tspan.setAttributeNS(null,"y",g?e.ycoords.map(s).join(" "):s(-e.y)),g?e.y-=v:e.x+=v*p,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${s(e.fontSize)}px`),e.fontStyle!==l.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==l.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const b=e.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;b===r.TextRenderingMode.FILL||b===r.TextRenderingMode.FILL_STROKE?(e.fillColor!==l.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.tspan.setAttributeNS(null,"fill",e.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(b===r.TextRenderingMode.STROKE||b===r.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(e.tspan,1/(e.textMatrixScale||1));let _=e.textMatrix;0!==e.textRise&&(_=_.slice(),_[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${o(_)} scale(${s(p)}, -1)`),e.txtElement.setAttributeNS(c,"xml:space","preserve"),e.txtElement.appendChild(e.tspan),e.txtgrp.appendChild(e.txtElement),this._ensureTransformGroup().appendChild(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const e=(0,r.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,n=this.commonObjs.get(t[0]);let i=t[1];e.font=n,this.embedFonts&&!n.missingFile&&!this.embeddedFonts[n.loadedName]&&(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),e.fontMatrix=n.fontMatrix||r.FONT_IDENTITY_MATRIX;let a="normal";n.black?a="900":n.bold&&(a="bold");const o=n.italic?"italic":"normal";i<0?(i=-i,e.fontDirection=-1):e.fontDirection=1,e.fontSize=i,e.fontFamily=n.loadedName,e.fontWeight=a,e.fontStyle=o,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",s(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var t;const e=this.current;e.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(t=e.txtElement)?void 0:t.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=d[t]}setLineJoin(t){this.current.lineJoin=u[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,s){this.current.strokeColor=r.Util.makeHexColor(t,e,s)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,s){this.current.fillColor=r.Util.makeHexColor(t,e,s),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,s=this.viewport.height,n=r.Util.inverseTransform(this.transformMatrix),i=r.Util.applyTransform([0,0],n),a=r.Util.applyTransform([0,s],n),o=r.Util.applyTransform([e,0],n),l=r.Util.applyTransform([e,s],n),c=Math.min(i[0],a[0],o[0],l[0]),h=Math.min(i[1],a[1],o[1],l[1]),d=Math.max(i[0],a[0],o[0],l[0]),u=Math.max(i[1],a[1],o[1],l[1]),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",c),p.setAttributeNS(null,"y",h),p.setAttributeNS(null,"width",d-c),p.setAttributeNS(null,"height",u-h),p.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&p.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(p)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],s=t[2],n=t[3]||r.IDENTITY_MATRIX,[i,a,o,l]=t[4],c=t[5],h=t[6],d=t[7],u="shading"+A++,[p,g]=r.Util.applyTransform([i,a],n),[f,m]=r.Util.applyTransform([o,l],n),[v,b]=r.Util.singularValueDecompose2dScale(n),_=c*v,C=h*b,y=this.svgFactory.createElement("svg:pattern");y.setAttributeNS(null,"id",u),y.setAttributeNS(null,"patternUnits","userSpaceOnUse"),y.setAttributeNS(null,"width",_),y.setAttributeNS(null,"height",C),y.setAttributeNS(null,"x",`${p}`),y.setAttributeNS(null,"y",`${g}`);const x=this.svg,S=this.transformMatrix,w=this.current.fillColor,P=this.current.strokeColor,k=this.svgFactory.create(f-p,m-g);if(this.svg=k,this.transformMatrix=n,2===d){const t=r.Util.makeHexColor(...e);this.current.fillColor=t,this.current.strokeColor=t}return this.executeOpTree(this.convertOpList(s)),this.svg=x,this.transformMatrix=S,this.current.fillColor=w,this.current.strokeColor=P,y.appendChild(k.childNodes[0]),this.defs.appendChild(y),`url(#${u})`}_makeShadingPattern(t){switch(t[0]){case"RadialAxial":const e="shading"+A++,s=t[3];let n;switch(t[1]){case"axial":const s=t[4],r=t[5];n=this.svgFactory.createElement("svg:linearGradient"),n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"x1",s[0]),n.setAttributeNS(null,"y1",s[1]),n.setAttributeNS(null,"x2",r[0]),n.setAttributeNS(null,"y2",r[1]);break;case"radial":const i=t[4],a=t[5],o=t[6],l=t[7];n=this.svgFactory.createElement("svg:radialGradient"),n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"cx",a[0]),n.setAttributeNS(null,"cy",a[1]),n.setAttributeNS(null,"r",l),n.setAttributeNS(null,"fx",i[0]),n.setAttributeNS(null,"fy",i[1]),n.setAttributeNS(null,"fr",o);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const t of s){const e=this.svgFactory.createElement("svg:stop");e.setAttributeNS(null,"offset",t[0]),e.setAttributeNS(null,"stop-color",t[1]),n.appendChild(e)}return this.defs.appendChild(n),`url(#${e})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const n=this.current;let i=n.x,a=n.y,o=[],l=0;for(const c of t)switch(0|c){case r.OPS.rectangle:i=e[l++],a=e[l++];const t=i+e[l++],n=a+e[l++];o.push("M",s(i),s(a),"L",s(t),s(a),"L",s(t),s(n),"L",s(i),s(n),"Z");break;case r.OPS.moveTo:i=e[l++],a=e[l++],o.push("M",s(i),s(a));break;case r.OPS.lineTo:i=e[l++],a=e[l++],o.push("L",s(i),s(a));break;case r.OPS.curveTo:i=e[l+4],a=e[l+5],o.push("C",s(e[l]),s(e[l+1]),s(e[l+2]),s(e[l+3]),s(i),s(a)),l+=6;break;case r.OPS.curveTo2:o.push("C",s(i),s(a),s(e[l]),s(e[l+1]),s(e[l+2]),s(e[l+3])),i=e[l+2],a=e[l+3],l+=4;break;case r.OPS.curveTo3:i=e[l+2],a=e[l+3],o.push("C",s(e[l]),s(e[l+1]),s(i),s(a),s(i),s(a)),l+=4;break;case r.OPS.closePath:o.push("Z")}o=o.join(" "),n.path&&t.length>0&&t[0]!==r.OPS.rectangle&&t[0]!==r.OPS.moveTo?o=n.path.getAttributeNS(null,"d")+o:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(n.path)),n.path.setAttributeNS(null,"d",o),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(i,a)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e="clippath"+f++,s=this.svgFactory.createElement("svg:clipPath");s.setAttributeNS(null,"id",e),s.setAttributeNS(null,"transform",o(this.transformMatrix));const r=t.element.cloneNode(!0);if(r.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,s.appendChild(r),this.defs.appendChild(s),t.activeClipUrl){t.clipGroup=null;for(const t of this.extraStack)t.clipGroup=null;s.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,r.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const r=this.current;let n=r.dashArray;1!==e&&n.length>0&&(n=n.map(function(t){return e*t})),t.setAttributeNS(null,"stroke",r.strokeColor),t.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",s(r.miterLimit)),t.setAttributeNS(null,"stroke-linecap",r.lineCap),t.setAttributeNS(null,"stroke-linejoin",r.lineJoin),t.setAttributeNS(null,"stroke-width",s(e*r.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",n.map(s).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",s(e*r.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,r.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const r=t.width,n=t.height,i=p(t,this.forceDataSchema,!!e),a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",s(r)),a.setAttributeNS(null,"height",s(n)),this.current.element=a,this.clip("nonzero");const o=this.svgFactory.createElement("svg:image");o.setAttributeNS(h,"xlink:href",i),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",s(-n)),o.setAttributeNS(null,"width",s(r)+"px"),o.setAttributeNS(null,"height",s(n)+"px"),o.setAttributeNS(null,"transform",`scale(${s(1/r)} ${s(-1/n)})`),e?e.appendChild(o):this._ensureTransformGroup().appendChild(o)}paintImageMaskXObject(t){const e=this.current,r=t.width,n=t.height,i=e.fillColor;e.maskId="mask"+m++;const a=this.svgFactory.createElement("svg:mask");a.setAttributeNS(null,"id",e.maskId);const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",s(r)),o.setAttributeNS(null,"height",s(n)),o.setAttributeNS(null,"fill",i),o.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.appendChild(a),this._ensureTransformGroup().appendChild(o),this.paintInlineImageXObject(t,a)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const t=e[2]-e[0],r=e[3]-e[1],n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",e[0]),n.setAttributeNS(null,"y",e[1]),n.setAttributeNS(null,"width",s(t)),n.setAttributeNS(null,"height",s(r)),this.current.element=n,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),s=this.svgFactory.createElement("svg:defs");e.appendChild(s),this.defs=s;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",o(t.transform)),e.appendChild(r),this.svg=r,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",o(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0,e.XfaLayer=class{static setupStorage(t,e,s,r){const n=r.getValue(e,{value:null});switch(s.name){case"textarea":t.textContent=null!==n.value?n.value:"",t.addEventListener("input",t=>{r.setValue(e,{value:t.target.value})});break;case"input":null!==n.value&&t.setAttribute("value",n.value),"radio"===s.attributes.type?t.addEventListener("change",t=>{const{target:s}=t;for(const e of document.getElementsByName(s.name))e!==s&&r.setValue(e.id.split("-")[0],{value:!1});r.setValue(e,{value:s.checked})}):t.addEventListener("input",t=>{r.setValue(e,{value:t.target.value})});break;case"select":if(null!==n.value)for(const t of s.children)t.attributes.value===n.value&&(t.attributes.selected=!0);t.addEventListener("input",t=>{const s=t.target.options;r.setValue(e,{value:-1===s.selectedIndex?null:s[s.selectedIndex].value})})}}static setAttributes(t,e,s){const{attributes:r}=e;for(const[n,i]of Object.entries(r))null==i||"fieldId"===n||("style"!==n?"textContent"===n?t.textContent=i:t.setAttribute(n,i):Object.assign(t.style,i));s&&void 0!==r.fieldId&&this.setupStorage(t,r.fieldId,e,s)}static render(t){const e=t.annotationStorage,s=t.xfa,r=document.createElement(s.name);s.attributes&&this.setAttributes(r,s);const n=[[s,-1,r]],i=t.div;i.appendChild(r);const a=t.viewport.transform.join(",");for(i.style.transform=`matrix(${a})`,i.setAttribute("class","xfaLayer xfaFont");n.length>0;){const[t,s,r]=n[n.length-1];if(s+1===t.children.length){n.pop();continue}const i=t.children[++n[n.length-1][1]];if(null===i)continue;const{name:a}=i;if("#text"===a){r.appendChild(document.createTextNode(i.value));continue}const o=document.createElement(a);r.appendChild(o),i.attributes&&this.setAttributes(o,i,e),i.children&&i.children.length>0?n.push([i,-1,o]):i.value&&o.appendChild(document.createTextNode(i.value))}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=s(2),n=s(23);const i=__webpack_require__(172),a=__webpack_require__(2001),o=__webpack_require__(3779),l=__webpack_require__(6558),c=/^file:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=class{constructor(t){this.source=t,this.url=function(t){const e=l.parse(t);return"file:"===e.protocol||e.host?e:/^[a-z]:[/\\]/i.test(t)?l.parse(`file:///${t}`):(e.host||(e.protocol="file:"),e)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!=(e=null==(t=this._fullRequestReader)?void 0:t._loaded)?e:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new f(this):new p(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=this.isFsUrl?new m(this,t,e):new g(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class h{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var t=this;return _asyncToGenerator(function*(){if(yield t._readCapability.promise,t._done)return{value:void 0,done:!0};if(t._storedError)throw t._storedError;const e=t._readableStream.read();return null===e?(t._readCapability=(0,r.createPromiseCapability)(),t.read()):(t._loaded+=e.length,t.onProgress&&t.onProgress({loaded:t._loaded,total:t._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class d{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!t.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var t=this;return _asyncToGenerator(function*(){if(yield t._readCapability.promise,t._done)return{value:void 0,done:!0};if(t._storedError)throw t._storedError;const e=t._readableStream.read();return null===e?(t._readCapability=(0,r.createPromiseCapability)(),t.read()):(t._loaded+=e.length,t.onProgress&&t.onProgress({loaded:t._loaded}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function u(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class p extends h{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new r.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const s=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:i,suggestedLength:a}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=a||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(s)};this._request=null,this._request="http:"===this._url.protocol?a.request(u(this._url,t.httpHeaders),e):o.request(u(this._url,t.httpHeaders),e),this._request.on("error",t=>{this._storedError=t,this._headersCapability.reject(t)}),this._request.end()}}class g extends d{constructor(t,e,s){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const e=t.httpHeaders[r];void 0!==e&&(this._httpHeaders[r]=e)}this._httpHeaders.Range=`bytes=${e}-${s-1}`;const n=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};this._request=null,this._request="http:"===this._url.protocol?a.request(u(this._url,this._httpHeaders),n):o.request(u(this._url,this._httpHeaders),n),this._request.on("error",t=>{this._storedError=t}),this._request.end()}}class f extends h{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,"")),i.lstat(e,(t,s)=>{if(t)return"ENOENT"===t.code&&(t=new r.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=s.size,this._setReadableStream(i.createReadStream(e)),this._headersCapability.resolve()})}}class m extends d{constructor(t,e,s){super(t);let r=decodeURIComponent(this._url.path);c.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(i.createReadStream(r,{start:e,end:s-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&e.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+e+'".'):new r.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)},e.extractFilenameFromHeader=function(t){const e=t("Content-Disposition");if(e){let t=(0,n.getFilenameFromContentDispositionHeader)(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(s){}if((0,i.isPdfFile)(t))return t}return null},e.validateRangeRequestCapabilities=function({getResponseHeader:t,isHttp:e,rangeChunkSize:s,disableRange:n}){(0,r.assert)(s>0,"Range chunk size must be larger than zero");const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*s)||n||!e||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(i.allowRangeRequests=!0),i},e.validateResponseStatus=function(t){return 200===t||206===t};var r=s(2),n=s(24),i=s(1)},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){let e=!0,s=n("filename\\*","i").exec(t);if(s){s=s[1];let t=o(s);return t=unescape(t),t=l(t),t=c(t),a(t)}if(s=function(t){const e=[];let s;const r=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(s=r.exec(t));){let[,t,r,n]=s;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[r,n]}const i=[];for(let n=0;n<e.length&&n in e;++n){let[t,s]=e[n];s=o(s),t&&(s=unescape(s),0===n&&(s=l(s))),i.push(s)}return i.join("")}(t),s)return a(c(s));if(s=n("filename","i").exec(t),s){s=s[1];let t=o(s);return t=c(t),a(t)}function n(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function i(t,s){if(t){if(!/^[\x00-\xFF]+$/.test(s))return s;try{const n=new TextDecoder(t,{fatal:!0}),i=(0,r.stringToBytes)(s);s=n.decode(i),e=!1}catch(n){if(/^utf-?8$/i.test(t))try{s=decodeURIComponent(escape(s)),e=!1}catch(i){}}}return s}function a(t){return e&&/[\x80-\xff]/.test(t)&&(t=i("utf-8",t),e&&(t=i("iso-8859-1",t))),t}function o(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const s=e[t].indexOf('"');-1!==s&&(e[t]=e[t].slice(0,s),e.length=t+1),e[t]=e[t].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){const e=t.indexOf("'");return-1===e?t:i(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,s,r){if("q"===s||"Q"===s)return i(e,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{r=atob(r)}catch(n){}return i(e,r)})}return""};var r=s(2)},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=s(2),n=s(23);class i{constructor(t,e){this.url=t,e=e||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this.withCredentials=e.withCredentials||!1,this.getXhr=e.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,s){const r={begin:t,end:e};for(const n in s)r[n]=s[n];return this.request(r)}requestFull(t){return this.request(t)}request(t){const e=this.getXhr(),s=this.currXhrId++,r=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const n in this.httpHeaders){const t=this.httpHeaders[n];void 0!==t&&e.setRequestHeader(n,t)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=206):r.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(s){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];!s||s.onProgress&&s.onProgress(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),4!==n.readyState||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===n.status&&this.isHttp)return void(s.onError&&s.onError(n.status));const i=n.status||200;if((200!==i||206!==s.expectedStatus)&&i!==s.expectedStatus)return void(s.onError&&s.onError(n.status));const a=function(t){const e=t.response;return"string"!=typeof e?e:(0,r.stringToBytes)(e).buffer}(n);if(206===i){const t=n.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);s.onDone({begin:parseInt(e[1],10),chunk:a})}else a?s.onDone({begin:0,chunk:a}):s.onError&&s.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}e.PDFNetworkStream=class{constructor(t){this._source=t,this._manager=new i(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new o(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class a{constructor(t,e){this._manager=t;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(s),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),s=t=>e.getResponseHeader(t),{allowRangeRequests:r,suggestedLength:i}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){const e=(0,n.createResponseStatusError)(t,this._url);this._storedError=e,this._headersReceivedCapability.reject(e);for(const s of this._requests)s.reject(e);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var t=this;return _asyncToGenerator(function*(){if(t._storedError)throw t._storedError;if(t._cachedChunks.length>0)return{value:t._cachedChunks.shift(),done:!1};if(t._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return t._requests.push(e),e.promise})()}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class o{constructor(t,e,s){this._manager=t;const r={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(e,s,r),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onProgress(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})}get isStreamingSupported(){return!1}read(){var t=this;return _asyncToGenerator(function*(){if(null!==t._queuedChunk){const e=t._queuedChunk;return t._queuedChunk=null,{value:e,done:!1}}if(t._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return t._requests.push(e),e.promise})()}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=s(2),n=s(23);function i(t,e,s){return{method:"GET",headers:t,signal:null==s?void 0:s.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function a(t){const e=new Headers;for(const s in t){const r=t[s];void 0!==r&&e.append(s,r)}return e}e.PDFFetchStream=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!=(e=null==(t=this._fullRequestReader)?void 0:t._loaded)?e:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new o(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new l(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class o{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=a(this._stream.httpHeaders);const s=e.url;fetch(s,i(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,n.validateResponseStatus)(t.status))throw(0,n.createResponseStatusError)(t.status,s);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:i,suggestedLength:a}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=a||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var t=this;return _asyncToGenerator(function*(){yield t._headersCapability.promise;const{value:e,done:s}=yield t._reader.read();return s?{value:e,done:s}:(t._loaded+=e.byteLength,t.onProgress&&t.onProgress({loaded:t._loaded,total:t._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}class l{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const o=t.source;this._withCredentials=o.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!o.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${s-1}`);const l=o.url;fetch(l,i(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,n.validateResponseStatus)(t.status))throw(0,n.createResponseStatusError)(t.status,l);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(t=>{if("AbortError"!==(null==t?void 0:t.name))throw t}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var t=this;return _asyncToGenerator(function*(){yield t._readCapability.promise;const{value:e,done:s}=yield t._reader.read();return s?{value:e,done:s}:(t._loaded+=e.byteLength,t.onProgress&&t.onProgress({loaded:t._loaded}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function(){return e.addLinkAttributes}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function(){return e.LinkTarget}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return s.LoopbackPort}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function(){return r.createObjectURL}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return r.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function(){return r.removeNullCharacters}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return r.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return n.AnnotationLayer}}),Object.defineProperty(t,"apiCompatibilityParams",{enumerable:!0,get:function(){return i.apiCompatibilityParams}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return a.GlobalWorkerOptions}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(5),r=__w_pdfjs_require__(2),n=__w_pdfjs_require__(17),i=__w_pdfjs_require__(9),a=__w_pdfjs_require__(12),o=__w_pdfjs_require__(19),l=__w_pdfjs_require__(20),c=__w_pdfjs_require__(21);{const{isNodeJS:t}=__w_pdfjs_require__(4);if(t){const t=__w_pdfjs_require__(22).PDFNodeStream;(0,s.setPDFNetworkStreamFactory)(e=>new t(e))}else{const t=__w_pdfjs_require__(25).PDFNetworkStream;let r;(0,e.isFetchSupported)()&&(r=__w_pdfjs_require__(26).PDFFetchStream),(0,s.setPDFNetworkStreamFactory)(s=>r&&(0,e.isValidFetchUrl)(s.url)?new r(s):new t(s))}}})(),__webpack_exports__})()},module.exports=g()},569:function(t,e,s){"use strict";s.r(e),s.d(e,{InvoiceCheckModule:function(){return lt},RoutingModule:function(){return ot}});var r=s(4655),n=s(5052),i=s(9997),a=s(7716);let o=(()=>{class t{constructor(){this.licensePlate=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})();var l=s(3679),c=s(7301),h=s(9790);const d=["scroll"];let u=(()=>{class t{constructor(t,e){this.data=t,this._invoiceService=e,this.scroll=null,this.updateService=t=>{this._invoiceService.commentSection=t,this.scrollEl.scrollTop=this.scrollEl.scrollHeight}}ngAfterViewInit(){var t;this.scrollEl=null===(t=this.scroll)||void 0===t?void 0:t.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(i.OG),a.Y36(o))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&a.Gf(d,7),2&t){let t;a.iGM(t=a.CRH())&&(e.scroll=t.first)}},decls:6,vars:8,consts:[[3,"placeholder","ngModel","ngModelChange"],[1,"scroll"],["scroll",""],[3,"placeholder","value","valueChanged"]],template:function(t,e){1&t&&(a.TgZ(0,"input",0),a.NdJ("ngModelChange",function(t){return e._invoiceService.licensePlate=t}),a.ALo(1,"translate"),a.qZA(),a.TgZ(2,"div",1,2),a.TgZ(4,"imp-text-area",3),a.NdJ("valueChanged",function(t){return e.updateService(t)}),a.ALo(5,"translate"),a.qZA(),a.qZA()),2&t&&(a.Q6J("placeholder",a.lcZ(1,4,"LicensePlate"))("ngModel",e._invoiceService.licensePlate),a.xp6(4),a.Q6J("placeholder",a.lcZ(5,6,"invoiceComparisonComments"))("value",e._invoiceService.commentSection))},directives:[l.Fj,l.JJ,l.On,c.U],pipes:[h.X$],styles:[".scroll[_ngcontent-%COMP%]{max-height:500px;overflow:auto;border:1px solid rgba(0,0,0,.3);margin-top:10px}input[_ngcontent-%COMP%]:hover{outline:none}input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:active{outline:none;border:2px inset rgba(47,132,236,.5)}"]}),t})();var p=s(9765),g=(()=>{return(t=g||(g={}))[t.None=0]="None",t[t.FreeHand=1]="FreeHand",t[t.Rectangle=2]="Rectangle",g;var t})();let f=(()=>{class t{constructor(){this.activeEditMode=g.FreeHand,this.editModeChanged=new p.xQ,this.notifyEditModeChanged=t=>{this.activeEditMode=t,this.editModeChanged.next(t)},this.activeColor="#000",this.colorChanged=new p.xQ,this.notifyColorChange=t=>this.colorChanged.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=s(6627);let A=(()=>{class t{constructor(t){this.elRef=t,this.rgX=0,this.rgY=0,this.slider="",this.dragEnd=new a.vpe,this.dragStart=new a.vpe,this.newValue=new a.vpe,this.listenerMove=t=>this.move(t),this.listenerStop=()=>this.stop()}mouseDown(t){this.start(t)}touchStart(t){this.start(t)}move(t){t.preventDefault(),this.setCursor(t)}start(t){this.setCursor(t),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(t){const e=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageX?t.pageX:t.touches[0].pageX)-e.left-window.pageXOffset}getY(t){const e=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageY?t.pageY:t.touches[0].pageY)-e.top-window.pageYOffset}setCursor(t){const e=this.elRef.nativeElement.offsetWidth,s=this.elRef.nativeElement.offsetHeight,r=Math.max(0,Math.min(this.getX(t),e)),n=Math.max(0,Math.min(this.getY(t),s));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:r/e,v:1-n/s,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:n/s,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:r/e,rgX:this.rgX})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.SBq))},t.\u0275dir=a.lG2({type:t,selectors:[["","slider",""]],hostBindings:function(t,e){1&t&&a.NdJ("mousedown",function(t){return e.mouseDown(t)})("touchstart",function(t){return e.touchStart(t)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),t})();class v{constructor(t,e,s,r){this.h=t,this.s=e,this.v=s,this.a=r}}class b{constructor(t,e,s,r){this.h=t,this.s=e,this.v=s,this.a=r}}var _=(()=>{return(t=_||(_={}))[t.HEX=0]="HEX",t[t.RGBA=1]="RGBA",t[t.HSLA=2]="HSLA",_;var t})();class C{constructor(t,e,s,r){this.c=t,this.m=e,this.y=s,this.k=r}}class y{constructor(t,e,s,r){this.h=t,this.s=e,this.l=s,this.a=r}}class x{constructor(t,e,s,r){this.h=t,this.s=e,this.v=s,this.a=r}}class S{constructor(t,e,s,r){this.r=t,this.g=e,this.b=s,this.a=r}}let w=(()=>{class t{constructor(){this.active=null}setActive(t){this.active&&this.active!==t&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=t}hsva2hsla(t){const e=t.h,s=t.s,r=t.v,n=t.a;if(0===r)return new y(e,0,0,n);if(0===s&&1===r)return new y(e,1,1,n);{const t=r*(2-s)/2;return new y(e,r*s/(1-Math.abs(2*t-1)),t,n)}}hsla2hsva(t){const e=Math.min(t.h,1),s=Math.min(t.s,1),r=Math.min(t.l,1),n=Math.min(t.a,1);if(0===r)return new x(e,0,0,n);{const t=r+s*(1-Math.abs(2*r-1))/2;return new x(e,2*(t-r)/t,t,n)}}hsvaToRgba(t){let e,s,r;const n=t.h,i=t.s,a=t.v,o=t.a,l=Math.floor(6*n),c=6*n-l,h=a*(1-i),d=a*(1-c*i),u=a*(1-(1-c)*i);switch(l%6){case 0:e=a,s=u,r=h;break;case 1:e=d,s=a,r=h;break;case 2:e=h,s=a,r=u;break;case 3:e=h,s=d,r=a;break;case 4:e=u,s=h,r=a;break;case 5:e=a,s=h,r=d;break;default:e=0,s=0,r=0}return new S(e,s,r,o)}rgbaToCmyk(t){const e=1-Math.max(t.r,t.g,t.b);return 1===e?new C(0,0,0,1):new C((1-t.r-e)/(1-e),(1-t.g-e)/(1-e),(1-t.b-e)/(1-e),e)}rgbaToHsva(t){let e,s;const r=Math.min(t.r,1),n=Math.min(t.g,1),i=Math.min(t.b,1),a=Math.min(t.a,1),o=Math.max(r,n,i),l=Math.min(r,n,i),c=o,h=o-l;if(s=0===o?0:h/o,o===l)e=0;else{switch(o){case r:e=(n-i)/h+(n<i?6:0);break;case n:e=(i-r)/h+2;break;case i:e=(r-n)/h+4;break;default:e=0}e/=6}return new x(e,s,c,a)}rgbaToHex(t,e){let s="#"+(1<<24|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return e&&(s+=(256|Math.round(255*t.a)).toString(16).substr(1)),s}denormalizeRGBA(t){return new S(Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b),t.a)}stringToHsva(t="",e=!1){let s=null;t=(t||"").toLowerCase();const r=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return new S(parseInt(t[2],10)/255,parseInt(t[3],10)/255,parseInt(t[4],10)/255,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return new y(parseInt(t[2],10)/360,parseInt(t[3],10)/100,parseInt(t[4],10)/100,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]))}}];r.push(e?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(t){return new S(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,parseInt(t[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(t){return new S(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1)}}),r.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(t){return new S(parseInt(t[1]+t[1],16)/255,parseInt(t[2]+t[2],16)/255,parseInt(t[3]+t[3],16)/255,1)}});for(const n in r)if(r.hasOwnProperty(n)){const e=r[n],i=e.re.exec(t),a=i&&e.parse(i);if(a)return a instanceof S?s=this.rgbaToHsva(a):a instanceof y&&(s=this.hsla2hsva(a)),s}return s}outputFormat(t,e,s){switch("auto"===e&&(e=t.a<1?"rgba":"hex"),e){case"hsla":const e=this.hsva2hsla(t),r=new y(Math.round(360*e.h),Math.round(100*e.s),Math.round(100*e.l),Math.round(100*e.a)/100);return t.a<1||"always"===s?"hsla("+r.h+","+r.s+"%,"+r.l+"%,"+r.a+")":"hsl("+r.h+","+r.s+"%,"+r.l+"%)";case"rgba":const n=this.denormalizeRGBA(this.hsvaToRgba(t));return t.a<1||"always"===s?"rgba("+n.r+","+n.g+","+n.b+","+Math.round(100*n.a)/100+")":"rgb("+n.r+","+n.g+","+n.b+")";default:const i="always"===s||"forced"===s;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(t)),i)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})();var P=s(8583);const k=["dialogPopup"],R=["hueSlider"],T=["alphaSlider"];function E(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",17),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(3).setColorFromString(e)}),a.TgZ(1,"mat-icon",18),a.NdJ("click",function(e){const s=a.CHM(t).$implicit;return a.oxw(3).onRemovePresetColor(e,s)}),a._uU(2,"remove_circle"),a.qZA(),a.qZA()}2&t&&a.Udp("background-color",e.$implicit)}function F(t,e){if(1&t&&(a.TgZ(0,"div"),a.YNc(1,E,3,2,"div",16),a.qZA()),2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",t.cpPresetColors)}}function M(t,e){if(1&t&&(a.TgZ(0,"div",14),a._UZ(1,"hr"),a.YNc(2,F,2,1,"div",15),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Q6J("ngIf",null==t.cpPresetColors?null:t.cpPresetColors.length)}}let I=(()=>{class t{constructor(t,e,s){this.elRef=t,this.cdRef=e,this.service=s,this.isIE10=!1,this.hsva=null,this.width=0,this.height=0,this.outputColor="",this.initialColor="",this.fallbackColor="",this.sliderH=0,this.sliderDimMax=null,this.directiveElementRef=null,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[_.HEX,_.RGBA,_.HSLA],this.useRootViewContainer=!1,this.show=!1,this.hidden=!1,this.top=0,this.left=0,this.position="",this.format=null,this.slider=null,this.hexText="",this.hexAlpha=0,this.hslaText=null,this.rgbaText=null,this.arrowTop=0,this.selectedColor="",this.hueSliderColor="",this.alphaSliderColor="",this.cpWidth=0,this.cpHeight=0,this.cpColorMode=0,this.cpAlphaChannel=null,this.cpOutputFormat=null,this.cpDisableInput=!1,this.cpDialogDisplay="",this.cpSaveClickOutside=!1,this.cpPosition="",this.cpPositionOffset=0,this.cpOKButton=!1,this.cpOKButtonText="",this.cpOKButtonClass="",this.cpCancelButton=!1,this.cpCancelButtonText="",this.cpCancelButtonClass="",this.cpPresetLabel="",this.cpPresetColors=[],this.cpMaxPresetColorsLength=0,this.cpPresetEmptyMessage="",this.cpPresetEmptyMessageClass="",this.cpAddColorButton=!0,this.cpAddColorButtonText="",this.cpAddColorButtonClass="",this.cpRemoveColorButtonClass="",this.dialogElement=null,this.hueSlider=null,this.alphaSlider=null}handleEsc(t){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(t)}handleEnter(t){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(t)}ngOnInit(){this.slider=new v(0,0,0,0),null!=this.hueSlider&&null!=this.alphaSlider&&(this.sliderDimMax=new b(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140)),this.format="rgba"===this.cpOutputFormat?_.RGBA:"hsla"===this.cpOutputFormat?_.HSLA:_.HEX,this.listenerMouseDown=t=>{this.onMouseDown(t)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||null==this.hueSlider||null==this.alphaSlider||(this.sliderDimMax=new b(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(t,e=!0){this.service.setActive(this),!this.width&&null!=this.directiveElementRef&&(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(t),this.setColorFromString(t,e),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(t,e,s,r,n,i,a,o,l,c,h,d,u,p,g,f,m,A,v,b,_,C,y,x,S,w,P,k,R,T,E,F){this.setInitialColor(s),this.setColorMode(o),this.isIE10=10===function(){let t="";"undefined"!=typeof navigator&&(t=navigator.userAgent.toLowerCase());const e=t.indexOf("msie ");return e>0&&parseInt(t.substring(e+5,t.indexOf(".",e)),10)}(),this.directiveInstance=t,this.directiveElementRef=e,this.cpDisableInput=h,this.cpAlphaChannel=l,this.cpOutputFormat=c,this.cpDialogDisplay=i,this.cpIgnoredElements=d,this.cpSaveClickOutside=u,this.useRootViewContainer=p,this.width=this.cpWidth=parseInt(r,10),this.height=this.cpHeight=parseInt(n,10),this.cpPosition=g,this.cpPositionOffset=parseInt(f,10),this.cpOKButton=y,this.cpOKButtonText=S,this.cpOKButtonClass=x,this.cpCancelButton=w,this.cpCancelButtonText=k,this.cpCancelButtonClass=P,this.fallbackColor=a||"#fff",this.setPresetConfig(A,v),this.cpMaxPresetColorsLength=b,this.cpPresetEmptyMessage=_,this.cpPresetEmptyMessageClass=C,this.cpAddColorButton=R,this.cpAddColorButtonText=E,this.cpAddColorButtonClass=T,this.cpRemoveColorButtonClass=F,m||(this.dialogArrowOffset=0),"inline"===i&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===c&&"always"!==l&&"forced"!==l&&(this.cpAlphaChannel="disabled")}setColorMode(t){switch(t.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}setInitialColor(t){this.initialColor=t}setPresetConfig(t,e){this.cpPresetLabel=t,this.cpPresetColors=e}setColorFromString(t,e=!0,s=!0){let r;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(r=this.service.stringToHsva(t,!0),!r&&!this.hsva&&(r=this.service.stringToHsva(t,!1))):r=this.service.stringToHsva(t,!1),!r&&!this.hsva&&(r=this.service.stringToHsva(this.fallbackColor,!1)),r&&(this.hsva=r,this.sliderH=this.hsva.h,this.updateColorPicker(e,s))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(t){this.directiveInstance.sliderDragEnd({slider:t,color:this.outputColor})}onDragStart(t){this.directiveInstance.sliderDragStart({slider:t,color:this.outputColor})}onMouseDown(t){null!=this.directiveElementRef&&!this.isIE10&&"popup"===this.cpDialogDisplay&&t.target!==this.directiveElementRef.nativeElement&&!this.isDescendant(this.elRef.nativeElement,t.target)&&!this.isDescendant(this.directiveElementRef.nativeElement,t.target)&&0===this.cpIgnoredElements.filter(e=>e===t.target).length&&(this.cpSaveClickOutside||(this.setColorFromString(this.initialColor,!1),this.directiveInstance.colorChanged(this.initialColor)),this.closeColorPicker())}onAcceptColor(t){t.stopPropagation(),"popup"===this.cpDialogDisplay&&this.closeColorPicker(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor)}onCancelColor(t){t.stopPropagation(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker()),this.directiveInstance.colorCanceled()}onFormatToggle(t){const e=this.dialogInputFields.length;if(null!=this.format){const s=((this.dialogInputFields.indexOf(this.format)+t)%e+e)%e;this.format=this.dialogInputFields[s]}}onColorChange(t){null!=this.hsva&&(this.hsva.s=t.s/t.rgX,this.hsva.v=t.v/t.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor}))}onHueChange(t){null!=this.hsva&&(this.hsva.h=t.v/t.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor}))}onValueChange(t){null!=this.hsva&&(this.hsva.v=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor}))}onAlphaChange(t){null!=this.hsva&&(this.hsva.a=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor}))}onHexInput(t){if(null===t)this.updateColorPicker();else{t&&"#"!==t[0]&&(t="#"+t);let e=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(e=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi),e.test(t)&&(t.length<5&&(t="#"+t.substring(1).split("").map(t=>t+t).join("")),"forced"===this.cpAlphaChannel&&null!=this.hsva&&(t+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(t,!0,!1),this.directiveInstance.inputChanged({input:"hex",value:t,color:this.outputColor}))}}onRedInput(t){if(null!=this.hsva){const e=this.service.hsvaToRgba(this.hsva);e.r=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.inputChanged({input:"red",value:e.r,color:this.outputColor})}}onBlueInput(t){if(null!=this.hsva){const e=this.service.hsvaToRgba(this.hsva);e.b=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.inputChanged({input:"blue",value:e.b,color:this.outputColor})}}onGreenInput(t){if(null!=this.hsva){const e=this.service.hsvaToRgba(this.hsva);e.g=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.inputChanged({input:"green",value:e.g,color:this.outputColor})}}onHueInput(t){null!=this.hsva&&(this.hsva.h=t.v/t.rg,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.inputChanged({input:"hue",value:this.hsva.h,color:this.outputColor}))}onValueInput(t){null!=this.hsva&&(this.hsva.v=t.v/t.rg,this.updateColorPicker(),this.directiveInstance.inputChanged({input:"value",value:this.hsva.v,color:this.outputColor}))}onAlphaInput(t){null!=this.hsva&&(this.hsva.a=t.v/t.rg,this.updateColorPicker(),this.directiveInstance.inputChanged({input:"alpha",value:this.hsva.a,color:this.outputColor}))}onLightnessInput(t){if(null!=this.hsva){const e=this.service.hsva2hsla(this.hsva);e.l=t.v/t.rg,this.hsva=this.service.hsla2hsva(e),this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.inputChanged({input:"lightness",value:e.l,color:this.outputColor})}}onSaturationInput(t){if(null!=this.hsva){const e=this.service.hsva2hsla(this.hsva);e.s=t.v/t.rg,this.hsva=this.service.hsla2hsva(e),this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.inputChanged({input:"saturation",value:e.s,color:this.outputColor})}}onAddPresetColor(t,e){t.stopPropagation(),this.cpPresetColors.push(e),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}onRemovePresetColor(t,e){t.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(t=>t!==e),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||document.addEventListener("mousedown",this.listenerMouseDown),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||document.removeEventListener("mousedown",this.listenerMouseDown),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(t=!0,e=!0){if(this.sliderDimMax){const s=this.outputColor;if(null!=this.hsva){2===this.cpColorMode&&(this.hsva.s=0);const t=this.service.hsva2hsla(this.hsva),s=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),r=this.service.denormalizeRGBA(this.service.hsvaToRgba(new x(this.sliderH||this.hsva.h,1,1,1)));this.hueSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.alphaSliderColor="rgb("+s.r+","+s.g+","+s.b+")",e&&(this.hslaText=new y(Math.round(360*t.h),Math.round(100*t.s),Math.round(100*t.l),Math.round(100*t.a)/100),this.rgbaText=new S(s.r,s.g,s.b,Math.round(100*s.a)/100),this.hexText=this.service.rgbaToHex(s,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a)}"auto"===this.cpOutputFormat&&null!=this.hsva&&this.hsva.a<1&&(this.format=this.hsva.a<1?_.RGBA:_.HEX),null!=this.hsva&&(null!=this.cpOutputFormat&&null!=this.cpAlphaChannel&&(this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel)),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.slider=new v((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8)),t&&s!==this.outputColor&&this.directiveInstance.colorChanged(this.outputColor)}}setDialogPosition(){var t,e,s;if("inline"===this.cpDialogDisplay)this.position="relative";else{let r,n="static",i="",a=null,o=null,l=null===(t=this.directiveElementRef)||void 0===t?void 0:t.nativeElement.parentNode;const c=null===(e=this.dialogElement)||void 0===e?void 0:e.nativeElement.offsetHeight;for(;null!==l&&"HTML"!==l.tagName;){if(r=window.getComputedStyle(l),n=r.getPropertyValue("position"),i=r.getPropertyValue("transform"),"static"!==n&&null===a&&(a=l),i&&"none"!==i&&null===o&&(o=l),"fixed"===n){a=o;break}l=l.parentNode}const h=this.createDialogBox(null===(s=this.directiveElementRef)||void 0===s?void 0:s.nativeElement,"fixed"!==n);if(this.useRootViewContainer||"fixed"===n&&(!a||a instanceof HTMLUnknownElement))this.top=h.top,this.left=h.left;else{null===a&&(a=l);const t=this.createDialogBox(a,"fixed"!==n);this.top=h.top-t.top,this.left=h.left-t.left}"fixed"===n&&(this.position="fixed"),"left"===this.cpPosition?(this.top+=h.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):"top"===this.cpPosition?(this.arrowTop=c-1,this.top-=c+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*h.width-this.dialogArrowOffset):"bottom"===this.cpPosition?(this.top+=h.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*h.width-this.dialogArrowOffset):(this.top+=h.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=h.width+this.dialogArrowSize-2)}}isDescendant(t,e){let s=e.parentNode;for(;null!==s;){if(s===t)return!0;s=s.parentNode}return!1}createDialogBox(t,e){return{top:t.getBoundingClientRect().top+(e?window.pageYOffset:0),left:t.getBoundingClientRect().left+(e?window.pageXOffset:0),width:t.offsetWidth,height:t.offsetHeight}}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(w))},t.\u0275cmp=a.Xpm({type:t,selectors:[["color-picker"]],viewQuery:function(t,e){if(1&t&&(a.Gf(k,7),a.Gf(R,7),a.Gf(T,7)),2&t){let t;a.iGM(t=a.CRH())&&(e.dialogElement=t.first),a.iGM(t=a.CRH())&&(e.hueSlider=t.first),a.iGM(t=a.CRH())&&(e.alphaSlider=t.first)}},hostBindings:function(t,e){1&t&&a.NdJ("keyup.esc",function(t){return e.handleEsc(t)},!1,a.evT)("keyup.enter",function(t){return e.handleEnter(t)},!1,a.evT)},decls:17,vars:31,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],[1,"cursor"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color",3,"click"],[1,"right"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","preset-area",4,"ngIf"],[1,"preset-area"],[4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[1,"cp-remove-color-button-class",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0,1),a.NdJ("click",function(t){return t.stopPropagation()}),a.TgZ(2,"div",2),a.NdJ("newValue",function(t){return e.onColorChange(t)})("dragStart",function(){return e.onDragStart("saturation-lightness")})("dragEnd",function(){return e.onDragEnd("saturation-lightness")}),a._UZ(3,"div",3),a.qZA(),a.TgZ(4,"div",4),a.TgZ(5,"div",5),a._UZ(6,"div",6),a.TgZ(7,"mat-icon",7),a.NdJ("click",function(t){return e.onAddPresetColor(t,e.selectedColor)}),a._uU(8,"add_circle"),a.qZA(),a.qZA(),a.TgZ(9,"div",8),a.TgZ(10,"div",9,10),a.NdJ("newValue",function(t){return e.onHueChange(t)})("dragStart",function(){return e.onDragStart("hue")})("dragEnd",function(){return e.onDragEnd("hue")}),a._UZ(12,"div",3),a.qZA(),a.TgZ(13,"div",11,12),a.NdJ("newValue",function(t){return e.onAlphaChange(t)})("dragStart",function(){return e.onDragStart("alpha")})("dragEnd",function(){return e.onDragEnd("alpha")}),a._UZ(15,"div",3),a.qZA(),a.qZA(),a.qZA(),a.YNc(16,M,3,1,"div",13),a.qZA()),2&t&&(a.Udp("visibility",e.hidden||!e.show?"hidden":"visible")("top",e.top,"px")("left",e.left,"px")("position",e.position)("height",e.cpHeight,"px")("width",e.cpWidth,"px"),a.xp6(2),a.Udp("background-color",e.hueSliderColor),a.Q6J("rgX",1)("rgY",1),a.xp6(1),a.Udp("top",null==e.slider?null:e.slider.v,"px")("left",null==e.slider?null:e.slider.s,"px"),a.xp6(4),a.Udp("color",e.selectedColor),a.xp6(3),a.Q6J("rgX",1),a.xp6(2),a.Udp("left",null==e.slider?null:e.slider.h,"px"),a.xp6(1),a.Udp("background-color",e.alphaSliderColor),a.Q6J("rgX",1),a.xp6(2),a.Udp("left",null==e.slider?null:e.slider.a,"px"),a.xp6(1),a.Q6J("ngIf",(null==e.cpPresetColors?null:e.cpPresetColors.length)||e.cpAddColorButton))},directives:[A,m.Hw,P.O5,P.sg],styles:[".color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:#000 solid 1px;border-radius:2px;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff}.color-picker .cursor{position:relative;width:16px;height:16px;border:#222 solid 2px;border-radius:50%;cursor:default}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .box{display:flex;padding:4px 8px}.color-picker .box .left{position:relative;padding:16px 8px}.color-picker .box .left .selected-color{position:absolute;top:12px;left:2px;width:50px;height:50px;border-radius:50%;font-size:50px}.color-picker .box .left .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .box .right{flex:1 1 auto;padding:12px 8px}.color-picker .box .right .hue{cursor:pointer;display:block;direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .box .right .alpha{cursor:pointer;display:block;direction:ltr;width:100%;height:16px;border:none;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:#a9a9a9 solid 1px;border-radius:25%;cursor:pointer}.color-picker .preset-area .cp-remove-color-button-class{cursor:pointer;position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;font-size:11px;border-radius:50%;background:#fff;box-shadow:-1px 1px 1px #fff}.color-picker *{box-sizing:border-box;margin:0}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,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)}\n"],encapsulation:2}),t})(),O=(()=>{class t{constructor(t,e,s,r,n,i){this.injector=t,this.cfr=e,this.appRef=s,this.vcRef=r,this.elRef=n,this._service=i,this.dialogCreated=!1,this.ignoreChanges=!1,this.cmpRef=null,this.colorPicker="#fff",this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="right",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColors=["#000","#f00","#ff0","#0f0","#0ff","#00f"],this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new a.vpe(!0),this.cpToggleChange=new a.vpe(!0),this.cpSliderChange=new a.vpe(!0),this.cpSliderDragEnd=new a.vpe(!0),this.cpSliderDragStart=new a.vpe(!0),this.colorPickerOpen=new a.vpe(!0),this.colorPickerClose=new a.vpe(!0),this.colorPickerCancel=new a.vpe(!0),this.colorPickerSelect=new a.vpe(!0),this.colorPickerChange=new a.vpe(!1),this.cpPresetColorsChange=new a.vpe(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(t){this.inputChange(t)}ngOnDestroy(){null!=this.cmpRef&&this.cmpRef.destroy()}ngOnChanges(t){var e;t.cpToggle&&!this.cpDisabled&&(t.cpToggle.currentValue?this.openDialog():t.cpToggle.currentValue||this.closeDialog()),t.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(t.colorPicker.currentValue),this.dialog.setColorFromString(t.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&(null===(e=this.cmpRef)||void 0===e||e.changeDetectorRef.detectChanges())),this.ignoreChanges=!1),(t.cpPresetLabel||t.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let t=this.vcRef;if(this.dialogCreated=!0,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const e=this.injector.get(this.appRef.componentTypes[0]);t=e.vcRef||e.viewContainerRef||this.vcRef,t===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor.")}const e=this.cfr.resolveComponentFactory(I),s=a.XwF.fromResolvedProviders([],t.parentInjector);this.cmpRef=t.createComponent(e,0,s,[]),this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass),this.dialog=this.cmpRef.instance,this.vcRef!==t&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}stateChanged(t){this.cpToggleChange.emit(t),t?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(t,e=!0){this.ignoreChanges=e,this.colorPickerChange.emit(t)}colorCanceled(){this.colorPickerCancel.emit()}colorSelected(t){this.colorPickerSelect.emit(t)}inputFocus(){const t=this.elRef.nativeElement,e=this.cpIgnoredElements.filter(e=>e===t);!this.cpDisabled&&!e.length&&("undefined"!=typeof document&&t===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(t){this.dialog?this.dialog.setColorFromString(t.target.value,!0):(this.colorPicker=t.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(t){this.cpInputChange.emit(t)}sliderChanged(t){this.cpSliderChange.emit(t)}sliderDragEnd(t){this.cpSliderDragEnd.emit(t)}sliderDragStart(t){this.cpSliderDragStart.emit(t)}presetColorsChanged(t){this.cpPresetColorsChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.zs3),a.Y36(a._Vd),a.Y36(a.z2F),a.Y36(a.s_b),a.Y36(a.SBq),a.Y36(w))},t.\u0275dir=a.lG2({type:t,selectors:[["","colorPicker",""]],hostBindings:function(t,e){1&t&&a.NdJ("click",function(){return e.handleClick()})("focus",function(){return e.handleFocus()})("input",function(t){return e.handleInput(t)})},inputs:{colorPicker:"colorPicker",cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColors:"cpPresetColors",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[a.TTD]}),t})();var D=s(257),L=s(594);const N=function(){return[700,65]};let q=(()=>{class t{constructor(t){this._service=t}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(o))},t.\u0275cmp=a.Xpm({type:t,selectors:[["imp-cover-page"]],decls:14,vars:7,consts:[[1,"invoice-cover-page"],["imgPath","assets/img/Logo_Imp_D_P.jpg","title","invoiceComparisonTitle",3,"dims"],[2,"width","100%"],[2,"text-align","center","padding","60px","font-weight","bold",3,"innerHtml"],[2,"text-align","center"],["src","assets/img/some_picture.PNG","alt","Invoice Comparison flavour image","width","250"],[2,"padding-top","30px",3,"innerHtml"],[3,"value"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"imp-report-title",1),a.TgZ(2,"table",2),a.TgZ(3,"tr"),a._UZ(4,"td",3),a.qZA(),a.TgZ(5,"tr"),a.TgZ(6,"td",4),a._UZ(7,"img",5),a.qZA(),a.qZA(),a.TgZ(8,"tr"),a._UZ(9,"td",6),a.ALo(10,"translate"),a.qZA(),a.TgZ(11,"tr"),a.TgZ(12,"td"),a._UZ(13,"textarea",7),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.Q6J("dims",a.DdM(6,N)),a.xp6(3),a.Q6J("innerHtml",e._service.licensePlate,a.oJD),a.xp6(5),a.Q6J("innerHtml",a.lcZ(10,4,"invoiceComparisonComments"),a.oJD),a.xp6(4),a.Q6J("value",e._service.commentSection||""))},directives:[L.b],pipes:[h.X$],styles:["textarea[_ngcontent-%COMP%]{width:100%;height:300px;resize:none}@media screen{.invoice-cover-page[_ngcontent-%COMP%]{display:none}}@media print{.invoice-cover-page[_ngcontent-%COMP%]{page-break-after:always}}"]}),t})();var j=s(1169),B=s(8552),U=s(2759),W=s(5917),V=s(3190),G=s(6782),H=s(9328);const z=["canvas"];let Y=(()=>{class t{constructor(t){this._service=t,this.canvas=null,this.canvasWidth=0,this.canvasHeight=0,this.cx=null,this.canvasEl=null,this.subscriptions=null,this.changeMode=t=>{var e;t==g.FreeHand?(null===(e=this.cx)||void 0===e||e.setLineDash([0]),this.rectUnsub(),this.freeHandSubs()):t==g.Rectangle&&(this.freeHandUnsub(),this.rectSubs())},this.freeHandSubObj=null,this.freeHandSubs=()=>{null!=this.canvasEl&&(this.freeHandSubObj=(0,U.R)(this.canvasEl,"mousedown").pipe((0,V.w)(t=>this.canvasEl?(0,U.R)(this.canvasEl,"mousemove").pipe((0,G.R)((0,U.R)(this.canvasEl,"mouseup")),(0,G.R)((0,U.R)(this.canvasEl,"mouseleave")),(0,H.G)()):(0,W.of)(null))).subscribe(t=>{null!=t&&null!=this.canvasEl&&(this.offsetRect=this.canvasEl.getBoundingClientRect(),this.drawOnCanvas({x:t[0].clientX-this.offsetRect.left,y:t[0].clientY-this.offsetRect.top},{x:t[1].clientX-this.offsetRect.left,y:t[1].clientY-this.offsetRect.top}))}))},this.rect={},this.drag=!1,this.rectSubbed=!1,this.directionX=1,this.directionY=1,this.rectSubs=()=>{null!=this.canvasEl&&(this.canvasEl.addEventListener("mousedown",this.rectMouseDown,!1),this.canvasEl.addEventListener("mouseup",this.rectMouseUp,!1),this.canvasEl.addEventListener("mousemove",this.rectMouseMove,!1),this.rectSubbed=!0)},this.rectUnsub=()=>{null!=this.canvasEl&&this.rectSubbed&&(this.canvasEl.removeEventListener("mousedown",this.rectMouseDown,!1),this.canvasEl.removeEventListener("mouseup",this.rectMouseUp,!1),this.canvasEl.removeEventListener("mousemove",this.rectMouseMove,!1),this.rectSubbed=!1)},this.rectMouseDown=t=>{null!=this.canvasEl&&(this.offsetRect=this.canvasEl.getBoundingClientRect(),this.rect.startX=t.clientX-this.offsetRect.left,this.rect.startY=t.clientY-this.offsetRect.top,this.drag=!0)},this.rectMouseUp=()=>{this.drag=!1,this.clearLastRect(),this.drawSolidRect()},this.rectMouseMove=t=>{this.drag&&(this.clearLastRect(),null!=this.canvasEl&&(this.offsetRect=this.canvasEl.getBoundingClientRect(),this.rect.width=t.clientX-this.offsetRect.left-this.rect.startX,this.rect.height=t.clientY-this.offsetRect.top-this.rect.startY,this.directionX=this.rect.width>0?1:-1,this.directionY=this.rect.height>0?1:-1),this.drawDashRect())},this.clearLastRect=()=>{null!=this.cx&&this.cx.clearRect(this.rect.startX-this.directionX*this.cx.lineWidth,this.rect.startY-this.directionY*this.cx.lineWidth,this.rect.width+this.directionX*this.cx.lineWidth*2,this.rect.height+this.directionY*this.cx.lineWidth*2)},this.drawSolidRect=()=>{var t,e;null===(t=this.cx)||void 0===t||t.setLineDash([0]),null===(e=this.cx)||void 0===e||e.strokeRect(this.rect.startX,this.rect.startY,this.rect.width,this.rect.height)},this.drawDashRect=()=>{var t,e;null===(t=this.cx)||void 0===t||t.setLineDash([6]),null===(e=this.cx)||void 0===e||e.strokeRect(this.rect.startX,this.rect.startY,this.rect.width,this.rect.height)}}ngOnInit(){this.subscriptions=this._service.colorChanged.subscribe(t=>{null!=this.cx&&(this.cx.strokeStyle=t)}),this.subscriptions.add(this._service.editModeChanged.subscribe(t=>this.changeMode(t)))}ngAfterViewInit(){null!=this.canvas&&(this.canvasEl=this.canvas.nativeElement,null!=this.canvasEl&&(this.cx=this.canvasEl.getContext("2d"),this.canvasEl.width=this.canvasWidth,this.canvasEl.height=this.canvasHeight,null!=this.cx&&(this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle=this._service.activeColor))),this.changeMode(this._service.activeEditMode)}freeHandUnsub(){this.freeHandSubObj&&this.freeHandSubObj.unsubscribe()}drawOnCanvas(t,e){!this.cx||(this.cx.beginPath(),t&&(this.cx.moveTo(t.x,t.y),this.cx.lineTo(e.x,e.y),this.cx.stroke()))}ngOnDestroy(){this.freeHandUnsub(),this.rectUnsub(),this.subscriptions&&this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(f))},t.\u0275cmp=a.Xpm({type:t,selectors:[["imp-draw-canvas"]],viewQuery:function(t,e){if(1&t&&a.Gf(z,7),2&t){let t;a.iGM(t=a.CRH())&&(e.canvas=t.first)}},inputs:{canvasWidth:"canvasWidth",canvasHeight:"canvasHeight"},decls:2,vars:0,consts:[[1,"overlayCanvas"],["canvas",""]],template:function(t,e){1&t&&a._UZ(0,"canvas",0,1)},styles:[".overlayCanvas[_ngcontent-%COMP%]{position:absolute;z-index:100}"]}),t})();const X=["canvas"];function Z(t,e){if(1&t&&a._UZ(0,"imp-draw-canvas",4),2&t){const t=a.oxw();a.Q6J("canvasWidth",t.canvasEl.width)("canvasHeight",t.canvasEl.height)}}let K=(()=>{class t{constructor(){this.canvas=null,this.cx=null,this.canvasEl=null}ngAfterViewInit(){Promise.resolve(null).then(()=>{if(null!=this.canvas&&(this.canvasEl=this.canvas.nativeElement,null!=this.canvasEl)){this.cx=this.canvasEl.getContext("2d");const t=this.page.getViewport(1.2);this.canvasEl.height=t.height,this.canvasEl.width=t.width,this.page.render({canvasContext:this.cx,viewport:t})}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["imp-render-canvas"]],viewQuery:function(t,e){if(1&t&&a.Gf(X,7),2&t){let t;a.iGM(t=a.CRH())&&(e.canvas=t.first)}},inputs:{page:"page"},decls:4,vars:1,consts:[[1,"canvas-container"],[1,"overlayCanvas"],["canvas",""],[3,"canvasWidth","canvasHeight",4,"ngIf"],[3,"canvasWidth","canvasHeight"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"canvas",1,2),a.YNc(3,Z,1,2,"imp-draw-canvas",3),a.qZA()),2&t&&(a.xp6(3),a.Q6J("ngIf",e.canvasEl))},directives:[P.O5,Y],styles:[".canvas-container[_ngcontent-%COMP%]{position:relative;width:714px;height:1010px}.canvas-container[_ngcontent-%COMP%]   .overlayCanvas[_ngcontent-%COMP%]{position:absolute;left:0;z-index:90}@media print{.canvas-container[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:60px}}"]}),t})();function J(t,e){1&t&&a._UZ(0,"imp-render-canvas",3),2&t&&a.Q6J("page",e.$implicit)}function Q(t,e){if(1&t&&(a.TgZ(0,"div",1),a.YNc(1,J,1,1,"imp-render-canvas",2),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.pages)}}let $=(()=>{class t{constructor(){this._PDF="",this.numOfPages=0,this.showError=!1,this.pages=[],this._isValid=!1,B.GlobalWorkerOptions.workerSrc="//mozilla.github.io/pdf.js/build/pdf.worker.js"}set PDF(t){this._PDF=t,this.initPdfViewer()}get PDF(){return this._PDF}get isValidPDF(){return null==this._isValid&&(this._isValid=!(!this.PDF||""===this.PDF||this.showError)),this._isValid}initPdfViewer(){this.isValidPDF&&B.getDocument(this._PDF).promise.then(t=>{this.PDFDocument=t,this.numOfPages=t.numPages,this.renderAllPages()},t=>{this.trackError(t)})}renderAllPages(){this.showError=!1;for(let t=1;t<=this.numOfPages;t++)this.PDFDocument.getPage(t).then(t=>this.pages.push(t))}trackError(t){this.showError=!0,this.PDFDocument=void 0,this.PDF="",console.error(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["imp-pdf-viewer"]],inputs:{PDF:"PDF"},decls:1,vars:1,consts:[["class","flex column","class","pdf-container",4,"ngIf"],[1,"pdf-container"],[3,"page",4,"ngFor","ngForOf"],[3,"page"]],template:function(t,e){1&t&&a.YNc(0,Q,2,1,"div",0),2&t&&a.Q6J("ngIf",e._isValid&&e.pages)},directives:[P.O5,P.sg,K],styles:[".pdf-container[_ngcontent-%COMP%]{height:-webkit-fill-available}@media print{.pdf-container[_ngcontent-%COMP%]{min-height:-webkit-fit-content;min-height:-moz-fit-content;min-height:fit-content}}"]}),t})();function tt(t,e){if(1&t&&a._UZ(0,"imp-pdf-viewer",5),2&t){const t=a.oxw();a.Q6J("PDF",t.pdfFile)}}function et(t,e){if(1&t&&(a.TgZ(0,"div",8),a._UZ(1,"img",9),a._UZ(2,"imp-draw-canvas",10),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("alt",t),a.uIk("src",t,a.LSH),a.xp6(1),a.Q6J("canvasWidth",714)("canvasHeight",1010)}}function st(t,e){if(1&t&&(a.TgZ(0,"div",6),a.YNc(1,et,3,4,"div",7),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.imgsPaths)}}let rt=(()=>{class t{constructor(t){this._imageParser=t,this.inputId="",this.label="",this.docFile=null,this.imgsPaths=[],this.width=0,this.height=0,this.dimensionsRead=!1,this.fileName="Choose Invoice"}addFile(t){if(t.target.files.length>0)if(this.imgsPaths=this._imageParser.parseImages(t),this.imgsPaths.length>0)this.fileName=`${this.imgsPaths.length.toString()} images`;else if("undefined"!=typeof FileReader){const e=new FileReader;this.fileName=t.target.files[0].name,e.onload=t=>{this.pdfFile=t.target.result},e.readAsArrayBuffer(t.target.files[0])}}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(j.U))},t.\u0275cmp=a.Xpm({type:t,selectors:[["imp-invoice-element"]],inputs:{inputId:"inputId",label:"label"},features:[a._Bn([j.U])],decls:8,vars:5,consts:[["type","file","multiple","multiple","accept","image/png, image/jpeg, .pdf",1,"inputFile",3,"id","change"],[1,"hide-print","flex","row",3,"for"],[1,"flex","column","sp-around","label-info",3,"innerHtml"],[3,"PDF",4,"ngIf"],["class","flex column invoiceItem",4,"ngIf"],[3,"PDF"],[1,"flex","column","invoiceItem"],["class","img-item overlay-container",4,"ngFor","ngForOf"],[1,"img-item","overlay-container"],["width","714","heigh","1010",3,"alt"],[3,"canvasWidth","canvasHeight"]],template:function(t,e){1&t&&(a.TgZ(0,"div"),a.TgZ(1,"input",0),a.NdJ("change",function(t){return e.addFile(t)}),a.qZA(),a.TgZ(2,"label",1),a.TgZ(3,"mat-icon"),a._uU(4,"note_add"),a.qZA(),a._UZ(5,"div",2),a.qZA(),a.YNc(6,tt,1,1,"imp-pdf-viewer",3),a.YNc(7,st,2,1,"div",4),a.qZA()),2&t&&(a.xp6(1),a.Q6J("id",e.inputId),a.xp6(1),a.Q6J("for",e.inputId),a.xp6(3),a.Q6J("innerHtml",e.label||e.fileName,a.oJD),a.xp6(1),a.Q6J("ngIf",e.pdfFile),a.xp6(1),a.Q6J("ngIf",e.imgsPaths.length>0))},directives:[m.Hw,P.O5,$,P.sg,Y],styles:[".invoiceItem[_ngcontent-%COMP%]{height:-webkit-fill-available}.invoiceItem[_ngcontent-%COMP%]   .img-item[_ngcontent-%COMP%]{min-height:1010px}.invoiceItem[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{position:relative}.invoiceItem[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:absolute;top:0;left:0}@media print{.invoiceItem[_ngcontent-%COMP%]{min-height:-webkit-fit-content;min-height:-moz-fit-content;min-height:fit-content}.invoiceItem[_ngcontent-%COMP%]   .img-item[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:60px}}"],changeDetection:0}),t})();const nt=function(){return["/welcome"]},it=[w],at=[{path:"",component:(()=>{class t{constructor(t,e,s){this._drawService=t,this.bottomSheet=e,this._service=s,this.openComments=()=>this.bottomSheet.open(u),this.print=()=>window.print()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(f),a.Y36(i.ch),a.Y36(o))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],decls:27,vars:17,consts:[[1,"container"],[1,"flex","row","tool-bar","hide-print"],[1,"mr-auto",3,"routerLink"],[1,"",3,"click"],[3,"click"],[3,"cpPosition","cpPositionOffset","colorPicker","colorPickerChange"],[1,"mr-auto",3,"click"],[1,"flex","row","sp-between","invoiceContainer"],["inputId","left",1,"invoiceItemContainer",3,"label"],["inputId","right",1,"invoiceItemContainer",3,"label"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"mat-icon"),a._uU(4,"first_page"),a.qZA(),a.qZA(),a.TgZ(5,"div",3),a.NdJ("click",function(){return e.openComments()}),a.TgZ(6,"mat-icon"),a._uU(7,"chat"),a.qZA(),a.qZA(),a.TgZ(8,"div",4),a.NdJ("click",function(){return e._drawService.notifyEditModeChanged(1)}),a.TgZ(9,"mat-icon"),a._uU(10,"gesture"),a.qZA(),a.qZA(),a.TgZ(11,"div",4),a.NdJ("click",function(){return e._drawService.notifyEditModeChanged(2)}),a.TgZ(12,"mat-icon"),a._uU(13,"crop_free"),a.qZA(),a.qZA(),a.TgZ(14,"div"),a.TgZ(15,"mat-icon",5),a.NdJ("colorPickerChange",function(t){return e._drawService.activeColor=t})("colorPickerChange",function(t){return e._drawService.notifyColorChange(t)}),a._uU(16,"palette"),a.qZA(),a.qZA(),a._UZ(17,"imp-lang-picker"),a.TgZ(18,"div",6),a.NdJ("click",function(){return e.print()}),a.TgZ(19,"mat-icon"),a._uU(20,"print"),a.qZA(),a.qZA(),a.qZA(),a._UZ(21,"imp-cover-page"),a.TgZ(22,"div",7),a._UZ(23,"imp-invoice-element",8),a.ALo(24,"translate"),a._UZ(25,"imp-invoice-element",9),a.ALo(26,"translate"),a.qZA(),a.qZA()),2&t&&(a.xp6(2),a.Q6J("routerLink",a.DdM(16,nt)),a.xp6(7),a.Udp("color",1==e._drawService.activeEditMode?"#2f84ec":"#000"),a.xp6(3),a.Udp("color",2==e._drawService.activeEditMode?"#2f84ec":"#000"),a.xp6(3),a.Udp("color",e._drawService.activeColor),a.Q6J("cpPosition","bottom")("cpPositionOffset","-500px")("colorPicker",e._drawService.activeColor),a.xp6(8),a.Q6J("label",a.lcZ(24,12,"invoice")),a.xp6(2),a.Q6J("label",a.lcZ(26,14,"inspection")))},directives:[r.rH,m.Hw,O,D._,q,rt],pipes:[h.X$],styles:[".invoiceContainer[_ngcontent-%COMP%]{width:auto;max-width:100%;height:auto;flex:1 1 auto;padding-top:50px}.invoiceContainer[_ngcontent-%COMP%]   .invoiceItemContainer[_ngcontent-%COMP%]{width:49%;overflow:auto}.commentSection[_ngcontent-%COMP%]{display:none}@media screen{.invoiceItemContainer[_ngcontent-%COMP%]{border:1px solid}}@media print{.invoiceContainer[_ngcontent-%COMP%]{flex-flow:row wrap;padding-top:0}.invoiceContainer[_ngcontent-%COMP%]   .invoiceItemContainer[_ngcontent-%COMP%]{width:100%;min-height:-webkit-fit-content;min-height:-moz-fit-content;min-height:fit-content;padding-bottom:10px;page-break-after:always;overflow:visible}.commentSection[_ngcontent-%COMP%]{display:block;page-break-after:always}}"]}),t})()}];let ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.Bz.forChild(at)],r.Bz]}),t})(),lt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[o,it],imports:[[n.m,ot,h.aw.forChild({extend:!0})]]}),t})()},1169:function(t,e,s){"use strict";s.d(e,{U:function(){return i}});var r=s(7716),n=s(9075);let i=(()=>{class t{constructor(t){this.sanitizer=t,this.parseImages=t=>{let e=[];for(let s=0;s<t.target.files.length;s++){if(!t.target.files[s].type.includes("image")){e=[];break}e.push(this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(t.target.files[s])))}return e}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(n.H7))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})()},7301:function(t,e,s){"use strict";s.d(e,{U:function(){return a}});var r=s(7716),n=s(3679);const i=["textarea"];let a=(()=>{class t{constructor(){this.textarea=null,this.placeholder="",this.valueChanged=new r.vpe,this.adjust=()=>{this.textareaEl.style.height="1px",this.textareaEl.style.height=this.textareaEl.scrollHeight+"px",this.valueChanged.emit(this.value)}}ngAfterViewInit(){var t;this.textareaEl=null===(t=this.textarea)||void 0===t?void 0:t.nativeElement}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["imp-text-area"]],viewQuery:function(t,e){if(1&t&&r.Gf(i,7),2&t){let t;r.iGM(t=r.CRH())&&(e.textarea=t.first)}},inputs:{value:"value",placeholder:"placeholder"},outputs:{valueChanged:"valueChanged"},decls:2,vars:2,consts:[[2,"overflow","hidden",3,"ngModel","placeholder","keyup","ngModelChange"],["textarea",""]],template:function(t,e){1&t&&(r.TgZ(0,"textarea",0,1),r.NdJ("keyup",function(){return e.adjust()})("ngModelChange",function(t){return e.value=t}),r.qZA()),2&t&&r.Q6J("ngModel",e.value)("placeholder",e.placeholder||"")},directives:[n.Fj,n.JJ,n.On],styles:["textarea[_ngcontent-%COMP%]{width:calc(100% - 7px);max-width:21cm;resize:none;border:1px solid transparent}textarea[_ngcontent-%COMP%]:focus, textarea.active[_ngcontent-%COMP%]{box-shadow:inset 0 0 5px #2f84ec;border:1px solid #2f84ec}"]}),t})()},594:function(t,e,s){"use strict";s.d(e,{b:function(){return i}});var r=s(7716),n=s(9790);let i=(()=>{class t{constructor(){this.imgPath="",this.dims=[0,0],this.title=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["imp-report-title"]],inputs:{imgPath:"imgPath",dims:"dims",title:"title"},decls:5,vars:6,consts:[[1,"flex","column","report-title-container"],["alt","Imperial Logo",3,"src","width","height"],[1,"report-title",3,"innerHtml"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"img",1),r._UZ(2,"br"),r._UZ(3,"div",2),r.ALo(4,"translate"),r.qZA()),2&t&&(r.xp6(1),r.Q6J("src",e.imgPath,r.LSH)("width",e.dims[0]||45)("height",e.dims[1]||45),r.xp6(2),r.Q6J("innerHtml",r.lcZ(4,4,e.title),r.oJD))},pipes:[n.X$],styles:[".report-title-container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:5px}.report-title-container[_ngcontent-%COMP%]   .report-title[_ngcontent-%COMP%]{margin:auto;font-size:18px;font-weight:700}"]}),t})()},1052:function(t){function e(t,e,s,r,n,i,a){try{var o=t[i](a),l=o.value}catch(c){return void s(c)}o.done?e(l):Promise.resolve(l).then(r,n)}t.exports=function(t){return function(){var s=this,r=arguments;return new Promise(function(n,i){var a=t.apply(s,r);function o(t){e(a,n,i,o,l,"next",t)}function l(t){e(a,n,i,o,l,"throw",t)}o(void 0)})}},t.exports.default=t.exports,t.exports.__esModule=!0},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}}]);