!function(){"use strict";function e(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,l=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw l}}}}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[40],{2623:function(e,t,a){a.d(t,{OZ:function(){return o}});var r=a(7716),o=function(){function e(){n(this,e)}return l(e,[{key:"xmlToJson",value:function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a+=1){var r=e.attributes.item(a);t["@attributes"][r.nodeName]=r.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()&&1===e.childNodes.length&&3===e.childNodes[0].nodeType)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n+=1){var o=e.childNodes.item(n),l=o.nodeName;if(void 0===t[l])t[l]=this.xmlToJson(o);else{if(void 0===t[l].push){var i=t[l];t[l]=[],t[l].push(i)}t[l].push(this.xmlToJson(o))}}return t}}]),e}();o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o.ngInjectableDef=(0,r.Ez6)({factory:function(){return new o},token:o,providedIn:"root"})},9248:function(a,r,o){o.d(r,{T:function(){return u},B:function(){return p}});var l,i=o(7716),s=o(7817),c=o(9790),u=function e(t){return Object.keys(t).forEach(function(a){"#text"===a?delete t["#text"]:("object"==typeof t[a]&&(t[a]=e(t[a])),a.includes(":")&&(t[a.split(":")[1]]=t[a],delete t[a]))}),t},p=((l=function a(r,o){var l=this;n(this,a),this._tableService=r,this.translateService=o,this.currency="EUR",this.process=function(a){l._tableService.startSession();var r,n,o,i,s={},c={};if(a["S:Envelope"]){var p=(a=(a=a["S:Envelope"]["S:Body"])[Object.keys(a)[1]].return).customTemplateData.entry;Object.keys(p).forEach(function(e){return s[p[e].key]=p[e].value}),a=u(a["ns1:Dossier"])}else a["ns2:Dossiers"]&&(a=u(a["ns2:Dossiers"]["ns2:Dossier"]));var v=a.Language;(!v||"el_GR"==v)&&(v="el"),v!=l.translateService.currentLang&&l.translateService.use(v),l.currency=a.Currency||"EUR",s.Name=a.Name,s.Description=a.Description,s.CreateDate=a.CreateDate,s.ChangeDate=a.ChangeDate,s.DamageDate=a.RepairOrder.DamageDate,n=(a.TradingData||{}).Dealership||{},o=(a.TradingData||{}).Expert||{},r=(a.TradingData||{}).Owner||{},c=a.Vehicle||{};try{l._tableService.addTable({title:"SeriesEquipment",rows:[{type:"header",persist:!0,cells:[{value:"Description"}]}].concat(t(c.Equipment.SeriesEquipment.EquipmentPosition.map(function(e){return{type:"row",cells:[{value:e.Description}]}})))})}catch(p){console.log("could not read Series Equipment")}try{l._tableService.addTable({title:"SpecialEquipment",rows:[{type:"header",persist:!0,cells:[{value:"Description"}]}].concat(t(c.Equipment.SeriesEquipment.EquipmentPosition.map(function(e){return{type:"row",cells:[{value:e.Description}]}})))})}catch(p){console.log("could not read Special Equipment")}c.Color=(c.Equipment||{}).Color,delete c.Equipment,l._tableService.switchPage();var d=(a.RepairCalculation||{}).RepairWages,f=(a.RepairCalculation||{}).CalcResultCommon||null;if(f){try{var h=(f.MaterialPositions||{}).MaterialPosition;h&&(h.length||(h=[h]),l._tableService.addTable({title:"SpareParts",rows:[{type:"header",persist:!0,cells:[{value:"PartNumber"},{value:"Description",width:40},{value:"ValuePerUnit"},{value:"Amount"},{value:"ValueTotalCorrected"}]}].concat(t(h.map(function(e){return{type:"row",cells:[{value:e.PartNumber},{value:e.Description,width:40},{value:e.ValuePerUnit},{value:e.Amount},{value:e.ValueTotalCorrected}]}})))}))}catch(p){console.log("could not read Material Positions")}try{var g=(f.AdditionalCostsPositions||{}).AdditionalCostsPosition;g&&(g.length||(g=[g]),g.forEach(function(e){e.ValueTotalCorrected||(e.ValueTotalCorrected=e.ValueTotal)}),l._tableService.addTable({title:"AdditionalCosts",rows:[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"ValueTotalCorrected"}]}].concat(t(g.map(function(e){return{type:"row",cells:[{value:e.Description,width:40},{value:e.ValueTotalCorrected}]}})))}))}catch(p){console.log("could not read Additional Costs Positions")}try{var m=(f.LabourPositions||{}).LabourPosition,y=[];if(m){m.length||(m=[m]),y.push({type:"header",persist:!0,cells:[{value:"LabourPosId"},{value:"Description",width:40},{value:"WageLevel"},{value:"Duration"},{value:"ValueTotalCorrected"}]});var b,w=e(m);try{for(w.s();!(b=w.n()).done;){var P=b.value;y.push({type:"row",cells:[{value:P.LabourPosId},{value:P.Description,width:40},{value:P.WageLevel},{value:P.Duration},{value:P.ValueTotalCorrected}]})}}catch(G){w.e(G)}finally{w.f()}}try{var C=(f.LabourPositions||{}).DentBvatPosition;if(C){C.length||(C=[C]),y.push({type:"header",persist:!0,cells:[{value:"PAINTLESS_DENT_REPAIR_HALL_DAMAGE_CENTRE"}]}),y.push({type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"MUBER_OF_DENTS"},{value:"Duration"},{value:"ValueTotalCorrected"}]});var T,S=e(C);try{for(S.s();!(T=S.n()).done;){var D=T.value;y.push({type:"row",cells:[{value:D.Description,width:40},{value:D.Amount},{value:D.Duration},{value:D.ValueTotalCorrected}]})}}catch(G){S.e(G)}finally{S.f()}}}catch(P){console.log("could not read Dent Positions")}l._tableService.addTable({title:"Labour",rows:y})}catch(p){console.log("could not read Labour Positions")}try{var x=(f.LacquerPositions||{}).LacquerPosition;x&&(x.length||(x=[x]),x.forEach(function(e){e.WagePrice=(d.Lacquer||30)*e.Duration,e.WageLevel=e.LabourPosId}),l._tableService.addTable({title:"Lacquer",rows:[{type:"header",persist:!0,cells:[{value:"WageLevel"},{value:"Description",width:40},{value:"Material"},{value:"Duration"},{value:"WagePrice"},{value:"ValueTotalCorrected"}]}].concat(t(x.map(function(e){return{type:"row",cells:[{value:e.WageLevel},{value:e.Description,width:40},{value:e.Material},{value:e.Duration},{value:e.WagePrice},{value:e.ValueTotalCorrected}]}})))}))}catch(p){console.log("could not read Lacquer Positions")}try{var A=(f.DiscountPositions||{}).DiscountPosition;A&&(A.length||(A=[A]),l._tableService.addTable({title:"Discount",rows:[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"BaseValue"},{value:"CorrectionPercentage"},{value:"ValueTotalCorrected"}]}].concat(t(A.map(function(e){return{type:"row",cells:[{value:e.Description,width:40},{value:e.BaseValue},{value:e.CorrectionPercentage},{value:e.CorrectionValue}]}})))}))}catch(p){console.log("could not read Discount Positions")}l._tableService.switchPage()}var L=(a.RepairCalculation||{}).CalculationSummary;if(L&&Object.keys(L).length>0){var _=L.AuxiliaryCosts;_&&l._tableService.addTable({title:"AdditionalCostsSum",price:_.TotalSum});try{var q=L.SparePartsCosts,O=0;q&&(O=q.TotalSum,l._tableService.addTable({title:"SumBlockSpareParts",price:O,rows:[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"AllSum"},{value:"ConsumablesSurcharge"},{value:"ValueTotalCorrected"}]},{type:"row",cells:[{value:l.translateService.stream("SparePartsSum"),width:40,isAsync:!0},{value:q.AllSum},{value:q.ConsumablesSurcharge},{value:q.TotalSum}]}]}))}catch(y){console.log("could not read Spare Parts Summary")}try{if(L.LabourCosts){var M=L.LabourCosts.TotalSum;delete L.LabourCosts.TotalSum;var E=[];Object.keys(L.LabourCosts).forEach(function(e){return E.push(L.LabourCosts[e])}),l._tableService.addTable({title:"SumBlockWage",price:M,rows:[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]}].concat(t(E.map(function(e){return{type:"row",cells:[{value:l.translateService.stream(e.Type),width:40,isAsync:!0},{value:e.Units},{value:e.PricePerUnit},{value:e.Price}]}})))})}}catch(y){console.log("could not read Labour Cost Summary")}try{if(L.LacquerCosts){var N=L.LacquerCosts.TotalSum,k=[],R=L.LacquerCosts.Wage;null!=R&&(k.push({type:"header",persist:!0,cells:[{value:"wageCost",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]}),k.push({type:"row",cells:[{value:l.translateService.stream("laquerWork"),width:40,isAsync:!0},{value:R.Unit},{value:R.PricePerUnit},{value:R.Price}]}));var I=L.LacquerCosts.Material;if(null!=I){k.push({type:"header",persist:!0,cells:[{value:"material",width:40},{value:"sumMaterialUnits"},{value:"materialUnitPrice"},{value:"ValueTotalCorrected"}]});var V=(I.LacquerConstants||{}).LacquerConstant;delete I.LacquerConstants;var U=L.LacquerCosts.Material.Surface;null!=U&&k.push({type:"row",cells:[{value:l.translateService.stream(U.Type),width:40,isAsync:!0},{value:U.Unit},{value:U.PricePerUnit},{value:U.Price}]});var Z=L.LacquerCosts.Material.Overhauling;null!=Z&&k.push({type:"row",cells:[{value:l.translateService.stream(Z.Type),width:40,isAsync:!0},{value:Z.Unit},{value:Z.PricePerUnit},{value:Z.Price}]});var j=L.LacquerCosts.Material.Replacement;if(null!=j&&k.push({type:"row",cells:[{value:l.translateService.stream(j.Type),width:40,isAsync:!0},{value:j.Unit},{value:j.PricePerUnit},{value:j.Price}]}),(L.LacquerCosts.Material.MaterialGroups||{}).LacquerMaterialGroupSummary){var Y=L.LacquerCosts.Material.MaterialGroups.LacquerMaterialGroupSummary;null!=Y&&(Y.length||(Y=[Y]),k.push.apply(k,t(Y.map(function(e){return{type:"row",cells:[{value:e.Name,width:40},{value:e.Unit},{value:e.PricePerUnit},{value:e.Price}]}}))))}null!=V&&(V.length||(V=[V]),k.push.apply(k,t(V.map(function(e){return{type:"row",cells:[{value:e.Description,width:40},{value:"-"},{value:"-"},{value:e.Price}]}}))))}l._tableService.addTable({title:"SumBlockLacquer",price:N,rows:k})}}catch(y){console.log("could not read Lacquer Cost Summary")}try{var F=[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"TotalNetCosts"},{value:"TotalVAT"},{value:"TotalGrossCosts"}]}];F.push({type:"row",cells:[{value:l.translateService.stream("RepairCost"),width:40,isAsync:!0},{value:L.TotalNetCosts},{value:L.TotalVAT},{value:L.TotalGrossCosts}]}),L.TotalNetDiscount&&F.push({type:"row",cells:[{value:l.translateService.stream("Discount"),width:40,isAsync:!0},{value:L.TotalNetDiscount},{value:L.TotalVATDiscount},{value:L.TotalGrossDiscount}]}),L.TotalNetCorrected&&F.push({type:"row",cells:[{value:l.translateService.stream("CorrectedRepairCost"),width:40,isAsync:!0},{value:L.TotalNetCorrected},{value:L.TotalVATCorrected},{value:L.TotalGrossCorrected}]}),l._tableService.addTable({title:"CostSummary",price:L.TotalGrossCorrected||L.TotalGrossCosts,rows:F})}catch(y){console.log("could not read Final Summary")}}return i=l._tableService.endSession(),{additionalInfo:s,ownerInfo:r,dealerInfo:n,expertInfo:o,vehicleInfo:c,pages:i}}}).\u0275fac=function(e){return new(e||l)(i.LFG(s.L),i.LFG(c.sK))},l.\u0275prov=i.Yz7({token:l,factory:l.\u0275fac}),l)},7817:function(e,a,r){r.d(a,{L:function(){return i}});var o,l=r(7716),i=((o=function e(){var a=this;n(this,e),this.maxRows=0,this.newTableRows=0,this.currentRow=0,this.tablesPerPage=[],this.startSession=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:33,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;a.pages=[],a.tablesPerPage=[],a.currentRow=0,a.maxRows=e,a.newTableRows=t},this.switchPage=function(){a.tablesPerPage&&a.pages.push(a.tablesPerPage),a.tablesPerPage=[],a.currentRow=0},this.endSession=function(){return a.tablesPerPage.length>0&&a.pages.push(a.tablesPerPage),a.pages},this.addTable=function(e){var r=e.rows?e.rows.length:2;if(a.currentRow+=a.newTableRows,a.currentRow+r<=a.maxRows)a.tablesPerPage.push(e),a.currentRow+=r,a.maxRows-a.currentRow<6&&(a.currentRow=0,a.pages.push(a.tablesPerPage),a.tablesPerPage=[]);else{for(var n=e.rows.splice(r-(a.currentRow+r-a.maxRows)),o=null,l=e.rows.length-1;l>=0;l--)if(e.rows[l].persist){o=e.rows[l];break}var i=o?[o].concat(t(n)):n;a.tablesPerPage.push(e),a.currentRow=0,a.pages.push(a.tablesPerPage),a.tablesPerPage=[],a.addTable({rows:i,title:e.title,price:e.price})}}}).\u0275fac=function(e){return new(e||o)},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},1002:function(e,t,a){a.d(t,{K:function(){return b}});var r=a(7716),o=a(8583),l=a(9790),i=a(3729);function s(e,t){if(1&e&&(r.TgZ(0,"th",6),r._uU(1),r.ALo(2,"precision"),r.qZA()),2&e){var a=r.oxw(3);r.xp6(1),r.Oqu(r.xi3(2,1,a.data.price,2))}}function c(e,t){if(1&e&&(r.TgZ(0,"tr",4),r.TgZ(1,"th"),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.YNc(4,s,3,4,"th",5),r.qZA()),2&e){var a=r.oxw(2);r.xp6(2),r.Oqu(r.lcZ(3,2,a.data.title)),r.xp6(2),r.Q6J("ngIf",a.data.price)}}function u(e,t){if(1&e&&(r.TgZ(0,"th"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e){var a=t.$implicit;r.Udp("flex-basis",a.width||0,"%"),r.xp6(1),r.hij(" ",r.lcZ(2,3,a.value)," ")}}function p(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"tr",8),r.YNc(2,u,3,5,"th",9),r.qZA(),r.BQk()),2&e){var a=r.oxw().$implicit;r.xp6(2),r.Q6J("ngForOf",a.cells)}}function v(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.ALo(2,"precision"),r.ALo(3,"async"),r.BQk()),2&e){var a=r.oxw().$implicit;r.xp6(1),r.hij(" ",r.xi3(2,1,r.lcZ(3,4,a.value),2)," ")}}function d(e,t){if(1&e&&(r._uU(0),r.ALo(1,"precision")),2&e){var a=r.oxw().$implicit;r.hij(" ",r.xi3(1,1,a.value,2)," ")}}function f(e,t){if(1&e&&(r.TgZ(0,"td"),r.YNc(1,v,4,6,"ng-container",11),r.YNc(2,d,2,4,"ng-template",null,12,r.W1O),r.qZA()),2&e){var a=t.$implicit,n=r.MAs(3);r.Udp("flex-basis",a.width||0,"%"),r.xp6(1),r.Q6J("ngIf",a.isAsync)("ngIfElse",n)}}function h(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"tr",10),r.YNc(2,f,4,4,"td",9),r.qZA(),r.BQk()),2&e){var a=r.oxw().$implicit;r.xp6(2),r.Q6J("ngForOf",a.cells)}}function g(e,t){if(1&e&&(r.ynx(0),r.YNc(1,p,3,1,"ng-container",7),r.YNc(2,h,3,1,"ng-container",7),r.BQk()),2&e){var a=t.$implicit;r.xp6(1),r.Q6J("ngIf","header"==a.type),r.xp6(1),r.Q6J("ngIf","row"==a.type)}}function m(e,t){if(1&e&&(r.TgZ(0,"div",1),r.TgZ(1,"table"),r.YNc(2,c,5,4,"tr",2),r.YNc(3,g,3,2,"ng-container",3),r.qZA(),r.qZA()),2&e){var a=r.oxw();r.Q6J("ngClass",a.cssClass),r.xp6(2),r.Q6J("ngIf",a.data.title),r.xp6(1),r.Q6J("ngForOf",a.data.rows)}}var y,b=((y=function e(){n(this,e),this.data=null,this.cssClass=""}).\u0275fac=function(e){return new(e||y)},y.\u0275cmp=r.Xpm({type:y,selectors:[["imp-table-info"]],inputs:{data:"data",cssClass:"cssClass"},decls:1,vars:1,consts:[["style","margin-bottom: 10px;",3,"ngClass",4,"ngIf"],[2,"margin-bottom","10px",3,"ngClass"],["class","overview",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"overview"],["style","justify-content: end",4,"ngIf"],[2,"justify-content","end"],[4,"ngIf"],[1,"header"],[3,"flex-basis",4,"ngFor","ngForOf"],[1,"row"],[4,"ngIf","ngIfElse"],["sync",""]],template:function(e,t){1&e&&r.YNc(0,m,4,3,"div",0),2&e&&r.Q6J("ngIf",t.data)},directives:[o.O5,o.mk,o.sg],pipes:[l.X$,i.$,o.Ov],styles:["mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{border-bottom:0;background-color:#ffffe0;border:1px solid black;min-height:35px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{color:#000;font-size:12px;font-weight:600;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{border-left:1px solid black;border-right:1px solid black;border-bottom-color:#000;min-height:30px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{font-size:10px;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   .mat-column-Description[_ngcontent-%COMP%]{flex:1 1 40%}"],changeDetection:0}),y)},3729:function(e,t,a){a.d(t,{$:function(){return i},p:function(){return s}});var r,o=a(7716),i=((r=function(){function e(){n(this,e)}return l(e,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"string"==typeof e?isNaN(+e)?e:parseFloat(e).toFixed(t):"number"==typeof e?e.toFixed(t):"-"}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275pipe=o.Yjl({name:"precision",type:r,pure:!0}),r),s=function(){var e=function(){function e(){n(this,e),this.vehicleType={1:"car",3:"motorcycle",4:"truck"}}return l(e,[{key:"transform",value:function(e){return this.vehicleType[e]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Yjl({name:"vehicleType",type:e,pure:!0}),e}()}}])}();