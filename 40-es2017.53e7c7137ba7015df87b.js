"use strict";(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[40],{2623:function(e,t,a){a.d(t,{OZ:function(){return l}});var s=a(7716);class l{constructor(){}xmlToJson(e){let t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(let a=0;a<e.attributes.length;a+=1){const s=e.attributes.item(a);t["@attributes"][s.nodeName]=s.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()&&1===e.childNodes.length&&3===e.childNodes[0].nodeType)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(let a=0;a<e.childNodes.length;a+=1){const s=e.childNodes.item(a),l=s.nodeName;if(void 0===t[l])t[l]=this.xmlToJson(s);else{if(void 0===t[l].push){const e=t[l];t[l]=[],t[l].push(e)}t[l].push(this.xmlToJson(s))}}return t}}l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=s.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l.ngInjectableDef=(0,s.Ez6)({factory:function(){return new l},token:l,providedIn:"root"})},9248:function(e,t,a){a.d(t,{T:function(){return r},B:function(){return i}});var s=a(7716),l=a(7817),o=a(9790);const r=e=>(Object.keys(e).forEach(t=>{"#text"===t?delete e["#text"]:("object"==typeof e[t]&&(e[t]=r(e[t])),t.includes(":")&&(e[t.split(":")[1]]=e[t],delete e[t]))}),e);let i=(()=>{class e{constructor(e,t){this._tableService=e,this.translateService=t,this.currency="EUR",this.process=e=>{this._tableService.startSession();let t={},a={},s={},l={},o={},i=[];if(e["S:Envelope"]){const a=(e=(e=e["S:Envelope"]["S:Body"])[Object.keys(e)[1]].return).customTemplateData.entry;Object.keys(a).forEach(e=>t[a[e].key]=a[e].value),e=r(e["ns1:Dossier"])}else e["ns2:Dossiers"]&&(e=r(e["ns2:Dossiers"]["ns2:Dossier"]));let n=e.Language;(!n||"el_GR"==n)&&(n="el"),n!=this.translateService.currentLang&&this.translateService.use(n),this.currency=e.Currency||"EUR",t.Name=e.Name,t.Description=e.Description,t.CreateDate=e.CreateDate,t.ChangeDate=e.ChangeDate,t.DamageDate=e.RepairOrder.DamageDate,s=(e.TradingData||{}).Dealership||{},l=(e.TradingData||{}).Expert||{},a=(e.TradingData||{}).Owner||{},o=e.Vehicle||{};try{this._tableService.addTable({title:"SeriesEquipment",rows:[{type:"header",persist:!0,cells:[{value:"Description"}]},...o.Equipment.SeriesEquipment.EquipmentPosition.map(e=>({type:"row",cells:[{value:e.Description}]}))]})}catch(h){console.log("could not read Series Equipment")}try{this._tableService.addTable({title:"SpecialEquipment",rows:[{type:"header",persist:!0,cells:[{value:"Description"}]},...o.Equipment.SeriesEquipment.EquipmentPosition.map(e=>({type:"row",cells:[{value:e.Description}]}))]})}catch(h){console.log("could not read Special Equipment")}o.Color=(o.Equipment||{}).Color,delete o.Equipment,this._tableService.switchPage();const c=(e.RepairCalculation||{}).RepairWages,u=(e.RepairCalculation||{}).CalcResultCommon||null;if(u){try{let e=(u.MaterialPositions||{}).MaterialPosition;e&&(e.length||(e=[e]),this._tableService.addTable({title:"SpareParts",rows:[{type:"header",persist:!0,cells:[{value:"PartNumber"},{value:"Description",width:40},{value:"ValuePerUnit"},{value:"Amount"},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.PartNumber},{value:e.Description,width:40},{value:e.ValuePerUnit},{value:e.Amount},{value:e.ValueTotalCorrected}]}))]}))}catch(h){console.log("could not read Material Positions")}try{let e=(u.AdditionalCostsPositions||{}).AdditionalCostsPosition;e&&(e.length||(e=[e]),e.forEach(e=>{e.ValueTotalCorrected||(e.ValueTotalCorrected=e.ValueTotal)}),this._tableService.addTable({title:"AdditionalCosts",rows:[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.Description,width:40},{value:e.ValueTotalCorrected}]}))]}))}catch(h){console.log("could not read Additional Costs Positions")}try{let e=(u.LabourPositions||{}).LabourPosition;const t=[];if(e){e.length||(e=[e]),t.push({type:"header",persist:!0,cells:[{value:"LabourPosId"},{value:"Description",width:40},{value:"WageLevel"},{value:"Duration"},{value:"ValueTotalCorrected"}]});for(const a of e)t.push({type:"row",cells:[{value:a.LabourPosId},{value:a.Description,width:40},{value:a.WageLevel},{value:a.Duration},{value:a.ValueTotalCorrected}]})}try{let e=(u.LabourPositions||{}).DentBvatPosition;if(e){e.length||(e=[e]),t.push({type:"header",persist:!0,cells:[{value:"PAINTLESS_DENT_REPAIR_HALL_DAMAGE_CENTRE"}]}),t.push({type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"MUBER_OF_DENTS"},{value:"Duration"},{value:"ValueTotalCorrected"}]});for(const a of e)t.push({type:"row",cells:[{value:a.Description,width:40},{value:a.Amount},{value:a.Duration},{value:a.ValueTotalCorrected}]})}}catch(d){console.log("could not read Dent Positions")}this._tableService.addTable({title:"Labour",rows:t})}catch(h){console.log("could not read Labour Positions")}try{let e=(u.LacquerPositions||{}).LacquerPosition;e&&(e.length||(e=[e]),e.forEach(e=>{e.WagePrice=(c.Lacquer||30)*e.Duration,e.WageLevel=e.LabourPosId}),this._tableService.addTable({title:"Lacquer",rows:[{type:"header",persist:!0,cells:[{value:"WageLevel"},{value:"Description",width:40},{value:"Material"},{value:"Duration"},{value:"WagePrice"},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.WageLevel},{value:e.Description,width:40},{value:e.Material},{value:e.Duration},{value:e.WagePrice},{value:e.ValueTotalCorrected}]}))]}))}catch(h){console.log("could not read Lacquer Positions")}try{let e=(u.DiscountPositions||{}).DiscountPosition;e&&(e.length||(e=[e]),this._tableService.addTable({title:"Discount",rows:[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"BaseValue"},{value:"CorrectionPercentage"},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.Description,width:40},{value:e.BaseValue},{value:e.CorrectionPercentage},{value:e.CorrectionValue}]}))]}))}catch(h){console.log("could not read Discount Positions")}this._tableService.switchPage()}const p=(e.RepairCalculation||{}).CalculationSummary;if(p&&Object.keys(p).length>0){const e=p.AuxiliaryCosts;e&&this._tableService.addTable({title:"AdditionalCostsSum",price:e.TotalSum});try{const e=p.SparePartsCosts;let t=0;e&&(t=e.TotalSum,this._tableService.addTable({title:"SumBlockSpareParts",price:t,rows:[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"AllSum"},{value:"ConsumablesSurcharge"},{value:"ValueTotalCorrected"}]},{type:"row",cells:[{value:this.translateService.stream("SparePartsSum"),width:40,isAsync:!0},{value:e.AllSum},{value:e.ConsumablesSurcharge},{value:e.TotalSum}]}]}))}catch(v){console.log("could not read Spare Parts Summary")}try{if(p.LabourCosts){let e=p.LabourCosts.TotalSum;delete p.LabourCosts.TotalSum;const t=[];Object.keys(p.LabourCosts).forEach(e=>t.push(p.LabourCosts[e])),this._tableService.addTable({title:"SumBlockWage",price:e,rows:[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]},...t.map(e=>({type:"row",cells:[{value:this.translateService.stream(e.Type),width:40,isAsync:!0},{value:e.Units},{value:e.PricePerUnit},{value:e.Price}]}))]})}}catch(v){console.log("could not read Labour Cost Summary")}try{if(p.LacquerCosts){let e=p.LacquerCosts.TotalSum;const t=[],a=p.LacquerCosts.Wage;null!=a&&(t.push({type:"header",persist:!0,cells:[{value:"wageCost",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]}),t.push({type:"row",cells:[{value:this.translateService.stream("laquerWork"),width:40,isAsync:!0},{value:a.Unit},{value:a.PricePerUnit},{value:a.Price}]}));const s=p.LacquerCosts.Material;if(null!=s){t.push({type:"header",persist:!0,cells:[{value:"material",width:40},{value:"sumMaterialUnits"},{value:"materialUnitPrice"},{value:"ValueTotalCorrected"}]});let e=(s.LacquerConstants||{}).LacquerConstant;delete s.LacquerConstants;const a=p.LacquerCosts.Material.Overhauling;null!=a&&t.push({type:"row",cells:[{value:this.translateService.stream(a.Type),width:40,isAsync:!0},{value:a.Unit},{value:a.PricePerUnit},{value:a.Price}]});const l=p.LacquerCosts.Material.Replacement;if(null!=l&&t.push({type:"row",cells:[{value:this.translateService.stream(l.Type),width:40,isAsync:!0},{value:l.Unit},{value:l.PricePerUnit},{value:l.Price}]}),(p.LacquerCosts.Material.MaterialGroups||{}).LacquerMaterialGroupSummary){let e=p.LacquerCosts.Material.MaterialGroups.LacquerMaterialGroupSummary;null!=e&&(e.length||(e=[e]),t.push(...e.map(e=>({type:"row",cells:[{value:e.Name,width:40},{value:e.Unit},{value:e.PricePerUnit},{value:e.Price}]}))))}null!=e&&(e.length||(e=[e]),t.push(...e.map(e=>({type:"row",cells:[{value:e.Description,width:40},{value:"-"},{value:"-"},{value:e.Price}]}))))}this._tableService.addTable({title:"SumBlockLacquer",price:e,rows:t})}}catch(v){console.log("could not read Lacquer Cost Summary")}try{const e=[{type:"header",persist:!0,cells:[{value:"Description",width:40},{value:"TotalNetCosts"},{value:"TotalVAT"},{value:"TotalGrossCosts"}]}];e.push({type:"row",cells:[{value:this.translateService.stream("RepairCost"),width:40,isAsync:!0},{value:p.TotalNetCosts},{value:p.TotalVAT},{value:p.TotalGrossCosts}]}),p.TotalNetDiscount&&e.push({type:"row",cells:[{value:this.translateService.stream("Discount"),width:40,isAsync:!0},{value:p.TotalNetDiscount},{value:p.TotalVATDiscount},{value:p.TotalGrossDiscount}]}),p.TotalNetCorrected&&e.push({type:"row",cells:[{value:this.translateService.stream("CorrectedRepairCost"),width:40,isAsync:!0},{value:p.TotalNetCorrected},{value:p.TotalVATCorrected},{value:p.TotalGrossCorrected}]}),this._tableService.addTable({title:"CostSummary",price:p.TotalGrossCorrected||p.TotalGrossCosts,rows:e})}catch(v){console.log("could not read Final Summary")}}return i=this._tableService.endSession(),{additionalInfo:t,ownerInfo:a,dealerInfo:s,expertInfo:l,vehicleInfo:o,pages:i}}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(l.L),s.LFG(o.sK))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})()},7817:function(e,t,a){a.d(t,{L:function(){return l}});var s=a(7716);let l=(()=>{class e{constructor(){this.maxRows=0,this.newTableRows=0,this.currentRow=0,this.tablesPerPage=[],this.startSession=(e=33,t=3)=>{this.pages=[],this.tablesPerPage=[],this.currentRow=0,this.maxRows=e,this.newTableRows=t},this.switchPage=()=>{this.tablesPerPage&&this.pages.push(this.tablesPerPage),this.tablesPerPage=[],this.currentRow=0},this.endSession=()=>(this.tablesPerPage.length>0&&this.pages.push(this.tablesPerPage),this.pages),this.addTable=e=>{const t=e.rows?e.rows.length:2;if(this.currentRow+=this.newTableRows,this.currentRow+t<=this.maxRows)this.tablesPerPage.push(e),this.currentRow+=t,this.maxRows-this.currentRow<6&&(this.currentRow=0,this.pages.push(this.tablesPerPage),this.tablesPerPage=[]);else{const a=e.rows.splice(t-(this.currentRow+t-this.maxRows));let s=null;for(let t=e.rows.length-1;t>=0;t--)if(e.rows[t].persist){s=e.rows[t];break}const l=s?[s,...a]:a;this.tablesPerPage.push(e),this.currentRow=0,this.pages.push(this.tablesPerPage),this.tablesPerPage=[],this.addTable({rows:l,title:e.title,price:e.price})}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1002:function(e,t,a){a.d(t,{K:function(){return f}});var s=a(7716),l=a(8583),o=a(9790),r=a(3729);function i(e,t){if(1&e&&(s.TgZ(0,"th",6),s._uU(1),s.ALo(2,"precision"),s.qZA()),2&e){const e=s.oxw(3);s.xp6(1),s.Oqu(s.xi3(2,1,e.data.price,2))}}function n(e,t){if(1&e&&(s.TgZ(0,"tr",4),s.TgZ(1,"th"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.YNc(4,i,3,4,"th",5),s.qZA()),2&e){const e=s.oxw(2);s.xp6(2),s.Oqu(s.lcZ(3,2,e.data.title)),s.xp6(2),s.Q6J("ngIf",e.data.price)}}function c(e,t){if(1&e&&(s.TgZ(0,"th"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e){const e=t.$implicit;s.Udp("flex-basis",e.width||0,"%"),s.xp6(1),s.hij(" ",s.lcZ(2,3,e.value)," ")}}function u(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"tr",8),s.YNc(2,c,3,5,"th",9),s.qZA(),s.BQk()),2&e){const e=s.oxw().$implicit;s.xp6(2),s.Q6J("ngForOf",e.cells)}}function p(e,t){if(1&e&&(s.ynx(0),s._uU(1),s.ALo(2,"precision"),s.ALo(3,"async"),s.BQk()),2&e){const e=s.oxw().$implicit;s.xp6(1),s.hij(" ",s.xi3(2,1,s.lcZ(3,4,e.value),2)," ")}}function h(e,t){if(1&e&&(s._uU(0),s.ALo(1,"precision")),2&e){const e=s.oxw().$implicit;s.hij(" ",s.xi3(1,1,e.value,2)," ")}}function d(e,t){if(1&e&&(s.TgZ(0,"td"),s.YNc(1,p,4,6,"ng-container",11),s.YNc(2,h,2,4,"ng-template",null,12,s.W1O),s.qZA()),2&e){const e=t.$implicit,a=s.MAs(3);s.Udp("flex-basis",e.width||0,"%"),s.xp6(1),s.Q6J("ngIf",e.isAsync)("ngIfElse",a)}}function v(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"tr",10),s.YNc(2,d,4,4,"td",9),s.qZA(),s.BQk()),2&e){const e=s.oxw().$implicit;s.xp6(2),s.Q6J("ngForOf",e.cells)}}function g(e,t){if(1&e&&(s.ynx(0),s.YNc(1,u,3,1,"ng-container",7),s.YNc(2,v,3,1,"ng-container",7),s.BQk()),2&e){const e=t.$implicit;s.xp6(1),s.Q6J("ngIf","header"==e.type),s.xp6(1),s.Q6J("ngIf","row"==e.type)}}function m(e,t){if(1&e&&(s.TgZ(0,"div",1),s.TgZ(1,"table"),s.YNc(2,n,5,4,"tr",2),s.YNc(3,g,3,2,"ng-container",3),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.Q6J("ngClass",e.cssClass),s.xp6(2),s.Q6J("ngIf",e.data.title),s.xp6(1),s.Q6J("ngForOf",e.data.rows)}}let f=(()=>{class e{constructor(){this.data=null,this.cssClass=""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["imp-table-info"]],inputs:{data:"data",cssClass:"cssClass"},decls:1,vars:1,consts:[["style","margin-bottom: 10px;",3,"ngClass",4,"ngIf"],[2,"margin-bottom","10px",3,"ngClass"],["class","overview",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"overview"],["style","justify-content: end",4,"ngIf"],[2,"justify-content","end"],[4,"ngIf"],[1,"header"],[3,"flex-basis",4,"ngFor","ngForOf"],[1,"row"],[4,"ngIf","ngIfElse"],["sync",""]],template:function(e,t){1&e&&s.YNc(0,m,4,3,"div",0),2&e&&s.Q6J("ngIf",t.data)},directives:[l.O5,l.mk,l.sg],pipes:[o.X$,r.$,l.Ov],styles:["mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{border-bottom:0;background-color:#ffffe0;border:1px solid black;min-height:35px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{color:#000;font-size:12px;font-weight:600;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{border-left:1px solid black;border-right:1px solid black;border-bottom-color:#000;min-height:30px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{font-size:10px;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   .mat-column-Description[_ngcontent-%COMP%]{flex:1 1 40%}"],changeDetection:0}),e})()},3729:function(e,t,a){a.d(t,{$:function(){return l},p:function(){return o}});var s=a(7716);let l=(()=>{class e{transform(e,t=2,a="-"){return"string"==typeof e?isNaN(+e)?e:parseFloat(e).toFixed(t):"number"==typeof e?e.toFixed(t):"-"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Yjl({name:"precision",type:e,pure:!0}),e})(),o=(()=>{class e{constructor(){this.vehicleType={1:"car",3:"motorcycle",4:"truck"}}transform(e){return this.vehicleType[e]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Yjl({name:"vehicleType",type:e,pure:!0}),e})()}}]);