"use strict";(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[40],{2623:function(e,t,a){a.d(t,{OZ:function(){return o}});var l=a(7716);class o{constructor(){}xmlToJson(e){let t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(let a=0;a<e.attributes.length;a+=1){const l=e.attributes.item(a);t["@attributes"][l.nodeName]=l.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()&&1===e.childNodes.length&&3===e.childNodes[0].nodeType)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(let a=0;a<e.childNodes.length;a+=1){const l=e.childNodes.item(a),o=l.nodeName;if(void 0===t[o])t[o]=this.xmlToJson(l);else{if(void 0===t[o].push){const e=t[o];t[o]=[],t[o].push(e)}t[o].push(this.xmlToJson(l))}}return t}}o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o.ngInjectableDef=(0,l.Ez6)({factory:function(){return new o},token:o,providedIn:"root"})},9248:function(e,t,a){a.d(t,{T:function(){return r},B:function(){return i}});var l=a(7716),o=a(7817),s=a(9790);const r=e=>(Object.keys(e).forEach(t=>{"#text"===t?delete e["#text"]:("object"==typeof e[t]&&(e[t]=r(e[t])),t.includes(":")&&(e[t.split(":")[1]]=e[t],delete e[t]))}),e);let i=(()=>{class e{constructor(e,t){this._tableService=e,this.translateService=t,this.currency="EUR",this.process=e=>{this._tableService.startSession();let t={},a={},l={},o={},s={},i=[];if(e["S:Envelope"]){const a=(e=(e=e["S:Envelope"]["S:Body"])[Object.keys(e)[1]].return).customTemplateData.entry;Object.keys(a).forEach(e=>t[a[e].key]=a[e].value),e=r(e["ns1:Dossier"])}else e["ns2:Dossiers"]&&(e=r(e["ns2:Dossiers"]["ns2:Dossier"]));let n=e.Language;(!n||"el_GR"==n)&&(n="el"),n!=this.translateService.currentLang&&this.translateService.use(n),this.currency=e.Currency||"EUR",t.Name=e.Name,t.Description=e.Description,t.CreateDate=e.CreateDate,t.ChangeDate=e.ChangeDate,t.DamageDate=e.RepairOrder.DamageDate,l=(e.TradingData||{}).Dealership||{},o=(e.TradingData||{}).Expert||{},a=(e.TradingData||{}).Owner||{},s=e.Vehicle||{};try{this._tableService.addTable({title:"SeriesEquipment",rows:[{type:"header",cells:[{value:"Description"}]},...s.Equipment.SeriesEquipment.EquipmentPosition.map(e=>({type:"row",cells:[{value:e.Description}]}))]})}catch(p){console.log("could not read Series Equipment")}try{this._tableService.addTable({title:"SpecialEquipment",rows:[{type:"header",cells:[{value:"Description"}]},...s.Equipment.SeriesEquipment.EquipmentPosition.map(e=>({type:"row",cells:[{value:e.Description}]}))]})}catch(p){console.log("could not read Special Equipment")}s.Color=(s.Equipment||{}).Color,delete s.Equipment,this._tableService.switchPage();const c=(e.RepairCalculation||{}).RepairWages,u=(e.RepairCalculation||{}).CalcResultCommon||null;if(u){try{let e=(u.MaterialPositions||{}).MaterialPosition;e&&(e.length||(e=[e]),this._tableService.addTable({title:"SpareParts",rows:[{type:"header",cells:[{value:"PartNumber"},{value:"Description",width:40},{value:"ValuePerUnit"},{value:"Amount"},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.PartNumber},{value:e.Description,width:40},{value:e.ValuePerUnit},{value:e.Amount},{value:e.ValueTotalCorrected}]}))]}))}catch(p){console.log("could not read Material Positions")}try{let e=(u.AdditionalCostsPositions||{}).AdditionalCostsPosition;e&&(e.length||(e=[e]),e.forEach(e=>{e.ValueTotalCorrected||(e.ValueTotalCorrected=e.ValueTotal)}),this._tableService.addTable({title:"AdditionalCosts",rows:[{type:"header",cells:[{value:"Description",width:40},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.Description,width:40},{value:e.ValueTotalCorrected}]}))]}))}catch(p){console.log("could not read Additional Costs Positions")}try{let e=(u.LabourPositions||{}).LabourPosition;e&&(e.length||(e=[e]),this._tableService.addTable({title:"Labour",rows:[{type:"header",cells:[{value:"LabourPosId"},{value:"Description",width:40},{value:"WageLevel"},{value:"Duration"},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.LabourPosId},{value:e.Description,width:40},{value:e.WageLevel},{value:e.Duration},{value:e.ValueTotalCorrected}]}))]}))}catch(p){console.log("could not read Labour Positions")}try{let e=(u.LacquerPositions||{}).LacquerPosition;e&&(e.length||(e=[e]),e.forEach(e=>{e.WagePrice=(c.Lacquer||30)*e.Duration,e.WageLevel=e.LabourPosId}),this._tableService.addTable({title:"Lacquer",rows:[{type:"header",cells:[{value:"WageLevel"},{value:"Description",width:40},{value:"Material"},{value:"Duration"},{value:"WagePrice"},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.WageLevel},{value:e.Description,width:40},{value:e.Material},{value:e.Duration},{value:e.WagePrice},{value:e.ValueTotalCorrected}]}))]}))}catch(p){console.log("could not read Lacquer Positions")}try{let e=(u.DiscountPositions||{}).DiscountPosition;e&&(e.length||(e=[e]),this._tableService.addTable({title:"Discount",rows:[{type:"header",cells:[{value:"Description",width:40},{value:"BaseValue"},{value:"CorrectionPercentage"},{value:"ValueTotalCorrected"}]},...e.map(e=>({type:"row",cells:[{value:e.Description,width:40},{value:e.BaseValue},{value:e.CorrectionPercentage},{value:e.CorrectionValue}]}))]}))}catch(p){console.log("could not read Discount Positions")}this._tableService.switchPage()}const d=(e.RepairCalculation||{}).CalculationSummary;if(d&&Object.keys(d).length>0){const e=d.AuxiliaryCosts;e&&this._tableService.addTable({title:"AdditionalCostsSum",price:e.TotalSum});try{const e=d.SparePartsCosts;let t=0;e&&(t=e.TotalSum,this._tableService.addTable({title:"SumBlockSpareParts",price:t,rows:[{type:"header",cells:[{value:"Description",width:40},{value:"AllSum"},{value:"ConsumablesSurcharge"},{value:"ValueTotalCorrected"}]},{type:"row",cells:[{value:this.translateService.stream("SparePartsSum"),width:40,isAsync:!0},{value:e.AllSum},{value:e.ConsumablesSurcharge},{value:e.TotalSum}]}]}))}catch(h){console.log("could not read Spare Parts Summary")}try{if(d.LabourCosts){let e=d.LabourCosts.TotalSum;delete d.LabourCosts.TotalSum;const t=[];Object.keys(d.LabourCosts).forEach(e=>t.push(d.LabourCosts[e])),this._tableService.addTable({title:"SumBlockWage",price:e,rows:[{type:"header",cells:[{value:"Description",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]},...t.map(e=>({type:"row",cells:[{value:this.translateService.stream(e.Type),width:40,isAsync:!0},{value:e.Units},{value:e.PricePerUnit},{value:e.Price}]}))]})}}catch(h){console.log("could not read Labour Cost Summary")}try{if(d.LacquerCosts){let e=d.LacquerCosts.TotalSum;const t=[],a=d.LacquerCosts.Wage;null!=a&&(t.push({type:"header",cells:[{value:"wageCost",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]}),t.push({type:"row",cells:[{value:this.translateService.stream("laquerWork"),width:40,isAsync:!0},{value:a.Unit},{value:a.PricePerUnit},{value:a.Price}]}));const l=d.LacquerCosts.Material;if(null!=l){t.push({type:"header",cells:[{value:"material",width:40},{value:"sumMaterialUnits"},{value:"materialUnitPrice"},{value:"ValueTotalCorrected"}]});const e=(l.LacquerConstants||{}).LacquerConstant;delete l.LacquerConstants;const a=d.LacquerCosts.Material.Overhauling;null!=a&&t.push({type:"row",cells:[{value:this.translateService.stream(a.Type),width:40,isAsync:!0},{value:a.Unit},{value:a.PricePerUnit},{value:a.Price}]});const o=d.LacquerCosts.Material.Replacement;if(null!=o&&t.push({type:"row",cells:[{value:this.translateService.stream(o.Type),width:40,isAsync:!0},{value:o.Unit},{value:o.PricePerUnit},{value:o.Price}]}),(d.LacquerCosts.Material.MaterialGroups||{}).LacquerMaterialGroupSummary){let e=d.LacquerCosts.Material.MaterialGroups.LacquerMaterialGroupSummary;null!=e&&(e.length||(e=[e]),t.push(...e.map(e=>({type:"row",cells:[{value:e.Name,width:40},{value:e.Unit},{value:e.PricePerUnit},{value:e.Price}]}))))}null!=e&&t.push({type:"row",cells:[{value:e.Description,width:40},{value:"-"},{value:"-"},{value:e.Price}]})}this._tableService.addTable({title:"SumBlockLacquer",price:e,rows:t})}}catch(h){console.log("could not read Lacquer Cost Summary")}try{const e=[{type:"header",cells:[{value:"Description",width:40},{value:"TotalNetCosts"},{value:"TotalVAT"},{value:"TotalGrossCosts"}]}];e.push({type:"row",cells:[{value:this.translateService.stream("RepairCost"),width:40,isAsync:!0},{value:d.TotalNetCosts},{value:d.TotalVAT},{value:d.TotalGrossCosts}]}),d.TotalNetDiscount&&e.push({type:"row",cells:[{value:this.translateService.stream("Discount"),width:40,isAsync:!0},{value:d.TotalNetDiscount},{value:d.TotalVATDiscount},{value:d.TotalGrossDiscount}]}),d.TotalNetCorrected&&e.push({type:"row",cells:[{value:this.translateService.stream("CorrectedRepairCost"),width:40,isAsync:!0},{value:d.TotalNetCorrected},{value:d.TotalVATCorrected},{value:d.TotalGrossCorrected}]}),this._tableService.addTable({title:"CostSummary",price:d.TotalGrossCorrected||d.TotalGrossCosts,rows:e})}catch(h){console.log("could not read Final Summary")}}return i=this._tableService.endSession(),{additionalInfo:t,ownerInfo:a,dealerInfo:l,expertInfo:o,vehicleInfo:s,pages:i}}}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(o.L),l.LFG(s.sK))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac}),e})()},7817:function(e,t,a){a.d(t,{L:function(){return o}});var l=a(7716);let o=(()=>{class e{constructor(){this.maxRows=0,this.newTableRows=0,this.currentRow=0,this.tablesPerPage=[],this.startSession=(e=33,t=3)=>{this.pages=[],this.tablesPerPage=[],this.currentRow=0,this.maxRows=e,this.newTableRows=t},this.switchPage=()=>{this.tablesPerPage&&this.pages.push(this.tablesPerPage),this.tablesPerPage=[],this.currentRow=0},this.endSession=()=>(this.tablesPerPage.length>0&&this.pages.push(this.tablesPerPage),this.pages),this.addTable=e=>{const t=e.rows?e.rows.length:2;if(this.currentRow+=this.newTableRows,this.currentRow+t<=this.maxRows)this.tablesPerPage.push(e),this.currentRow+=t,this.maxRows-this.currentRow<6&&(this.currentRow=0,this.pages.push(this.tablesPerPage),this.tablesPerPage=[]);else{const a=e.rows.splice(t-(this.currentRow+t-this.maxRows));this.tablesPerPage.push(e),this.currentRow=0,this.pages.push(this.tablesPerPage),this.tablesPerPage=[],this.addTable({rows:a,title:e.title,price:e.price})}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1002:function(e,t,a){a.d(t,{K:function(){return f}});var l=a(7716),o=a(8583),s=a(9790),r=a(3729);function i(e,t){if(1&e&&(l.TgZ(0,"th",6),l._uU(1),l.ALo(2,"precision"),l.qZA()),2&e){const e=l.oxw(3);l.xp6(1),l.Oqu(l.xi3(2,1,e.data.price,2))}}function n(e,t){if(1&e&&(l.TgZ(0,"tr",4),l.TgZ(1,"th"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.YNc(4,i,3,4,"th",5),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Oqu(l.lcZ(3,2,e.data.title)),l.xp6(2),l.Q6J("ngIf",e.data.price)}}function c(e,t){if(1&e&&(l.TgZ(0,"th"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e){const e=t.$implicit;l.Udp("flex-basis",e.width||0,"%"),l.xp6(1),l.hij(" ",l.lcZ(2,3,e.value)," ")}}function u(e,t){if(1&e&&(l.ynx(0),l.TgZ(1,"tr",8),l.YNc(2,c,3,5,"th",9),l.qZA(),l.BQk()),2&e){const e=l.oxw().$implicit;l.xp6(2),l.Q6J("ngForOf",e.cells)}}function d(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.ALo(2,"precision"),l.ALo(3,"async"),l.BQk()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",l.xi3(2,1,l.lcZ(3,4,e.value),2)," ")}}function p(e,t){if(1&e&&(l._uU(0),l.ALo(1,"precision")),2&e){const e=l.oxw().$implicit;l.hij(" ",l.xi3(1,1,e.value,2)," ")}}function h(e,t){if(1&e&&(l.TgZ(0,"td"),l.YNc(1,d,4,6,"ng-container",11),l.YNc(2,p,2,4,"ng-template",null,12,l.W1O),l.qZA()),2&e){const e=t.$implicit,a=l.MAs(3);l.Udp("flex-basis",e.width||0,"%"),l.xp6(1),l.Q6J("ngIf",e.isAsync)("ngIfElse",a)}}function v(e,t){if(1&e&&(l.ynx(0),l.TgZ(1,"tr",10),l.YNc(2,h,4,4,"td",9),l.qZA(),l.BQk()),2&e){const e=l.oxw().$implicit;l.xp6(2),l.Q6J("ngForOf",e.cells)}}function g(e,t){if(1&e&&(l.ynx(0),l.YNc(1,u,3,1,"ng-container",7),l.YNc(2,v,3,1,"ng-container",7),l.BQk()),2&e){const e=t.$implicit;l.xp6(1),l.Q6J("ngIf","header"==e.type),l.xp6(1),l.Q6J("ngIf","row"==e.type)}}function m(e,t){if(1&e&&(l.TgZ(0,"div",1),l.TgZ(1,"table"),l.YNc(2,n,5,4,"tr",2),l.YNc(3,g,3,2,"ng-container",3),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.Q6J("ngClass",e.cssClass),l.xp6(2),l.Q6J("ngIf",e.data.title),l.xp6(1),l.Q6J("ngForOf",e.data.rows)}}let f=(()=>{class e{constructor(){this.data=null,this.cssClass=""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["imp-table-info"]],inputs:{data:"data",cssClass:"cssClass"},decls:1,vars:1,consts:[["style","margin-bottom: 10px;",3,"ngClass",4,"ngIf"],[2,"margin-bottom","10px",3,"ngClass"],["class","overview",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"overview"],["style","justify-content: end",4,"ngIf"],[2,"justify-content","end"],[4,"ngIf"],[1,"header"],[3,"flex-basis",4,"ngFor","ngForOf"],[1,"row"],[4,"ngIf","ngIfElse"],["sync",""]],template:function(e,t){1&e&&l.YNc(0,m,4,3,"div",0),2&e&&l.Q6J("ngIf",t.data)},directives:[o.O5,o.mk,o.sg],pipes:[s.X$,r.$,o.Ov],styles:["mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{border-bottom:0;background-color:#ffffe0;border:1px solid black;min-height:35px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{color:#000;font-size:12px;font-weight:600;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{border-left:1px solid black;border-right:1px solid black;border-bottom-color:#000;min-height:30px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{font-size:10px;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   .mat-column-Description[_ngcontent-%COMP%]{flex:1 1 40%}"],changeDetection:0}),e})()},3729:function(e,t,a){a.d(t,{$:function(){return o},p:function(){return s}});var l=a(7716);let o=(()=>{class e{transform(e,t=2,a="-"){return"string"==typeof e?isNaN(+e)?e:parseFloat(e).toFixed(t):"number"==typeof e?e.toFixed(t):"-"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=l.Yjl({name:"precision",type:e,pure:!0}),e})(),s=(()=>{class e{constructor(){this.vehicleType={1:"car",3:"motorcycle",4:"truck"}}transform(e){return this.vehicleType[e]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=l.Yjl({name:"vehicleType",type:e,pure:!0}),e})()}}]);