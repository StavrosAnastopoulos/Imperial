!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(!e)return;if("string"==typeof e)return t(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,a)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[40],{2623:function(e,t,r){r.d(t,{OZ:function(){return l}});var o=r(7716),l=function(){function e(){a(this,e)}return n(e,[{key:"xmlToJson",value:function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a+=1){var r=e.attributes.item(a);t["@attributes"][r.nodeName]=r.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()&&1===e.childNodes.length&&3===e.childNodes[0].nodeType)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n+=1){var o=e.childNodes.item(n),l=o.nodeName;if(void 0===t[l])t[l]=this.xmlToJson(o);else{if(void 0===t[l].push){var i=t[l];t[l]=[],t[l].push(i)}t[l].push(this.xmlToJson(o))}}return t}}]),e}();l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=o.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l.ngInjectableDef=(0,o.Ez6)({factory:function(){return new l},token:l,providedIn:"root"})},9248:function(t,r,n){n.d(r,{T:function(){return c},B:function(){return u}});var o,l=n(7716),i=n(7817),s=n(9790),c=function e(t){return Object.keys(t).forEach(function(a){"#text"===a?delete t["#text"]:("object"==typeof t[a]&&(t[a]=e(t[a])),a.includes(":")&&(t[a.split(":")[1]]=t[a],delete t[a]))}),t},u=((o=function t(r,n){var o=this;a(this,t),this._tableService=r,this.translateService=n,this.currency="EUR",this.process=function(t){o._tableService.startSession();var a,r,n,l,i={},s={};if(t["S:Envelope"]){var u=(t=(t=t["S:Envelope"]["S:Body"])[Object.keys(t)[1]].return).customTemplateData.entry;Object.keys(u).forEach(function(e){return i[u[e].key]=u[e].value}),t=c(t["ns1:Dossier"])}else t["ns2:Dossiers"]&&(t=c(t["ns2:Dossiers"]["ns2:Dossier"]));var p=t.Language;(!p||"el_GR"==p)&&(p="el"),p!=o.translateService.currentLang&&o.translateService.use(p),o.currency=t.Currency||"EUR",i.Name=t.Name,i.Description=t.Description,i.CreateDate=t.CreateDate,i.ChangeDate=t.ChangeDate,i.DamageDate=t.RepairOrder.DamageDate,r=(t.TradingData||{}).Dealership||{},n=(t.TradingData||{}).Expert||{},a=(t.TradingData||{}).Owner||{},s=t.Vehicle||{};try{o._tableService.addTable({title:"SeriesEquipment",rows:[{type:"header",cells:[{value:"Description"}]}].concat(e(s.Equipment.SeriesEquipment.EquipmentPosition.map(function(e){return{type:"row",cells:[{value:e.Description}]}})))})}catch(u){console.log("could not read Series Equipment")}try{o._tableService.addTable({title:"SpecialEquipment",rows:[{type:"header",cells:[{value:"Description"}]}].concat(e(s.Equipment.SeriesEquipment.EquipmentPosition.map(function(e){return{type:"row",cells:[{value:e.Description}]}})))})}catch(u){console.log("could not read Special Equipment")}s.Color=(s.Equipment||{}).Color,delete s.Equipment,o._tableService.switchPage();var d=(t.RepairCalculation||{}).RepairWages,v=(t.RepairCalculation||{}).CalcResultCommon||null;if(v){try{var f=(v.MaterialPositions||{}).MaterialPosition;f&&(f.length||(f=[f]),o._tableService.addTable({title:"SpareParts",rows:[{type:"header",cells:[{value:"PartNumber"},{value:"Description",width:40},{value:"ValuePerUnit"},{value:"Amount"},{value:"ValueTotalCorrected"}]}].concat(e(f.map(function(e){return{type:"row",cells:[{value:e.PartNumber},{value:e.Description,width:40},{value:e.ValuePerUnit},{value:e.Amount},{value:e.ValueTotalCorrected}]}})))}))}catch(u){console.log("could not read Material Positions")}try{var h=(v.AdditionalCostsPositions||{}).AdditionalCostsPosition;h&&(h.length||(h=[h]),h.forEach(function(e){e.ValueTotalCorrected||(e.ValueTotalCorrected=e.ValueTotal)}),o._tableService.addTable({title:"AdditionalCosts",rows:[{type:"header",cells:[{value:"Description",width:40},{value:"ValueTotalCorrected"}]}].concat(e(h.map(function(e){return{type:"row",cells:[{value:e.Description,width:40},{value:e.ValueTotalCorrected}]}})))}))}catch(u){console.log("could not read Additional Costs Positions")}try{var g=(v.LabourPositions||{}).LabourPosition;g&&(g.length||(g=[g]),o._tableService.addTable({title:"Labour",rows:[{type:"header",cells:[{value:"LabourPosId"},{value:"Description",width:40},{value:"WageLevel"},{value:"Duration"},{value:"ValueTotalCorrected"}]}].concat(e(g.map(function(e){return{type:"row",cells:[{value:e.LabourPosId},{value:e.Description,width:40},{value:e.WageLevel},{value:e.Duration},{value:e.ValueTotalCorrected}]}})))}))}catch(u){console.log("could not read Labour Positions")}try{var m=(v.LacquerPositions||{}).LacquerPosition;m&&(m.length||(m=[m]),m.forEach(function(e){e.WagePrice=(d.Lacquer||30)*e.Duration,e.WageLevel=e.LabourPosId}),o._tableService.addTable({title:"Lacquer",rows:[{type:"header",cells:[{value:"WageLevel"},{value:"Description",width:40},{value:"Material"},{value:"Duration"},{value:"WagePrice"},{value:"ValueTotalCorrected"}]}].concat(e(m.map(function(e){return{type:"row",cells:[{value:e.WageLevel},{value:e.Description,width:40},{value:e.Material},{value:e.Duration},{value:e.WagePrice},{value:e.ValueTotalCorrected}]}})))}))}catch(u){console.log("could not read Lacquer Positions")}try{var b=(v.DiscountPositions||{}).DiscountPosition;b&&(b.length||(b=[b]),o._tableService.addTable({title:"Discount",rows:[{type:"header",cells:[{value:"Description",width:40},{value:"BaseValue"},{value:"CorrectionPercentage"},{value:"ValueTotalCorrected"}]}].concat(e(b.map(function(e){return{type:"row",cells:[{value:e.Description,width:40},{value:e.BaseValue},{value:e.CorrectionPercentage},{value:e.CorrectionValue}]}})))}))}catch(u){console.log("could not read Discount Positions")}o._tableService.switchPage()}var y=(t.RepairCalculation||{}).CalculationSummary;if(y&&Object.keys(y).length>0){var w=y.AuxiliaryCosts;w&&o._tableService.addTable({title:"AdditionalCostsSum",price:w.TotalSum});try{var C=y.SparePartsCosts,P=0;C&&(P=C.TotalSum,o._tableService.addTable({title:"SumBlockSpareParts",price:P,rows:[{type:"header",cells:[{value:"Description",width:40},{value:"AllSum"},{value:"ConsumablesSurcharge"},{value:"ValueTotalCorrected"}]},{type:"row",cells:[{value:o.translateService.stream("SparePartsSum"),width:40,isAsync:!0},{value:C.AllSum},{value:C.ConsumablesSurcharge},{value:C.TotalSum}]}]}))}catch(C){console.log("could not read Spare Parts Summary")}try{if(y.LabourCosts){var T=y.LabourCosts.TotalSum;delete y.LabourCosts.TotalSum;var S=[];Object.keys(y.LabourCosts).forEach(function(e){return S.push(y.LabourCosts[e])}),o._tableService.addTable({title:"SumBlockWage",price:T,rows:[{type:"header",cells:[{value:"Description",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]}].concat(e(S.map(function(e){return{type:"row",cells:[{value:o.translateService.stream(e.Type),width:40,isAsync:!0},{value:e.Units},{value:e.PricePerUnit},{value:e.Price}]}})))})}}catch(C){console.log("could not read Labour Cost Summary")}try{if(y.LacquerCosts){var x=y.LacquerCosts.TotalSum,D=[],L=y.LacquerCosts.Wage;null!=L&&(D.push({type:"header",cells:[{value:"wageCost",width:40},{value:"Duration"},{value:"PricePerUnit"},{value:"ValueTotalCorrected"}]}),D.push({type:"row",cells:[{value:o.translateService.stream("laquerWork"),width:40,isAsync:!0},{value:L.Unit},{value:L.PricePerUnit},{value:L.Price}]}));var A=y.LacquerCosts.Material;if(null!=A){D.push({type:"header",cells:[{value:"material",width:40},{value:"sumMaterialUnits"},{value:"materialUnitPrice"},{value:"ValueTotalCorrected"}]});var q=(A.LacquerConstants||{}).LacquerConstant;delete A.LacquerConstants;var _=y.LacquerCosts.Material.Overhauling;null!=_&&D.push({type:"row",cells:[{value:o.translateService.stream(_.Type),width:40,isAsync:!0},{value:_.Unit},{value:_.PricePerUnit},{value:_.Price}]});var O=y.LacquerCosts.Material.Replacement;if(null!=O&&D.push({type:"row",cells:[{value:o.translateService.stream(O.Type),width:40,isAsync:!0},{value:O.Unit},{value:O.PricePerUnit},{value:O.Price}]}),(y.LacquerCosts.Material.MaterialGroups||{}).LacquerMaterialGroupSummary){var M=y.LacquerCosts.Material.MaterialGroups.LacquerMaterialGroupSummary;null!=M&&(M.length||(M=[M]),D.push.apply(D,e(M.map(function(e){return{type:"row",cells:[{value:e.Name,width:40},{value:e.Unit},{value:e.PricePerUnit},{value:e.Price}]}}))))}null!=q&&D.push({type:"row",cells:[{value:q.Description,width:40},{value:"-"},{value:"-"},{value:q.Price}]})}o._tableService.addTable({title:"SumBlockLacquer",price:x,rows:D})}}catch(C){console.log("could not read Lacquer Cost Summary")}try{var k=[{type:"header",cells:[{value:"Description",width:40},{value:"TotalNetCosts"},{value:"TotalVAT"},{value:"TotalGrossCosts"}]}];k.push({type:"row",cells:[{value:o.translateService.stream("RepairCost"),width:40,isAsync:!0},{value:y.TotalNetCosts},{value:y.TotalVAT},{value:y.TotalGrossCosts}]}),y.TotalNetDiscount&&k.push({type:"row",cells:[{value:o.translateService.stream("Discount"),width:40,isAsync:!0},{value:y.TotalNetDiscount},{value:y.TotalVATDiscount},{value:y.TotalGrossDiscount}]}),y.TotalNetCorrected&&k.push({type:"row",cells:[{value:o.translateService.stream("CorrectedRepairCost"),width:40,isAsync:!0},{value:y.TotalNetCorrected},{value:y.TotalVATCorrected},{value:y.TotalGrossCorrected}]}),o._tableService.addTable({title:"CostSummary",price:y.TotalGrossCorrected||y.TotalGrossCosts,rows:k})}catch(C){console.log("could not read Final Summary")}}return l=o._tableService.endSession(),{additionalInfo:i,ownerInfo:a,dealerInfo:r,expertInfo:n,vehicleInfo:s,pages:l}}}).\u0275fac=function(e){return new(e||o)(l.LFG(i.L),l.LFG(s.sK))},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac}),o)},7817:function(e,t,r){r.d(t,{L:function(){return l}});var n,o=r(7716),l=((n=function e(){var t=this;a(this,e),this.maxRows=0,this.newTableRows=0,this.currentRow=0,this.tablesPerPage=[],this.startSession=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:33,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;t.pages=[],t.tablesPerPage=[],t.currentRow=0,t.maxRows=e,t.newTableRows=a},this.switchPage=function(){t.tablesPerPage&&t.pages.push(t.tablesPerPage),t.tablesPerPage=[],t.currentRow=0},this.endSession=function(){return t.tablesPerPage.length>0&&t.pages.push(t.tablesPerPage),t.pages},this.addTable=function(e){var a=e.rows?e.rows.length:2;if(t.currentRow+=t.newTableRows,t.currentRow+a<=t.maxRows)t.tablesPerPage.push(e),t.currentRow+=a,t.maxRows-t.currentRow<6&&(t.currentRow=0,t.pages.push(t.tablesPerPage),t.tablesPerPage=[]);else{var r=e.rows.splice(a-(t.currentRow+a-t.maxRows));t.tablesPerPage.push(e),t.currentRow=0,t.pages.push(t.tablesPerPage),t.tablesPerPage=[],t.addTable({rows:r,title:e.title,price:e.price})}}}).\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},1002:function(e,t,r){r.d(t,{K:function(){return y}});var n=r(7716),o=r(8583),l=r(9790),i=r(3729);function s(e,t){if(1&e&&(n.TgZ(0,"th",6),n._uU(1),n.ALo(2,"precision"),n.qZA()),2&e){var a=n.oxw(3);n.xp6(1),n.Oqu(n.xi3(2,1,a.data.price,2))}}function c(e,t){if(1&e&&(n.TgZ(0,"tr",4),n.TgZ(1,"th"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,s,3,4,"th",5),n.qZA()),2&e){var a=n.oxw(2);n.xp6(2),n.Oqu(n.lcZ(3,2,a.data.title)),n.xp6(2),n.Q6J("ngIf",a.data.price)}}function u(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){var a=t.$implicit;n.Udp("flex-basis",a.width||0,"%"),n.xp6(1),n.hij(" ",n.lcZ(2,3,a.value)," ")}}function p(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"tr",8),n.YNc(2,u,3,5,"th",9),n.qZA(),n.BQk()),2&e){var a=n.oxw().$implicit;n.xp6(2),n.Q6J("ngForOf",a.cells)}}function d(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"precision"),n.ALo(3,"async"),n.BQk()),2&e){var a=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.xi3(2,1,n.lcZ(3,4,a.value),2)," ")}}function v(e,t){if(1&e&&(n._uU(0),n.ALo(1,"precision")),2&e){var a=n.oxw().$implicit;n.hij(" ",n.xi3(1,1,a.value,2)," ")}}function f(e,t){if(1&e&&(n.TgZ(0,"td"),n.YNc(1,d,4,6,"ng-container",11),n.YNc(2,v,2,4,"ng-template",null,12,n.W1O),n.qZA()),2&e){var a=t.$implicit,r=n.MAs(3);n.Udp("flex-basis",a.width||0,"%"),n.xp6(1),n.Q6J("ngIf",a.isAsync)("ngIfElse",r)}}function h(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"tr",10),n.YNc(2,f,4,4,"td",9),n.qZA(),n.BQk()),2&e){var a=n.oxw().$implicit;n.xp6(2),n.Q6J("ngForOf",a.cells)}}function g(e,t){if(1&e&&(n.ynx(0),n.YNc(1,p,3,1,"ng-container",7),n.YNc(2,h,3,1,"ng-container",7),n.BQk()),2&e){var a=t.$implicit;n.xp6(1),n.Q6J("ngIf","header"==a.type),n.xp6(1),n.Q6J("ngIf","row"==a.type)}}function m(e,t){if(1&e&&(n.TgZ(0,"div",1),n.TgZ(1,"table"),n.YNc(2,c,5,4,"tr",2),n.YNc(3,g,3,2,"ng-container",3),n.qZA(),n.qZA()),2&e){var a=n.oxw();n.Q6J("ngClass",a.cssClass),n.xp6(2),n.Q6J("ngIf",a.data.title),n.xp6(1),n.Q6J("ngForOf",a.data.rows)}}var b,y=((b=function e(){a(this,e),this.data=null,this.cssClass=""}).\u0275fac=function(e){return new(e||b)},b.\u0275cmp=n.Xpm({type:b,selectors:[["imp-table-info"]],inputs:{data:"data",cssClass:"cssClass"},decls:1,vars:1,consts:[["style","margin-bottom: 10px;",3,"ngClass",4,"ngIf"],[2,"margin-bottom","10px",3,"ngClass"],["class","overview",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"overview"],["style","justify-content: end",4,"ngIf"],[2,"justify-content","end"],[4,"ngIf"],[1,"header"],[3,"flex-basis",4,"ngFor","ngForOf"],[1,"row"],[4,"ngIf","ngIfElse"],["sync",""]],template:function(e,t){1&e&&n.YNc(0,m,4,3,"div",0),2&e&&n.Q6J("ngIf",t.data)},directives:[o.O5,o.mk,o.sg],pipes:[l.X$,i.$,o.Ov],styles:["mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{border-bottom:0;background-color:#ffffe0;border:1px solid black;min-height:35px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{color:#000;font-size:12px;font-weight:600;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{border-left:1px solid black;border-right:1px solid black;border-bottom-color:#000;min-height:30px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{font-size:10px;text-align:left;padding-left:3px}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid black}mat-table[_ngcontent-%COMP%]   .mat-column-Description[_ngcontent-%COMP%]{flex:1 1 40%}"],changeDetection:0}),b)},3729:function(e,t,r){r.d(t,{$:function(){return i},p:function(){return s}});var o,l=r(7716),i=((o=function(){function e(){a(this,e)}return n(e,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"string"==typeof e?isNaN(+e)?e:parseFloat(e).toFixed(t):"number"==typeof e?e.toFixed(t):"-"}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275pipe=l.Yjl({name:"precision",type:o,pure:!0}),o),s=function(){var e=function(){function e(){a(this,e),this.vehicleType={1:"car",3:"motorcycle",4:"truck"}}return n(e,[{key:"transform",value:function(e){return this.vehicleType[e]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=l.Yjl({name:"vehicleType",type:e,pure:!0}),e}()}}])}();